
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pycity_scheduling.classes package &#8212; pycity_scheduling v1.0.1 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"extensions": ["tex2jax.js"], "jax": ["input/TeX", "output/HTML-CSS"]})</script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pycity_scheduling.util package" href="pycity_scheduling.util.html" />
    <link rel="prev" title="pycity_scheduling.algorithms package" href="pycity_scheduling.algorithms.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pycity_scheduling.util.html" title="pycity_scheduling.util package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pycity_scheduling.algorithms.html" title="pycity_scheduling.algorithms package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pycity_scheduling v1.0.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">pycity_scheduling.classes package</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pycity-scheduling-classes-package">
<h1>pycity_scheduling.classes package<a class="headerlink" href="#pycity-scheduling-classes-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-pycity_scheduling.classes.apartment">
<span id="pycity-scheduling-classes-apartment-module"></span><h2>pycity_scheduling.classes.apartment module<a class="headerlink" href="#module-pycity_scheduling.classes.apartment" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.apartment.Apartment">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.apartment.</code><code class="sig-name descname">Apartment</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">net_floor_area</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">occupancy</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.apartment.Apartment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.entity_container.EntityContainer" title="pycity_scheduling.classes.entity_container.EntityContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.entity_container.EntityContainer</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.demand.apartment.Apartment</span></code></p>
<p>Extension of pyCity_base class Apartment for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common to all other objects. Includes time and weather instances</p></li>
<li><p><strong>net_floor_area</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – netto floor area in [m^2]</p></li>
<li><p><strong>occupancy</strong> (<em>Occupancy</em><em>, </em><em>optional</em>) – Occupancy profile from pycity_base for the apartment.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>Apartments inherit their set of constraints from EntityContainer.</p></li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.apartment.Apartment.addEntity" title="pycity_scheduling.classes.apartment.Apartment.addEntity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">addEntity</span></code></a>(entity)</p></td>
<td><p>Add entity to apartment.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.apartment.Apartment.get_lower_entities" title="pycity_scheduling.classes.apartment.Apartment.get_lower_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_lower_entities</span></code></a>()</p></td>
<td><p>Yield all lower-level entities.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.apartment.Apartment.addEntity">
<code class="sig-name descname">addEntity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">entity</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.apartment.Apartment.addEntity" title="Permalink to this definition">¶</a></dt>
<dd><p>Add entity to apartment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>entity</strong> (<a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity"><em>OptimizationEntity</em></a>) – Entity to be added to the apartment; must be of type FixedLoad,
DeferrableLoad, CurtailableLoad, SpaceHeating, SpaceCooling or DomesticHotWater.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.apartment.Apartment.get_lower_entities">
<code class="sig-name descname">get_lower_entities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.apartment.Apartment.get_lower_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all lower-level entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>All contained entities.</em></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.battery">
<span id="pycity-scheduling-classes-battery-module"></span><h2>pycity_scheduling.classes.battery module<a class="headerlink" href="#module-pycity_scheduling.classes.battery" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.battery.Battery">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.battery.</code><code class="sig-name descname">Battery</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">e_el_max</span></em>, <em class="sig-param"><span class="n">p_el_max_charge</span></em>, <em class="sig-param"><span class="n">p_el_max_discharge</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">soc_init</span><span class="o">=</span><span class="default_value">0.5</span></em>, <em class="sig-param"><span class="n">eta</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">storage_end_equality</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.battery.Battery" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.battery.Battery</span></code></p>
<p>Extension of pyCity_base class Battery for scheduling purposes.</p>
<p>Initialize Battery.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>e_el_max</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Electric capacity of the battery [kWh].</p></li>
<li><p><strong>p_el_max_charge</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Maximum charging power [kW].</p></li>
<li><p><strong>p_el_max_discharge</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Maximum discharging power [kW]. Defaults to zero.</p></li>
<li><p><strong>soc_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Initial state of charge. Defaults to 50%.</p></li>
<li><p><strong>eta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Charging and discharging efficiency. Must be in (0,1]. Defaults
to one.</p></li>
<li><p><strong>storage_end_equality</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – <cite>True</cite> if the soc at the end of the scheduling has to be equal to
the initial soc.
<cite>False</cite> if it has to be greater or equal than the initial soc.
Defaults to <cite>False</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>Batteries offer sets of constraints for operation. In the <cite>convex</cite> mode
the following constraints and bounds are generated by the battery:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{el} &amp;=&amp; p_{el\_demand} - p_{el\_supply} \\
p_{el\_max\_discharge} &amp;\geq&amp; p_{el\_supply} \geq 0 \\
p_{el\_max\_charge} &amp;\geq&amp; p_{el\_demand} \geq 0 \\
e_{el\_max} &amp;\geq&amp; e_{el} \geq 0 \\
e_{el} &amp;=&amp; e_{el\_previous} + (\eta * p_{el\_demand}
- (1 / \eta) * p_{el\_supply}) * \Delta t \\
\text{with} \quad e_{el\_previous} &amp;=&amp; \
\begin{bmatrix} e_{el\_ini} &amp; e_{el\_0} &amp; \cdots &amp; e_{el\_n-1}\end{bmatrix}\end{split}\]</div>
<ul class="simple">
<li><p>Additional constraints generated by the parameters are:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}e_{el\_t\_last} &amp;=&amp; soc\_init * e_{el\_max}, &amp; \quad \text{if storage_end_equality} \\
e_{el\_t\_last} &amp;\geq&amp; soc\_init * e_{el\_max}, &amp; \quad \text{else}\end{split}\]</div>
<ul class="simple">
<li><p>In <cite>integer</cite> mode the following constraints are added additionally:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{el\_demand} &amp;\leq&amp; p_{state} * p_{el\_max\_discharge} \\
p_{el\_supply} &amp;\leq&amp; (1-p_{state}) * p_{el\_max\_charge}\end{split}\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.battery.Battery.populate_model" title="pycity_scheduling.classes.battery.Battery.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block of variables and constraints to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.battery.Battery.update_model" title="pycity_scheduling.classes.battery.Battery.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.battery.Battery.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.battery.Battery.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block of variables and constraints to pyomo ConcreteModel.</p>
<p>Call parent’s <cite>populate_model</cite> method and set variables lower bounds to
<cite>None</cite>. Then add variables for demand, supply and the state of charge,
with their corresponding upper bounds (<cite>self.p_el_max_charge</cite>,
<cite>self.p_el_max_discharge</cite>, <cite>self.e_el_max</cite>). Finally add continuity
constraints to the block.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.battery.Battery.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.battery.Battery.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.boiler">
<span id="pycity-scheduling-classes-boiler-module"></span><h2>pycity_scheduling.classes.boiler module<a class="headerlink" href="#module-pycity_scheduling.classes.boiler" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.boiler.Boiler">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.boiler.</code><code class="sig-name descname">Boiler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">p_th_nom</span></em>, <em class="sig-param"><span class="n">eta</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">lower_activation_limit</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.boiler.Boiler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating" title="pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.boiler.Boiler</span></code></p>
<p>Extension of pyCity_base class Boiler for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.Environment" title="pycity_scheduling.classes.Environment"><em>pycity_scheduling.classes.Environment</em></a>) – Common to all other objects. Includes time and weather instances.</p></li>
<li><p><strong>p_th_nom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Nominal heat output in [kW].</p></li>
<li><p><strong>eta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Efficiency of the gas boiler (without unit).</p></li>
<li><p><strong>lower_activation_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em><em> (</em><em>only adhered to in integer mode</em><em>)</em>) – <p>Must be in [0, 1]. Lower activation limit of the gas boiler as a
percentage of the rated power. When the gas boiler is in operation, its
power must be zero or between the lower activation limit and its
rated power.</p>
<ul>
<li><p><cite>lower_activation_limit = 0</cite>: Linear behavior</p></li>
<li><p><cite>lower_activation_limit = 1</cite>: Two-point controlled</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>Gas boilers offer sets of constraints for operation. In the <cite>convex</cite> mode the
following constraints and bounds are generated by the boiler:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[0 \geq p_{th\_heat} \geq -p_{th\_nom}\]</div>
<ul class="simple">
<li><dl class="simple">
<dt>See also:</dt><dd><ul>
<li><p>pycity_scheduling.util.generic_constraints.LowerActivationLimit:
Generates additional constraints for the <cite>lower_activation_limit</cite> in <cite>integer</cite> mode.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.boiler.Boiler.get_objective" title="pycity_scheduling.classes.boiler.Boiler.get_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_objective</span></code></a>([coeff])</p></td>
<td><p>Objective function for entity level scheduling.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.boiler.Boiler.populate_model" title="pycity_scheduling.classes.boiler.Boiler.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.boiler.Boiler.get_objective">
<code class="sig-name descname">get_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coeff</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.boiler.Boiler.get_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function for entity level scheduling.</p>
<p>Return the objective function of the boiler weighted with coeff.
Sum of <cite>p_th_heat</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coeff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Coefficient for the objective function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Objective function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ExpressionBase</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.boiler.Boiler.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.boiler.Boiler.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel</p>
<p>Call parent’s <cite>populate_model</cite> method and set variables upper bounds
to <cite>self.p_th_nom</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.building">
<span id="pycity-scheduling-classes-building-module"></span><h2>pycity_scheduling.classes.building module<a class="headerlink" href="#module-pycity_scheduling.classes.building" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.building.Building">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.building.</code><code class="sig-name descname">Building</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">objective</span><span class="o">=</span><span class="default_value">'price'</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">profile_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">building_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">storage_end_equality</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.building.Building" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.entity_container.EntityContainer" title="pycity_scheduling.classes.entity_container.EntityContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.entity_container.EntityContainer</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.building.Building</span></code></p>
<p>Extension of pyCity_base class Building for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common to all other objects. Includes time and weather instances.</p></li>
<li><p><strong>objective</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Objective for the scheduling. The default is ‘price’.</p>
<ul>
<li><p>’price’ : Optimize for the prices given by <cite>prices.tou_prices</cite>.</p></li>
<li><p>’co2’ : Optimize for the CO2 emissions given by <cite>prices.co2_prices</cite>.</p></li>
<li><p>’peak-shaving’ : Try to flatten the schedule as much as possible.</p></li>
<li><p>’max-consumption’ : Try to reduce the maximum of the absolute values of the schedule as much as possible.</p></li>
<li><p>’none’ : No objective (leave all flexibility to other participants).</p></li>
</ul>
</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – Name for the building.
If name is None, set it to self._long_id.</p></li>
<li><p><strong>profile_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Thermal SLP profile name
Requires <cite>method=1</cite></p>
<ul>
<li><p>’HEF’ : Single family household</p></li>
<li><p>’HMF’ : Multi family household</p></li>
<li><p>’GBA’ : Bakeries</p></li>
<li><p>’GBD’ : Other services</p></li>
<li><p>’GBH’ : Accommodations</p></li>
<li><p>’GGA’ : Restaurants</p></li>
<li><p>’GGB’ : Gardening</p></li>
<li><p>’GHA’ : Retailers</p></li>
<li><p>’GHD’ : Summed load profile business, trade and services</p></li>
<li><p>’GKO’ : Banks, insurances, public institutions</p></li>
<li><p>’GMF’ : Household similar businesses</p></li>
<li><p>’GMK’ : Automotive</p></li>
<li><p>’GPD’ : Paper and printing</p></li>
<li><p>’GWA’ : Laundries</p></li>
</ul>
</p></li>
<li><p><strong>building_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – Build year profile name, the detailed list is implemented in
<cite>tabula_data.py</cite>.</p></li>
<li><p><strong>storage_end_equality</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – <cite>True</cite> if the soc at the end of the scheduling has to be equal to
the initial soc.
<cite>False</cite> if it has to be greater or equal than the initial soc.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The exchange of thermal energy between different buildings is currently not supported.
As a result, the building adds the following set of constrains additionally to the
ones of the EntityContainer:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{th\_heat} &amp;=&amp; 0 \\
p_{th\_cool} &amp;=&amp; 0\end{split}\]</div>
<ul class="simple">
<li><p>The building can also add robustness constrains for thermal heating storage:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}e_{u\_bound} \geq \sum_i e_{th\_heat\_i} \geq e_{l\_bound} \\\end{split}\]</div>
<ul class="simple">
<li><p>The <span class="math notranslate nohighlight">\(E_{u\_bound}\)</span> and <span class="math notranslate nohighlight">\(E_{l\_bound}\)</span> are determined by the
robustness parameter, the available capacity of thermal heating storage, the magnitude of heating
required by SpaceHeating and the magnitude of heating that can be produced by the building’s heating units.</p></li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.building.Building.get_lower_entities" title="pycity_scheduling.classes.building.Building.get_lower_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_lower_entities</span></code></a>()</p></td>
<td><p>Yield all lower-level entities.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.building.Building.populate_model" title="pycity_scheduling.classes.building.Building.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode, robustness])</p></td>
<td><p>Add building block to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.building.Building.update_model" title="pycity_scheduling.classes.building.Building.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode, robustness])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.building.Building.get_lower_entities">
<code class="sig-name descname">get_lower_entities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.building.Building.get_lower_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all lower-level entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>All contained entities.</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.building.Building.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em>, <em class="sig-param"><span class="n">robustness</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.building.Building.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add building block to pyomo ConcreteModel.</p>
<p>Call parent’s <cite>populate_model</cite> method and set variables lower
bounds to <cite>None</cite>. Then call <cite>populate_model</cite> method of the BES
and all contained apartments and add constraints that the sum
of their variables for each period equals the corresponding
own variable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use same constraints as convex mode</p></li>
</ul>
</p></li>
<li><p><strong>robustness</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em>, </em><em>optional</em>) – Tuple of two floats. First entry defines how many time steps are
protected from deviations. Second entry defines the magnitude of
deviations which are considered.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.building.Building.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">robustness</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.building.Building.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the device
according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use same constraints as convex mode</p></li>
</ul>
</p></li>
<li><p><strong>robustness</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em>, </em><em>optional</em>) – Tuple of two floats. First entry defines how many time steps are
protected from deviations. Second entry defines the magnitude of
deviations which are considered.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.building_energy_system">
<span id="pycity-scheduling-classes-building-energy-system-module"></span><h2>pycity_scheduling.classes.building_energy_system module<a class="headerlink" href="#module-pycity_scheduling.classes.building_energy_system" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.building_energy_system.BuildingEnergySystem">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.building_energy_system.</code><code class="sig-name descname">BuildingEnergySystem</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.building_energy_system.BuildingEnergySystem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.entity_container.EntityContainer" title="pycity_scheduling.classes.entity_container.EntityContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.entity_container.EntityContainer</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.building_energy_system.BES</span></code></p>
<p>Extension of pyCity_base class BES for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – </p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The constraints generated by a BES are the same as the ones created by an EntityContainer.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference internal" href="#pycity_scheduling.classes.building_energy_system.BuildingEnergySystem.tcs_units" title="pycity_scheduling.classes.building_energy_system.BuildingEnergySystem.tcs_units"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tcs_units</span></code></a></dt><dd><p>Provides all TCS units.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.building_energy_system.BuildingEnergySystem.ths_units" title="pycity_scheduling.classes.building_energy_system.BuildingEnergySystem.ths_units"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ths_units</span></code></a></dt><dd><p>Provides all THS units.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.building_energy_system.BuildingEnergySystem.getHasDevices" title="pycity_scheduling.classes.building_energy_system.BuildingEnergySystem.getHasDevices"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getHasDevices</span></code></a>([all_devices, battery, …])</p></td>
<td><p>Get information if certain devices are installed devices.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.building_energy_system.BuildingEnergySystem.get_lower_entities" title="pycity_scheduling.classes.building_energy_system.BuildingEnergySystem.get_lower_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_lower_entities</span></code></a>()</p></td>
<td><p>Yield all lower-level entities.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.building_energy_system.BuildingEnergySystem.getHasDevices">
<code class="sig-name descname">getHasDevices</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">all_devices</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">battery</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">boiler</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">chp</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">chiller</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">electrical_heater</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">heatpump</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">inverter_acdc</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">inverter_dcac</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">pv</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ths</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">tcs</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.building_energy_system.BuildingEnergySystem.getHasDevices" title="Permalink to this definition">¶</a></dt>
<dd><p>Get information if certain devices are installed devices.
The result is in alphabetical order, starting with “battery”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>all_devices</strong> (<em>boolean</em><em>, </em><em>optional</em>) – If true: Return all installed devices
If false: Only return the specified devices</p></li>
<li><p><strong>battery</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the battery</p></li>
<li><p><strong>boiler</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the boiler</p></li>
<li><p><strong>chp</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the chp unit</p></li>
<li><p><strong>chiller</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the chiller unit</p></li>
<li><p><strong>electrical_heater</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the electrical heater</p></li>
<li><p><strong>heatpump</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the heat pump</p></li>
<li><p><strong>inverter_acdc</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the AC-DC inverter</p></li>
<li><p><strong>inverter_dcac</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the DC-AC inverter</p></li>
<li><p><strong>pv</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the PV modules</p></li>
<li><p><strong>ths</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the thermal heating storage</p></li>
<li><p><strong>tcs</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the thermal cooling storage</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.building_energy_system.BuildingEnergySystem.get_lower_entities">
<code class="sig-name descname">get_lower_entities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.building_energy_system.BuildingEnergySystem.get_lower_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all lower-level entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>All contained entities.</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.building_energy_system.BuildingEnergySystem.tcs_units">
<em class="property">property </em><code class="sig-name descname">tcs_units</code><a class="headerlink" href="#pycity_scheduling.classes.building_energy_system.BuildingEnergySystem.tcs_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides all TCS units.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.building_energy_system.BuildingEnergySystem.ths_units">
<em class="property">property </em><code class="sig-name descname">ths_units</code><a class="headerlink" href="#pycity_scheduling.classes.building_energy_system.BuildingEnergySystem.ths_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides all THS units.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.chiller">
<span id="pycity-scheduling-classes-chiller-module"></span><h2>pycity_scheduling.classes.chiller module<a class="headerlink" href="#module-pycity_scheduling.classes.chiller" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.chiller.Chiller">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.chiller.</code><code class="sig-name descname">Chiller</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">p_th_nom</span></em>, <em class="sig-param"><span class="n">cop</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">eta</span><span class="o">=</span><span class="default_value">0.36</span></em>, <em class="sig-param"><span class="n">t_min</span><span class="o">=</span><span class="default_value">4.0</span></em>, <em class="sig-param"><span class="n">lower_activation_limit</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">t_flow</span><span class="o">=</span><span class="default_value">16.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.chiller.Chiller" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling" title="pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling</span></code></a>, <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.compression_chiller.CompressionChiller</span></code></p>
<p>Extension of pyCity_base class CompressionChiller for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common to all other objects. Includes time and weather instances.</p></li>
<li><p><strong>p_th_nom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Nominal thermal power of the chiller in [kW].</p></li>
<li><p><strong>cop</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.19)"><em>numpy.ndarray</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The chiller’s coefficient of performance (without unit)
If array, it must provide the coefficient of performance (cop) for
each time step in the simulation horizon.
If int or float, a constant cop over the whole horizon is assumed.
If omitted, an air-water chiller is assumed and the cop is
calculated based on the ambient air temperature, eta and t_flow.</p></li>
<li><p><strong>eta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The Carnot efficiency of the chiller.
If cop is omitted, eta is used to calculate the cop based on T_sink and T_source
according to: cop = eta * T_sink * (T_sink - T_source) with T_sink and T_source in Kelvin</p></li>
<li><p><strong>t_min</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The chiller’s minimum provided temperature in °C</p></li>
<li><p><strong>lower_activation_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em><em> (</em><em>only adhered to in integer mode</em><em>)</em>) – <p>Must be in [0, 1]. Lower activation limit of the chiller as a
percentage of the rated power. When the chiller is in operation, its
power must be zero or between the lower activation limit and its
rated power.</p>
<ul>
<li><p><cite>lower_activation_limit = 0</cite>: Linear behavior</p></li>
<li><p><cite>lower_activation_limit = 1</cite>: Two-point controlled</p></li>
</ul>
</p></li>
<li><p><strong>t_flow</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – T_sink temperature delivered by CC in °C.
Is used for cop calculation if cop is omitted.
Note that t_flow &gt;= t_min must hold.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>CHs offer sets of constraints for operation. In the <cite>convex</cite> mode the
following constraints and bounds are generated by the CH:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}0 \geq p_{th\_cool} &amp;\geq&amp; -p_{th\_nom} \\
cop * p_{el} &amp;=&amp; - p_{th\_cool}\end{split}\]</div>
<ul class="simple">
<li><dl class="simple">
<dt>See also:</dt><dd><ul>
<li><p>pycity_scheduling.util.generic_constraints.LowerActivationLimit:
Generates additional constraints for the <cite>lower_activation_limit</cite> in <cite>integer</cite> mode.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.chiller.Chiller.populate_model" title="pycity_scheduling.classes.chiller.Chiller.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.chiller.Chiller.update_model" title="pycity_scheduling.classes.chiller.Chiller.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.chiller.Chiller.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.chiller.Chiller.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel.</p>
<p>Call parent’s <cite>populate_model</cite> method and set thermal variables lower
bounds to <cite>-self.p_th_nom</cite> and the upper bounds to zero. Also add
constraint to bind electrical demand to thermal output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.chiller.Chiller.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.chiller.Chiller.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.city_district">
<span id="pycity-scheduling-classes-city-district-module"></span><h2>pycity_scheduling.classes.city_district module<a class="headerlink" href="#module-pycity_scheduling.classes.city_district" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.city_district.CityDistrict">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.city_district.</code><code class="sig-name descname">CityDistrict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">objective</span><span class="o">=</span><span class="default_value">'price'</span></em>, <em class="sig-param"><span class="n">valley_profile</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.city_district.CityDistrict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.city_district.CityDistrict</span></code></p>
<p>Extension of pyCity_base class CityDistrict for scheduling purposes. Also represents the district operator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – </p></li>
<li><p><strong>objective</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Objective for the district operator. Default is ‘price’.</p>
<ul>
<li><p>’price’ : Optimize for the minimum total cost given by <cite>prices.da_prices</cite>.</p></li>
<li><p>’peak-shaving’ : Try to ‘flatten’ the schedule as much as possible.</p></li>
<li><p>’max-consumption’ : Try to minimize the maximum power subscription.</p></li>
<li><p>’co2’ : Optimize for the minimum total co2 emissions given by <cite>prices.co2_prices</cite>.</p></li>
<li><p>valley-filling : Try to fill the ‘valleys’ given by a reference power profile.</p></li>
<li><p>flexibility-quantification: To be used to quantify the flexibility potential of the city district only.</p></li>
<li><p>’none’ : No objective.</p></li>
</ul>
</p></li>
<li><p><strong>valley_profile</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.19)"><em>numpy.ndarray</em></a><em>, </em><em>optional</em>) – Profile to be filled by applying valley filling.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The constraints generated by a CD are the same as the ones created by an EntityContainer.</p></li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.city_district.CityDistrict.account_imbalance" title="pycity_scheduling.classes.city_district.CityDistrict.account_imbalance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">account_imbalance</span></code></a>()</p></td>
<td><p>Changes the current schedule to account imbalances.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.city_district.CityDistrict.get_lower_entities" title="pycity_scheduling.classes.city_district.CityDistrict.get_lower_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_lower_entities</span></code></a>()</p></td>
<td><p>Yield all lower-level entities.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.city_district.CityDistrict.get_objective" title="pycity_scheduling.classes.city_district.CityDistrict.get_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_objective</span></code></a>([coeff])</p></td>
<td><p>Objective function for entity level scheduling.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.city_district.CityDistrict.populate_model" title="pycity_scheduling.classes.city_district.CityDistrict.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add city district block to pyomo ConcreteModel.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.city_district.CityDistrict.account_imbalance">
<code class="sig-name descname">account_imbalance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.city_district.CityDistrict.account_imbalance" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the current schedule to account imbalances.</p>
<p>The imbalances are determined from the current schedules of the contained
entities.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.city_district.CityDistrict.get_lower_entities">
<code class="sig-name descname">get_lower_entities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.city_district.CityDistrict.get_lower_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all lower-level entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>All contained entities.</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.city_district.CityDistrict.get_objective">
<code class="sig-name descname">get_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coeff</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.city_district.CityDistrict.get_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function for entity level scheduling.</p>
<p>Return the objective function of the entity weighted with
coeff.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coeff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Coefficient for the objective function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Objective function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ExpressionBase</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.city_district.CityDistrict.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.city_district.CityDistrict.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add city district block to pyomo ConcreteModel.</p>
<p>Call parent’s <cite>populate_model</cite> methods and set variables lower
bounds to <cite>None</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use same constraints as convex mode</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.combined_heat_power">
<span id="pycity-scheduling-classes-combined-heat-power-module"></span><h2>pycity_scheduling.classes.combined_heat_power module<a class="headerlink" href="#module-pycity_scheduling.classes.combined_heat_power" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.combined_heat_power.CombinedHeatPower">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.combined_heat_power.</code><code class="sig-name descname">CombinedHeatPower</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">p_th_nom</span></em>, <em class="sig-param"><span class="n">p_el_nom</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">eta</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">lower_activation_limit</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.combined_heat_power.CombinedHeatPower" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating" title="pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating</span></code></a>, <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.combined_heat_power.CHP</span></code></p>
<p>Extension of pyCity_base class CHP for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common to all other objects. Includes time and weather instances.</p></li>
<li><p><strong>p_th_nom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Nominal thermal power output in [kW].</p></li>
<li><p><strong>p_el_nom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Nominal electrical power output in [kW]. Defaults to <cite>p_th_nom</cite>.</p></li>
<li><p><strong>eta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Total efficiency of the CHP (without unit).</p></li>
<li><p><strong>lower_activation_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em><em> (</em><em>only adhered to in integer mode</em><em>)</em>) – <p>Must be in [0, 1]. Lower activation limit of the CHP as a
percentage of the rated power. When the CHP is in operation, its power
must be zero or between the lower activation limit and its rated
power.</p>
<ul>
<li><p><cite>lower_activation_limit = 0</cite>: Linear behavior</p></li>
<li><p><cite>lower_activation_limit = 1</cite>: Two-point controlled</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>CHPs offer sets of constraints for operation. In the <cite>convex</cite> mode the
following constraints and bounds are generated by the CHP:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}0 &amp;\geq&amp; p_{th\_heat} \geq -p_{th\_nom} \\
0 &amp;\geq&amp; p_{el} \geq -p_{el\_nom} \\
\frac{p_{el}}{p_{el\_nom}} &amp;=&amp; \frac{p_{th\_heat}}{p_{th\_nom}}\end{split}\]</div>
<ul class="simple">
<li><dl class="simple">
<dt>See also:</dt><dd><ul>
<li><p>pycity_scheduling.util.generic_constraints.LowerActivationLimit:
Generates additional constraints for the <cite>lower_activation_limit</cite> in <cite>integer</cite> mode.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.combined_heat_power.CombinedHeatPower.populate_model" title="pycity_scheduling.classes.combined_heat_power.CombinedHeatPower.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.combined_heat_power.CombinedHeatPower.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.combined_heat_power.CombinedHeatPower.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel.</p>
<p>Call both parents’ <cite>populate_model</cite> methods and set the upper bounds
of the thermal variables to <cite>self.p_th_nom</cite>, the lower bounds of the
electrical variables to <cite>-self.p_el_nom</cite> and the upper bounds to zero.
Also add constraints to bind electrical demand to thermal output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.curtailable_load">
<span id="pycity-scheduling-classes-curtailable-load-module"></span><h2>pycity_scheduling.classes.curtailable_load module<a class="headerlink" href="#module-pycity_scheduling.classes.curtailable_load" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.curtailable_load.CurtailableLoad">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.curtailable_load.</code><code class="sig-name descname">CurtailableLoad</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">p_el_nom</span></em>, <em class="sig-param"><span class="n">max_curtailment</span></em>, <em class="sig-param"><span class="n">max_low</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">min_full</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.curtailable_load.CurtailableLoad" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.demand.electrical_demand.ElectricalDemand</span></code></p>
<p>Extension of pyCity_base class ElectricalDemand for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>p_el_nom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Nominal electric power in [kW].</p></li>
<li><p><strong>max_curtailment</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Maximal Curtailment of the load</p></li>
<li><p><strong>max_low</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Maximum number of timesteps the curtailable load can stay under
nominal load</p></li>
<li><p><strong>min_full</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Minimum number of timesteps the curtailable load has to stay at
nominal operation level when switching to the nominal operation
level</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>CLs offer sets of constraints for operation. In the <cite>convex</cite> mode the following
constraints and bounds are generated by the CL:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{el\_nom} * max\_curtailment \geq p_{el} \geq 0 \\
\sum_{j=i}^{i+max\_low+min\_full} p_{el\_j} \geq p_{el\_nom} *
(min\_full + max\_low * max\_curtailment)\end{split}\]</div>
<ul class="simple">
<li><p>The last constraint is replaced in integer mode with the following constraints:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{el} \geq p_{state} * p_{el\_nom} \\
\sum_{j=i}^{i+max\_low} p_{state\_j} \geq 1 \\
\sum_{j=i}^{i+min\_full-1} p_{state\_j} \geq
(p_{state\_i} - p_{state\_i-1}) * min\_full\end{split}\]</div>
<ul class="simple">
<li><p>These constraints take also the previous values before the current optimization
horizon into account using the current schedule. Values before <span class="math notranslate nohighlight">\(t=0\)</span> are
assumed to be perfect.</p></li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.curtailable_load.CurtailableLoad.populate_model" title="pycity_scheduling.classes.curtailable_load.CurtailableLoad.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.curtailable_load.CurtailableLoad.update_model" title="pycity_scheduling.classes.curtailable_load.CurtailableLoad.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.curtailable_load.CurtailableLoad.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.curtailable_load.CurtailableLoad.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel</p>
<p>Call parent’s <cite>populate_model</cite> method and set variables upper bounds to
the loadcurve and lower bounds to <cite>self.p_el_Min</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Uses integer variables for max_low and min_full constraints if necessary</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.curtailable_load.CurtailableLoad.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.curtailable_load.CurtailableLoad.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.deferrable_load">
<span id="pycity-scheduling-classes-deferrable-load-module"></span><h2>pycity_scheduling.classes.deferrable_load module<a class="headerlink" href="#module-pycity_scheduling.classes.deferrable_load" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.deferrable_load.DeferrableLoad">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.deferrable_load.</code><code class="sig-name descname">DeferrableLoad</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">p_el_nom</span></em>, <em class="sig-param"><span class="n">e_consumption</span></em>, <em class="sig-param"><span class="n">load_time</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">lt_pattern</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.deferrable_load.DeferrableLoad" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.demand.electrical_demand.ElectricalDemand</span></code></p>
<p>Extension of pyCity_base class ElectricalDemand for scheduling purposes.</p>
<p>The Load will always run once in the op_horizon</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>p_el_nom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Nominal electric power in [kW].</p></li>
<li><p><strong>e_consumption</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Power to be consumed over the op_horizon in [kWh].</p></li>
<li><p><strong>load_time</strong> (<em>array of binaries</em><em>, </em><em>optional</em>) – Indicator when deferrable load can be turned on. Defaults to always.
<cite>load_time[t] == 0</cite>: device is off in t
<cite>load_time[t] == 1</cite>: device can be turned on in t
It must contain at least one <cite>0</cite> otherwise the model will become
infeasible. Its length has to be consistent with <cite>lt_pattern</cite>.</p></li>
<li><p><strong>lt_pattern</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Define how the <cite>load_time</cite> profile is to be used</p>
<ul>
<li><p><cite>None</cite> : Profile matches simulation horizon.</p></li>
<li><p>’daily’ : Profile matches one day.</p></li>
<li><p>’weekly’ : Profile matches one week.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError :</strong> – If <cite>lt_pattern</cite> does not match <cite>load_time</cite>.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>DLs offer sets of constraints for operation. In the <cite>convex</cite> mode the following
constraints and bounds are generated by the DL:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{el\_nom} \geq p_{el\_i} \geq 0, &amp; \quad \text{if} \quad lt\_pattern_i = 1  \\
p_{el\_i} = 0, &amp; \quad \text{else}\end{split}\]</div>
<div class="math notranslate nohighlight">
\[\sum_i p_{el\_i} * \Delta t = e_{consumption}\]</div>
<ul class="simple">
<li><p>The constraints are replaced in integer mode with the following constraints:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}\sum_i p_{state\_i} &amp;=&amp; 1 \\
runtime &amp;=&amp; \lfloor \frac{p_{el\_nom} * \Delta t}{e_{consumption}} \rceil \\
p_{el\_i} &amp;=&amp; p_{el\_nom} * \sum_{j=i-runtime+1}^{i} p_{state\_j} \\
p_{state\_i} &amp;=&amp; 0, \quad \text{if} \quad \sum_{j=i}^{i+runtime-1}
lt\_pattern_j = runtime \\\end{split}\]</div>
<ul class="simple">
<li><p>These constraints do not take the previous values before the current optimization
horizon into account. In the optimization horizon <span class="math notranslate nohighlight">\(e_{consumption}\)</span> always
has to be consumed.</p></li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.deferrable_load.DeferrableLoad.get_objective" title="pycity_scheduling.classes.deferrable_load.DeferrableLoad.get_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_objective</span></code></a>([coeff])</p></td>
<td><p>Objective function for entity level scheduling.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.deferrable_load.DeferrableLoad.populate_model" title="pycity_scheduling.classes.deferrable_load.DeferrableLoad.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.deferrable_load.DeferrableLoad.update_model" title="pycity_scheduling.classes.deferrable_load.DeferrableLoad.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.deferrable_load.DeferrableLoad.get_objective">
<code class="sig-name descname">get_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coeff</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.deferrable_load.DeferrableLoad.get_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function for entity level scheduling.</p>
<p>Return the objective function of the deferrable load weighted with
coeff. Quadratic term minimizing the deviation from the optimal
loadcurve.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coeff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Coefficient for the objective function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Objective function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ExpressionBase</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.deferrable_load.DeferrableLoad.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.deferrable_load.DeferrableLoad.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel</p>
<p>Call parent’s <cite>populate_model</cite> method and set the upper bounds to the
nominal power or zero depending on <cite>self.load_time</cite>. Also set a constraint
for the minimum load. If mode == <cite>integer</cite> add binary variables to model
load as one block that can be shifted in time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><dl class="simple">
<dt><cite>integer</cite><span class="classifier">Uses integer variables to restrict the DL to operate</span></dt><dd><p>at nominal load or no load and restricts the DL to consume
E_Min_Consumption when DL is started without returning to a no
load state</p>
</dd>
</dl>
</li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.deferrable_load.DeferrableLoad.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.deferrable_load.DeferrableLoad.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.electrical_entity">
<span id="pycity-scheduling-classes-electrical-entity-module"></span><h2>pycity_scheduling.classes.electrical_entity module<a class="headerlink" href="#module-pycity_scheduling.classes.electrical_entity" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.electrical_entity.ElectricalEntity">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.electrical_entity.</code><code class="sig-name descname">ElectricalEntity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.optimization_entity.OptimizationEntity</span></code></a></p>
<p>Base class for all electrical entities derived from OptimizationEntity.</p>
<p>This class provides functionality common to all electrical entities.
It adds variables for the electrical demand / supply of the entity to the
block.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use same constraints as convex mode</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>EEs add the <span class="math notranslate nohighlight">\(p_{el}\)</span> variable to the model. When not modified
by other classes, the following constraint is added:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[p_{el} \geq 0\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity.get_objective" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity.get_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_objective</span></code></a>([coeff])</p></td>
<td><p>Objective function for entity level scheduling.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity.populate_model" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add entity block to pyomo ConcreteModel.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.electrical_entity.ElectricalEntity.get_objective">
<code class="sig-name descname">get_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coeff</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity.get_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function for entity level scheduling.</p>
<p>Return the objective function of the entity weighted with
coeff.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coeff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Coefficient for the objective function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Objective function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ExpressionBase</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.electrical_entity.ElectricalEntity.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add entity block to pyomo ConcreteModel.</p>
<p>Places the block with the name of the entity in the ConcreteModel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : May use integer variables</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.electrical_heater">
<span id="pycity-scheduling-classes-electrical-heater-module"></span><h2>pycity_scheduling.classes.electrical_heater module<a class="headerlink" href="#module-pycity_scheduling.classes.electrical_heater" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.electrical_heater.ElectricalHeater">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.electrical_heater.</code><code class="sig-name descname">ElectricalHeater</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">p_th_nom</span></em>, <em class="sig-param"><span class="n">eta</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">lower_activation_limit</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.electrical_heater.ElectricalHeater" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating" title="pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating</span></code></a>, <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.electrical_heater.ElectricalHeater</span></code></p>
<p>Extension of pyCity_base class ElectricalHeater for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.Environment" title="pycity_scheduling.classes.Environment"><em>pycity_scheduling.classes.Environment</em></a>) – Common to all other objects. Includes time and weather instances.</p></li>
<li><p><strong>p_th_nom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Nominal thermal power output in [kW].</p></li>
<li><p><strong>eta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Efficiency of the electrical heater. Defaults to one.</p></li>
<li><p><strong>lower_activation_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em><em> (</em><em>only adhered to in integer mode</em><em>)</em>) – <p>Must be in [0, 1]. Lower activation limit of the electrical heater
as a percentage of the rated power. When the electrical heater is
in operation, its power must be zero or between the lower activation
limit and its rated power.</p>
<ul>
<li><p><cite>lower_activation_limit = 0</cite>: Linear behavior</p></li>
<li><p><cite>lower_activation_limit = 1</cite>: Two-point controlled</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>EHs offer sets of constraints for operation. In the <cite>convex</cite> mode the
following constraints and bounds are generated by the EH:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}0 \geq p_{th\_heat} &amp;\geq&amp; -p_{th\_nom} \\
\eta * p_{el} &amp;=&amp; - p_{th\_heat}\end{split}\]</div>
<ul class="simple">
<li><dl class="simple">
<dt>See also:</dt><dd><ul>
<li><p>pycity_scheduling.util.generic_constraints.LowerActivationLimit: Generates additional constraints for the
<cite>lower_activation_limit</cite> in <cite>integer</cite> mode.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.electrical_heater.ElectricalHeater.populate_model" title="pycity_scheduling.classes.electrical_heater.ElectricalHeater.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.electrical_heater.ElectricalHeater.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.electrical_heater.ElectricalHeater.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel.</p>
<p>Call parent’s <cite>populate_model</cite> method and set thermal variables upper
bounds to <cite>self.p_th_nom</cite>. Also add constraint to bind electrical
demand to thermal output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.electrical_vehicle">
<span id="pycity-scheduling-classes-electrical-vehicle-module"></span><h2>pycity_scheduling.classes.electrical_vehicle module<a class="headerlink" href="#module-pycity_scheduling.classes.electrical_vehicle" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.electrical_vehicle.ElectricalVehicle">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.electrical_vehicle.</code><code class="sig-name descname">ElectricalVehicle</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">e_el_max</span></em>, <em class="sig-param"><span class="n">p_el_max_charge</span></em>, <em class="sig-param"><span class="n">p_el_max_discharge</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">soc_init</span><span class="o">=</span><span class="default_value">0.5</span></em>, <em class="sig-param"><span class="n">charging_time</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ct_pattern</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.electrical_vehicle.ElectricalVehicle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.battery.Battery" title="pycity_scheduling.classes.battery.Battery"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.battery.Battery</span></code></a></p>
<p>Class representing an electrical vehicle for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>e_el_max</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Electric capacity of the battery in [kWh].</p></li>
<li><p><strong>p_el_max_charge</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Maximum charging power in [kW].</p></li>
<li><p><strong>p_el_max_discharge</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Maximum discharging power in [kW]. Defaults to zero.</p></li>
<li><p><strong>soc_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Initial state of charge. Defaults to 50%.</p></li>
<li><p><strong>charging_time</strong> (<em>array of binaries</em><em>, </em><em>optional</em>) – <p>Indicator when electrical vehicle can be charged.</p>
<ul>
<li><p><cite>charging_time[t] == 0</cite>: EV cannot be charged in t</p></li>
<li><p><cite>charging_time[t] == 1</cite>: EV can be charged in t</p></li>
</ul>
<p>It must contain at least one <cite>0</cite> otherwise the model will become
infeasible. Its length has to be consistent with <cite>ct_pattern</cite>.
Defaults to only charge during night.</p>
</p></li>
<li><p><strong>ct_pattern</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Define how the <cite>charging_time</cite> profile is to be used.</p>
<ul>
<li><p><cite>None</cite> : Profile matches simulation horizon (default).</p></li>
<li><p>’daily’ : Profile matches one day.</p></li>
<li><p>’weekly’ : Profile matches one week.</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>EVs offer sets of constraints for operation. The <span class="math notranslate nohighlight">\(e_{el}\)</span> equivalence
constraint is replaced by the following constraint:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}e_{el} &amp;=&amp; e_{el\_previous} + (\eta * p_{el\_demand}
- (1 / \eta) * p_{el\_supply} - p_{el\_drive}) * \Delta t \\\end{split}\]</div>
<ul class="simple">
<li><p>The following constraints are added:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{el\_drive} \geq 0 \\
p_{el\_demand\_i} = p_{el\_supply} = 0,
&amp; \quad \text{if} \quad ct\_pattern_i = 0 \\
p_{el\_drive\_i} = 0, &amp; \quad \text{if} \quad ct\_pattern_i = 1 \\
e_{el\_i} = soc\_init * e_{el\_max}, &amp; \quad \text{if} \quad \sum_{j=0}^i ct\_pattern_j = 0 \\
e_{el\_i} = 0.2 * e_{el\_max}, &amp; \quad \text{else if} \quad ct\_pattern_i = 0 \\
e_{el\_i} = e_{el\_max}, &amp; \quad \text{else if} \quad ct\_pattern_i+1 = 0\end{split}\]</div>
<ul class="simple">
<li><p>The constraint for the parameter <cite>storage_end_equality</cite> is removed. Instead,
the EV needs to be fully charged at the end of the <cite>simu_horizon</cite> if parameter <cite>ct_pattern</cite>
is one at the end of the simulation horizon.</p></li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.electrical_vehicle.ElectricalVehicle.get_objective" title="pycity_scheduling.classes.electrical_vehicle.ElectricalVehicle.get_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_objective</span></code></a>([coeff])</p></td>
<td><p>Objective function for entity level scheduling.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.electrical_vehicle.ElectricalVehicle.populate_model" title="pycity_scheduling.classes.electrical_vehicle.ElectricalVehicle.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.electrical_vehicle.ElectricalVehicle.update_model" title="pycity_scheduling.classes.electrical_vehicle.ElectricalVehicle.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.electrical_vehicle.ElectricalVehicle.get_objective">
<code class="sig-name descname">get_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coeff</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.electrical_vehicle.ElectricalVehicle.get_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function for entity level scheduling.</p>
<p>Return the objective function of the electric vehicle weighted with
coeff. Quadratic term with additional weights to reward charging the
vehicle earlier.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coeff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Coefficient for the objective function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Objective function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ExpressionBase</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.electrical_vehicle.ElectricalVehicle.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.electrical_vehicle.ElectricalVehicle.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel</p>
<p>Call parent’s <cite>populate_model</cite> method. Replace coupling
constraints from Battery class with coupling constraints
of EV. Simulate power consumption while driving.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.electrical_vehicle.ElectricalVehicle.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.electrical_vehicle.ElectricalVehicle.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.entity_container">
<span id="pycity-scheduling-classes-entity-container-module"></span><h2>pycity_scheduling.classes.entity_container module<a class="headerlink" href="#module-pycity_scheduling.classes.entity_container" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.entity_container.EntityContainer">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.entity_container.</code><code class="sig-name descname">EntityContainer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.entity_container.EntityContainer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling" title="pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling</span></code></a>, <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating" title="pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating</span></code></a>, <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a></p>
<p>Base class for entities containing other entities.</p>
<p><cite>p_th</cite> and <cite>p_el</cite> imbalances are propagated to this entities variables.
During calls to its scheduling functions, the contained entities are also
called with the same parameters.</p>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>EntityContainers offer sets of constraints for operation. The following
constraints are added.</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{th\_cool} &amp;=&amp; \sum_i p_{th\_cool\_i} \\
p_{th\_heat} &amp;=&amp; \sum_i p_{th\_heat\_i} \\
p_{el} &amp;=&amp; \sum_i p_{el\_i}\end{split}\]</div>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(p_{th\_cool\_i}\)</span>, <span class="math notranslate nohighlight">\(p_{th\_heat\_i}\)</span>, and <span class="math notranslate nohighlight">\(p_{el\_i}\)</span> are the variables from lower
entities. The Bounds from TEC, TEH, and EE are removed.</p></li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.entity_container.EntityContainer.get_lower_entities" title="pycity_scheduling.classes.entity_container.EntityContainer.get_lower_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_lower_entities</span></code></a>()</p></td>
<td><p>Yield all lower-level entities.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.entity_container.EntityContainer.populate_model" title="pycity_scheduling.classes.entity_container.EntityContainer.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add entity block and lower entities blocks to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.entity_container.EntityContainer.reset" title="pycity_scheduling.classes.entity_container.EntityContainer.reset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset</span></code></a>([schedule])</p></td>
<td><p>Reset all values of specified schedule.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.entity_container.EntityContainer.update_model" title="pycity_scheduling.classes.entity_container.EntityContainer.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.entity_container.EntityContainer.update_schedule" title="pycity_scheduling.classes.entity_container.EntityContainer.update_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_schedule</span></code></a>()</p></td>
<td><p>Update the schedule with the scheduling model solution.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.entity_container.EntityContainer.get_lower_entities">
<code class="sig-name descname">get_lower_entities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.entity_container.EntityContainer.get_lower_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all lower-level entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>All contained entities.</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.entity_container.EntityContainer.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.entity_container.EntityContainer.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add entity block and lower entities blocks to pyomo ConcreteModel.</p>
<p>Call both parent’s <cite>populate_model</cite> methods and set variables lower
bounds to <cite>None</cite>. Then call <cite>populate_model</cite> method of all contained
entities and add constraints that the sum of their variables for each
period equals the corresponding own variable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use same constraints as convex mode</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.entity_container.EntityContainer.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.entity_container.EntityContainer.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all values of specified schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specify which schedule to reset.</p>
<ul class="simple">
<li><p><cite>None</cite> : Resets all schedules</p></li>
<li><p>’default’ : Resets normal schedule</p></li>
<li><p>’ref’ : Resets reference schedule</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.entity_container.EntityContainer.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.entity_container.EntityContainer.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.entity_container.EntityContainer.update_schedule">
<code class="sig-name descname">update_schedule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.entity_container.EntityContainer.update_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the schedule with the scheduling model solution.</p>
<p>Retrieve the solution from the scheduling model and write it to the
schedule. The model must be optimal. The time / position of the
solution in the schedule is determined by <cite>self.timer.current_timestep</cite>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.environment">
<span id="pycity-scheduling-classes-environment-module"></span><h2>pycity_scheduling.classes.environment module<a class="headerlink" href="#module-pycity_scheduling.classes.environment" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.environment.Environment">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.environment.</code><code class="sig-name descname">Environment</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timer</span></em>, <em class="sig-param"><span class="n">weather</span></em>, <em class="sig-param"><span class="n">prices</span></em>, <em class="sig-param"><span class="n">location</span><span class="o">=</span><span class="default_value">(50.76, 6.07)</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.environment.Environment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.environment.Environment</span></code></p>
<p>Extension of pyCity_base class Environment for scheduling purposes.</p>
</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.fixed_load">
<span id="pycity-scheduling-classes-fixed-load-module"></span><h2>pycity_scheduling.classes.fixed_load module<a class="headerlink" href="#module-pycity_scheduling.classes.fixed_load" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.fixed_load.FixedLoad">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.fixed_load.</code><code class="sig-name descname">FixedLoad</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">demand</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">annual_demand</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">profile_type</span><span class="o">=</span><span class="default_value">'H0'</span></em>, <em class="sig-param"><span class="n">single_family_house</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">total_nb_occupants</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">randomize_appliances</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">light_configuration</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">occupancy</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">do_normalization</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">method_3_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">method_4_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">prev_heat_dev</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">app_filename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">light_filename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">season_light_mod</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">light_mod_fac</span><span class="o">=</span><span class="default_value">0.25</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.fixed_load.FixedLoad" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.demand.electrical_demand.ElectricalDemand</span></code></p>
<p>Extension of pyCity_base class ElectricalDemand for scheduling purposes.</p>
<p>As for all uncontrollable loads, the <cite>p_el_schedule</cite> contains the forecast
of the load.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – <p>Defaults to method zero.</p>
<ul>
<li><p>0 : provide load curve directly</p></li>
<li><p>1 : standard load profile (for households)</p></li>
<li><p>2 : stochastic electrical load model</p></li>
<li><p>3 : annual profile based on measured weekly profiles (non-residential)</p></li>
<li><p>4 : annual profile based on measured annual profiles (non-residential)</p></li>
</ul>
</p></li>
<li><p><strong>demand</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.19)"><em>numpy.ndarray</em></a><em>, </em><em>optional</em>) – Demand for all investigated time steps in [kW] when using <cite>method=0</cite>.</p></li>
<li><p><strong>annual_demand</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Required for SLP and recommended for method 2.
Defines the annual electrical demand in [kWh].
If method 2 is chosen but no value is given, a standard value for
Germany (<a class="reference external" href="https://lena.sachsen-anhalt.de/fileadmin/Bibliothek/Sonstige_Webprojekte/Lena/Pressemitteilungen/">https://lena.sachsen-anhalt.de/fileadmin/Bibliothek/Sonstige_Webprojekte/Lena/Pressemitteilungen/</a>
Stromspiegel/Stromspiegel2014_Medienblatt.pdf, accessed on 2020/09/28) is used.</p></li>
<li><p><strong>profile_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <ul>
<li><p>H0 : Household</p></li>
<li><p>L0 : Farms</p></li>
<li><p>L1 : Farms with breeding / cattle</p></li>
<li><p>L2 : Farms without cattle</p></li>
<li><p>G0 : Business (general)</p></li>
<li><p>G1 : Business (workingdays 8:00 AM - 6:00 PM)</p></li>
<li><p>G2 : Business with high loads in the evening</p></li>
<li><p>G3 : Business (24 hours)</p></li>
<li><p>G4 : Shops / Barbers</p></li>
<li><p>G5 : Bakery</p></li>
<li><p>G6 : Weekend operation</p></li>
</ul>
</p></li>
<li><p><strong>total_nb_occupants</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Number of people living in the household for <cite>method=2</cite>.</p></li>
<li><p><strong>randomize_appliances</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – <p>Randomization of appliances for <cite>method=2</cite>. Defaults to <cite>True</cite>.</p>
<ul>
<li><p>True : distribute installed appliances randomly</p></li>
<li><p>False : use the standard distribution</p></li>
</ul>
</p></li>
<li><p><strong>light_configuration</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – There are 100 light bulb configurations predefined for the
stochastic model when using <cite>method=2</cite>. Defaults to zero.
A value between 0 and 100 should be provided.</p></li>
<li><p><strong>occupancy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Occupancy given at 10-minute intervals for a full year for <cite>method=2</cite>.</p></li>
<li><p><strong>do_normalization</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Defines, if stochastic profile (<cite>method=2</cite>) should be
normalized to given annual_demand value. Defaults to <cite>False</cite>.
If set to <cite>False</cite>, annual el. demand depends on stochastic el. load
profile generation. If set to <cite>True</cite>, does normalization with
annual_demand.</p></li>
<li><p><strong>method_3_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Defines type of profile for method=3. Defaults to <cite>None</cite>.
Options:</p>
<ul>
<li><p>’food_pro’: Food production</p></li>
<li><p>’metal’: Metal company</p></li>
<li><p>’rest’: Restaurant (with large cooling load)</p></li>
<li><p>’sports’: Sports hall</p></li>
<li><p>’repair’: Repair / metal shop</p></li>
</ul>
</p></li>
<li><p><strong>method_4_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Defines type of profile for method=4. Defaults to <cite>None</cite>.</p>
<ul>
<li><p>’metal_1’ : Metal company with smooth profile</p></li>
<li><p>’metal_2’ : Metal company with fluctuation in profile</p></li>
<li><p>’warehouse’ : Warehouse</p></li>
</ul>
</p></li>
<li><p><strong>prev_heat_dev</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Defines, if heating devices should be prevented within chosen
appliances for <cite>method=2</cite>. Defaults to <cite>False</cite>.
If set to True, DESWH, E-INST, Electric shower, Storage heaters
and Other electric space heating are set to zero.</p></li>
<li><p><strong>app_filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – Path to Appliances file for <cite>method=2</cite>. Defaults to <cite>None</cite>.
If set to None, uses default file Appliances.csv in
/inputs/stochastic_electrical_load/.</p></li>
<li><p><strong>light_filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – Path to Lighting configuration file for <cite>method=2</cite>. Defaults to <cite>None</cite>.
If set to None, uses default file Appliances.csv in
/inputs/stochastic_electrical_load/.</p></li>
<li><p><strong>season_light_mod</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Defines, if cosine-wave should be used to strengthen seasonal
influence on lighting. Defaults to <cite>False</cite>.
If True, enlarges lighting power demand in winter month and reduces
lighting power demand in summer month.</p></li>
<li><p><strong>light_mod_fac</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Define factor, related to maximal lighting power, which is used
to implement seasonal influence. Defaults to 25%.
Only relevant, if <cite>season_light_mod</cite> == True</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>Standard load profiles, for instance for Germany, can be found here:
<a class="reference external" href="https://www.bdew.de/energie/standardlastprofile-strom/">https://www.bdew.de/energie/standardlastprofile-strom/</a> (accessed on 2020/09/28)</p></li>
<li><p>Average German electricity consumption data per household can be found here:
<a class="reference external" href="https://lena.sachsen-anhalt.de/fileadmin/Bibliothek/Sonstige_Webprojekte/Lena/Pressemitteilungen/">https://lena.sachsen-anhalt.de/fileadmin/Bibliothek/Sonstige_Webprojekte/Lena/Pressemitteilungen/</a>
Stromspiegel/Stromspiegel2014_Medienblatt.pdf (accessed on 2020/09/28)</p></li>
<li><p>The following constraint is added for removing the bounds from EE:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[p_{el} = load\_curve\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.fixed_load.FixedLoad.new_schedule" title="pycity_scheduling.classes.fixed_load.FixedLoad.new_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">new_schedule</span></code></a>(schedule)</p></td>
<td><p>Create a new schedule with default values.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.fixed_load.FixedLoad.reset" title="pycity_scheduling.classes.fixed_load.FixedLoad.reset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset</span></code></a>([schedule])</p></td>
<td><p>Reset all values of specified schedule.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.fixed_load.FixedLoad.update_model" title="pycity_scheduling.classes.fixed_load.FixedLoad.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.fixed_load.FixedLoad.update_schedule" title="pycity_scheduling.classes.fixed_load.FixedLoad.update_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_schedule</span></code></a>()</p></td>
<td><p>Update the schedule with the scheduling model solution.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.fixed_load.FixedLoad.new_schedule">
<code class="sig-name descname">new_schedule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.fixed_load.FixedLoad.new_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new schedule with default values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of new schedule.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.fixed_load.FixedLoad.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.fixed_load.FixedLoad.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all values of specified schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specify which schedule to reset.</p>
<ul class="simple">
<li><p><cite>None</cite> : Resets all schedules</p></li>
<li><p>’default’ : Resets normal schedule</p></li>
<li><p>’ref’ : Resets reference schedule</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.fixed_load.FixedLoad.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.fixed_load.FixedLoad.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.fixed_load.FixedLoad.update_schedule">
<code class="sig-name descname">update_schedule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.fixed_load.FixedLoad.update_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the schedule with the scheduling model solution.</p>
<p>Retrieve the solution from the scheduling model and write it to the
schedule. The model must be optimal. The time / position of the
solution in the schedule is determined by <cite>self.timer.current_timestep</cite>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.heat_pump">
<span id="pycity-scheduling-classes-heat-pump-module"></span><h2>pycity_scheduling.classes.heat_pump module<a class="headerlink" href="#module-pycity_scheduling.classes.heat_pump" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.heat_pump.HeatPump">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.heat_pump.</code><code class="sig-name descname">HeatPump</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">p_th_nom</span></em>, <em class="sig-param"><span class="n">cop</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">eta</span><span class="o">=</span><span class="default_value">0.36</span></em>, <em class="sig-param"><span class="n">t_max</span><span class="o">=</span><span class="default_value">55.0</span></em>, <em class="sig-param"><span class="n">lower_activation_limit</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">t_flow</span><span class="o">=</span><span class="default_value">55.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.heat_pump.HeatPump" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating" title="pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating</span></code></a>, <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.heat_pump.Heatpump</span></code></p>
<p>Extension of pyCity_base class Heatpump for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common to all other objects. Includes time and weather instances.</p></li>
<li><p><strong>p_th_nom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Nominal thermal power of the heat pump in [kW].</p></li>
<li><p><strong>cop</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.19)"><em>numpy.ndarray</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The heat pump’s coefficient of performance (without unit)
If array, it must provide the coefficient of performance (cop) for
each time step in the simulation horizon.
If int or float, a constant cop over the whole horizon is assumed.
If omitted, an air-water heat pump is assumed and the cop is
calculated with the ambient air temperature.</p></li>
<li><p><strong>eta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The Carnot efficiency of the heat pump.
If cop is omitted, eta is used to calculate the cop based on T_sink and T_source
according to: cop = eta * T_sink * (T_sink - T_source) with T_sink and T_source in Kelvin</p></li>
<li><p><strong>t_max</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The heat pump’s maximum provided temperature in °C</p></li>
<li><p><strong>lower_activation_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em><em> (</em><em>only adhered to in integer mode</em><em>)</em>) – <p>Must be in [0, 1]. Lower activation limit of the heat pump as a
percentage of the rated power. When the heat pump is in operation, its
power must be zero or between the lower activation limit and its
rated power.</p>
<ul>
<li><p><cite>lower_activation_limit = 0</cite>: Linear behavior</p></li>
<li><p><cite>lower_activation_limit = 1</cite>: Two-point controlled</p></li>
</ul>
</p></li>
<li><p><strong>t_flow</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – T_sink temperature delivered by HP in °C.
Is used for cop calculation if cop is omitted.
Note that t_flow &lt;= t_max must hold.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>HPs offer sets of constraints for operation. In the <cite>convex</cite> mode the
following constraints and bounds are generated by the HP:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}0 \geq p_{th\_heat} &amp;\geq&amp; -p_{th\_nom} \\
cop * p_{el} &amp;=&amp; - p_{th\_heat}\end{split}\]</div>
<ul class="simple">
<li><dl class="simple">
<dt>See also:</dt><dd><ul>
<li><p>pycity_scheduling.util.generic_constraints.LowerActivationLimit:
Generates additional constraints for the <cite>lower_activation_limit</cite> in <cite>integer</cite> mode.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.heat_pump.HeatPump.populate_model" title="pycity_scheduling.classes.heat_pump.HeatPump.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.heat_pump.HeatPump.update_model" title="pycity_scheduling.classes.heat_pump.HeatPump.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.heat_pump.HeatPump.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.heat_pump.HeatPump.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel.</p>
<p>Call parent’s <cite>populate_model</cite> method and set thermal variables lower
bounds to <cite>-self.p_th_nom</cite> and the upper bounds to zero. Also add
constraint to bind electrical demand to thermal output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.heat_pump.HeatPump.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.heat_pump.HeatPump.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.optimization_entity">
<span id="pycity-scheduling-classes-optimization-entity-module"></span><h2>pycity_scheduling.classes.optimization_entity module<a class="headerlink" href="#module-pycity_scheduling.classes.optimization_entity" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.optimization_entity.</code><code class="sig-name descname">OptimizationEntity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class for all optimization entities.</p>
<p>This class provides functionality common to all entities which take part
in the scheduling optimization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p>
</dd>
<dt class="field-even">Attributes</dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.op_horizon" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.op_horizon"><code class="xref py py-obj docutils literal notranslate"><span class="pre">op_horizon</span></code></a></dt><dd><p>Number of time steps in a scheduling period.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.op_slice" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.op_slice"><code class="xref py py-obj docutils literal notranslate"><span class="pre">op_slice</span></code></a></dt><dd><p>Slice to select values of current scheduling from whole horizon.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.op_time_vec" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.op_time_vec"><code class="xref py py-obj docutils literal notranslate"><span class="pre">op_time_vec</span></code></a></dt><dd><p>Iterator over scheduling period.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.schedule" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">schedule</span></code></a></dt><dd><p>The current loaded schedule.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.simu_horizon" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.simu_horizon"><code class="xref py py-obj docutils literal notranslate"><span class="pre">simu_horizon</span></code></a></dt><dd><p>Number of time steps in the whole simulation horizon.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.time_slot" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.time_slot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">time_slot</span></code></a></dt><dd><p>Length of a time step as a portion of an hour.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.timestep" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.timestep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">timestep</span></code></a></dt><dd><p>Time step indicating the current scheduling.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.copy_schedule" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.copy_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy_schedule</span></code></a>([dst, src, name])</p></td>
<td><p>Copy values of one schedule in another schedule.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.get_all_entities" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.get_all_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_all_entities</span></code></a>()</p></td>
<td><p>Yield all entities.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.get_entities" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.get_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_entities</span></code></a>()</p></td>
<td><p>Yield all lowest contained entities.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.get_lower_entities" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.get_lower_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_lower_entities</span></code></a>()</p></td>
<td><p>Yield all lower-level entities.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.get_objective" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.get_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_objective</span></code></a>([coeff])</p></td>
<td><p>Objective function for entity level scheduling.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.load_schedule" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.load_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_schedule</span></code></a>(schedule)</p></td>
<td><p>Copy values of one schedule in another schedule.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.load_schedule_into_model" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.load_schedule_into_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_schedule_into_model</span></code></a>([schedule])</p></td>
<td><p>Overwrites the values in the entity model with the values in the schedule.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.new_schedule" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.new_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">new_schedule</span></code></a>(schedule)</p></td>
<td><p>Create a new schedule with default values.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.new_var" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.new_var"><code class="xref py py-obj docutils literal notranslate"><span class="pre">new_var</span></code></a>(name[, dtype, func])</p></td>
<td><p>Create a new entry and empty schedule for variable with specified name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.populate_model" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add entity block to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.reset" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.reset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset</span></code></a>([schedule])</p></td>
<td><p>Reset all values of specified schedule.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.set_objective" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.set_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_objective</span></code></a>(objective)</p></td>
<td><p>Set a new objective to be returned by get_objective.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.update_model" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.update_schedule" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity.update_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_schedule</span></code></a>()</p></td>
<td><p>Update the schedule with the scheduling model solution.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.copy_schedule">
<code class="sig-name descname">copy_schedule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dst</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">src</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.copy_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy values of one schedule in another schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dst</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of schedule to insert values into.
If <cite>None</cite>, use current schedule.</p></li>
<li><p><strong>src</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of schedule to copy values from.
If <cite>None</cite>, use current schedule.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of variable to copy sub schedule of.
If <cite>None</cite>, copy all variables between schedules.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.get_all_entities">
<code class="sig-name descname">get_all_entities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.get_all_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>All contained entities and sub-entities.</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.get_entities">
<code class="sig-name descname">get_entities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.get_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all lowest contained entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p>Lowest contained entities or <cite>self</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.get_lower_entities">
<code class="sig-name descname">get_lower_entities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.get_lower_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all lower-level entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>All contained entities.</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.get_objective">
<code class="sig-name descname">get_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coeff</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.get_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function for entity level scheduling.</p>
<p>Return the objective function of the entity weighted with
coeff.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coeff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Coefficient for the objective function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Objective function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ExpressionBase</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.load_schedule">
<code class="sig-name descname">load_schedule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.load_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy values of one schedule in another schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – </p></li>
<li><p><strong>of schedule to set as current schedule.</strong> (<em>Name</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.load_schedule_into_model">
<code class="sig-name descname">load_schedule_into_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.load_schedule_into_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Overwrites the values in the entity model with the values in the schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of schedule to load values from.
If <cite>None</cite>, use current schedule.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.new_schedule">
<code class="sig-name descname">new_schedule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.new_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new schedule with default values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of new schedule.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.new_var">
<code class="sig-name descname">new_var</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">dtype=&lt;class 'numpy.float64'&gt;</em>, <em class="sig-param">func=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.new_var" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new entry and empty schedule for variable with specified name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name to access new variable with.</p></li>
<li><p><strong>dtype</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.19)"><em>numpy.dtype</em></a><em>, </em><em>optional</em>) – Data type which should be used for new schedule.</p></li>
<li><p><strong>func</strong> (<em>Callable</em><em>[</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>]</em><em>, </em><em>Any</em><em>]</em><em>, </em><em>optional</em>) – Function to generate schedule with.
If <cite>None</cite>, schedule is generated with values of variables.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.op_horizon">
<em class="property">property </em><code class="sig-name descname">op_horizon</code><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.op_horizon" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of time steps in a scheduling period.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.op_slice">
<em class="property">property </em><code class="sig-name descname">op_slice</code><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.op_slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Slice to select values of current scheduling from whole horizon.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.op_time_vec">
<em class="property">property </em><code class="sig-name descname">op_time_vec</code><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.op_time_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterator over scheduling period.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add entity block to pyomo ConcreteModel.</p>
<p>Places the block with the name of the entity in the ConcreteModel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : May use integer variables</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all values of specified schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specify which schedule to reset.</p>
<ul class="simple">
<li><p><cite>None</cite> : Resets all schedules</p></li>
<li><p>’default’ : Resets normal schedule</p></li>
<li><p>’ref’ : Resets reference schedule</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.schedule">
<em class="property">property </em><code class="sig-name descname">schedule</code><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>The current loaded schedule.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.set_objective">
<code class="sig-name descname">set_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">objective</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.set_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a new objective to be returned by get_objective.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>objective</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – <p>Objective for the scheduling.</p>
<ul class="simple">
<li><p>’none’ : No objective (leave all flexibility to other participants).</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.simu_horizon">
<em class="property">property </em><code class="sig-name descname">simu_horizon</code><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.simu_horizon" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of time steps in the whole simulation horizon.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.static_entity_id">
<code class="sig-name descname">static_entity_id</code><em class="property"> = 0</em><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.static_entity_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.time_slot">
<em class="property">property </em><code class="sig-name descname">time_slot</code><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.time_slot" title="Permalink to this definition">¶</a></dt>
<dd><p>Length of a time step as a portion of an hour.</p>
<p class="rubric">Examples</p>
<p>time step length = 60 mins =&gt; time_slot = 1
time step length = 15 mins =&gt; time_slot = 0.25</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.timestep">
<em class="property">property </em><code class="sig-name descname">timestep</code><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.timestep" title="Permalink to this definition">¶</a></dt>
<dd><p>Time step indicating the current scheduling.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.optimization_entity.OptimizationEntity.update_schedule">
<code class="sig-name descname">update_schedule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity.update_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the schedule with the scheduling model solution.</p>
<p>Retrieve the solution from the scheduling model and write it to the
schedule. The model must be optimal. The time / position of the
solution in the schedule is determined by <cite>self.timer.current_timestep</cite>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.photovoltaic">
<span id="pycity-scheduling-classes-photovoltaic-module"></span><h2>pycity_scheduling.classes.photovoltaic module<a class="headerlink" href="#module-pycity_scheduling.classes.photovoltaic" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.photovoltaic.Photovoltaic">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.photovoltaic.</code><code class="sig-name descname">Photovoltaic</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">method</span></em>, <em class="sig-param"><span class="n">area</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">peak_power</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">eta_noct</span><span class="o">=</span><span class="default_value">0.18</span></em>, <em class="sig-param"><span class="n">radiation_noct</span><span class="o">=</span><span class="default_value">1000.0</span></em>, <em class="sig-param"><span class="n">t_cell_noct</span><span class="o">=</span><span class="default_value">45.0</span></em>, <em class="sig-param"><span class="n">t_ambient_noct</span><span class="o">=</span><span class="default_value">20.0</span></em>, <em class="sig-param"><span class="n">alpha_noct</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">beta</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">gamma</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">tau_alpha</span><span class="o">=</span><span class="default_value">0.9</span></em>, <em class="sig-param"><span class="n">force_renewables</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.photovoltaic.Photovoltaic" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.photovoltaic.PV</span></code></p>
<p>Extension of pyCity_base class PV for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – <ul>
<li><p>0 : Calculate PV power based on an area in m^2 equipped with PV panels</p></li>
<li><p>1 : Calculate PV power based on the installed PV peak power in kWp</p></li>
</ul>
</p></li>
<li><p><strong>area</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – PV unit installation area in m^2 for <cite>method=0</cite>.</p></li>
<li><p><strong>peak_power</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – PV peak power installation in kWp for <cite>method=1</cite>.</p></li>
<li><p><strong>eta_noct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Electrical efficiency at NOCT conditions (without unit) for <cite>method=0</cite>.
NOCT conditions: See manufacturer’s data sheets or
Duffie, Beckman - Solar Engineering of Thermal Processes (4th ed.), page 759</p></li>
<li><p><strong>radiation_noct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Nominal solar radiation at NOCT conditions (in W/m^2)
NOCT conditions: See manufacturer’s data sheets or
Duffie, Beckman - Solar Engineering of Thermal Processes (4th ed.), page 759</p></li>
<li><p><strong>t_cell_noct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Nominal cell temperature at NOCT conditions (in degree Celsius)
NOCT conditions: See manufacturer’s data sheets or
Duffie, Beckman - Solar Engineering of Thermal Processes (4th ed.), page 759</p></li>
<li><p><strong>t_ambient_noct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Nominal ambient air temperature at NOCT conditions (in degree Celsius)
NOCT conditions: See manufacturer’s data sheets or
Duffie, Beckman - Solar Engineering of Thermal Processes (4th ed.), page 759</p></li>
<li><p><strong>alpha_noct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Temperature coefficient at NOCT conditions (without unit)
NOCT conditions: See manufacturer’s data sheets or
Duffie, Beckman - Solar Engineering of Thermal Processes (4th ed.), page 759</p></li>
<li><p><strong>beta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Slope, the angle (in degree) between the plane of the surface in
question and the horizontal. 0 &lt;= beta &lt;= 180. If beta &gt; 90, the
surface faces downwards.</p></li>
<li><p><strong>gamma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Surface azimuth angle. The deviation of the projection on a
horizontal plane of the normal to the surface from the local
meridian, with zero due south, east negative, and west positive.
-180 &lt;= gamma &lt;= 180</p></li>
<li><p><strong>tau_alpha</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Optical properties of the PV unit. Product of absorption and
transmission coeffients.
According to Duffie, Beckman - Solar Engineering of Thermal
Processes (4th ed.), page 758, this value is typically close to 0.9</p></li>
<li><p><strong>force_renewables</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – <cite>True</cite> if generation may not be reduced for optimization purposes.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The following constraint is added for removing the bounds from EE:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{el} &amp;=&amp; -p_{el\_supply}, &amp; \quad \text{if force_renewables} \\
0 \geq p_{el} &amp;\geq&amp; -p_{el\_supply} , &amp; \quad \text{else}\end{split}\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.photovoltaic.Photovoltaic.get_objective" title="pycity_scheduling.classes.photovoltaic.Photovoltaic.get_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_objective</span></code></a>([coeff])</p></td>
<td><p>Objective function of the Photovoltaic.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.photovoltaic.Photovoltaic.populate_model" title="pycity_scheduling.classes.photovoltaic.Photovoltaic.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add entity block to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.photovoltaic.Photovoltaic.update_model" title="pycity_scheduling.classes.photovoltaic.Photovoltaic.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.photovoltaic.Photovoltaic.get_objective">
<code class="sig-name descname">get_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coeff</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.photovoltaic.Photovoltaic.get_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function of the Photovoltaic.</p>
<p>Return the objective function of the photovoltaic weighted
with <cite>coeff</cite>. Depending on <cite>self.force_renewables</cite> leave objective
function empty or build quadratic objective function to minimize
discrepancy between available power and produced power.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coeff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Coefficient for the objective function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Objective function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ExpressionBase</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.photovoltaic.Photovoltaic.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.photovoltaic.Photovoltaic.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add entity block to pyomo ConcreteModel.</p>
<p>Places the block with the name of the entity in the ConcreteModel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : May use integer variables</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.photovoltaic.Photovoltaic.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.photovoltaic.Photovoltaic.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.prices">
<span id="pycity-scheduling-classes-prices-module"></span><h2>pycity_scheduling.classes.prices module<a class="headerlink" href="#module-pycity_scheduling.classes.prices" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.prices.Prices">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.prices.</code><code class="sig-name descname">Prices</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timer</span></em>, <em class="sig-param"><span class="n">da_prices</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tou_prices</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">co2_prices</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">feedin_factor</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.prices.Prices" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.prices.Prices</span></code></p>
<p>Extension of pyCity_base class Prices for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timer</strong> (<a class="reference internal" href="#pycity_scheduling.classes.timer.Timer" title="pycity_scheduling.classes.timer.Timer"><em>Timer</em></a>) – Timer instance for generating needed prices.</p></li>
<li><p><strong>da_prices</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Day-ahead prices for each timestep in the <cite>simu_horizon</cite>
in [ct/kWh].</p></li>
<li><p><strong>tou_prices</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Time-of-use prices for each timestep in the <cite>simu_horizon</cite>
in [ct/kWh].</p></li>
<li><p><strong>co2_prices</strong> (<em>array_like</em><em>, </em><em>optional</em>) – CO2 emissions for each timestep in the <cite>simu_horizon</cite> in [g/kWh].</p></li>
<li><p><strong>feedin_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Factor which is multiplied to the prices for feed-in revenue.
Should be in [0,1], as prices for feed-in are usually lower than
for consumption.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>If prices are loaded automatically, the simulation period must lie within a single year.</p></li>
<li><p>CO2 emissions and day-ahead prices are currently available for the year 2015 only.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>co2_price_cache</strong></dt><dd></dd>
<dt><strong>da_price_cache</strong></dt><dd></dd>
<dt><strong>tou_price_cache</strong></dt><dd></dd>
<dt><strong>tou_price_cache_year</strong></dt><dd></dd>
</dl>
</dd>
</dl>
<dl class="py attribute">
<dt id="pycity_scheduling.classes.prices.Prices.co2_price_cache">
<code class="sig-name descname">co2_price_cache</code><em class="property"> = None</em><a class="headerlink" href="#pycity_scheduling.classes.prices.Prices.co2_price_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pycity_scheduling.classes.prices.Prices.da_price_cache">
<code class="sig-name descname">da_price_cache</code><em class="property"> = None</em><a class="headerlink" href="#pycity_scheduling.classes.prices.Prices.da_price_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pycity_scheduling.classes.prices.Prices.tou_price_cache">
<code class="sig-name descname">tou_price_cache</code><em class="property"> = None</em><a class="headerlink" href="#pycity_scheduling.classes.prices.Prices.tou_price_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pycity_scheduling.classes.prices.Prices.tou_price_cache_year">
<code class="sig-name descname">tou_price_cache_year</code><em class="property"> = None</em><a class="headerlink" href="#pycity_scheduling.classes.prices.Prices.tou_price_cache_year" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.space_cooling">
<span id="pycity-scheduling-classes-space-cooling-module"></span><h2>pycity_scheduling.classes.space_cooling module<a class="headerlink" href="#module-pycity_scheduling.classes.space_cooling" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.space_cooling.SpaceCooling">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.space_cooling.</code><code class="sig-name descname">SpaceCooling</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">loadcurve</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">living_area</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">specific_demand</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">profile_type</span><span class="o">=</span><span class="default_value">'HEF'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.space_cooling.SpaceCooling" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling" title="pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.demand.space_cooling.SpaceCooling</span></code></p>
<p>Extension of pyCity_base class SpaceCooling for scheduling purposes.</p>
<p>As for all uncontrollable loads, the <cite>p_th_schedule</cite> contains the forecast
of the load.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<em>Environment object</em>) – Common to all other objects. Includes time and weather instances</p></li>
<li><p><strong>method</strong> (<em>integer</em><em>, </em><em>optional</em>) – <ul>
<li><p><cite>0</cite> : Provide load curve directly</p></li>
<li><p><cite>1</cite> : Use thermal standard load profile (not implemented yet!)</p></li>
</ul>
</p></li>
<li><p><strong>loadcurve</strong> (<em>Array-like</em><em>, </em><em>optional</em>) – Load curve for all investigated time steps
Requires <cite>method=0</cite></p></li>
<li><p><strong>living_area</strong> (<em>Float</em><em>, </em><em>optional</em>) – Living area of the apartment in m^2
Requires <cite>method=1</cite></p></li>
<li><p><strong>specific_demand</strong> (<em>Float</em><em>, </em><em>optional</em>) – Specific thermal demand of the building in kWh/(m^2 a)
Requires <cite>method=1</cite></p></li>
<li><p><strong>profile_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – Thermal SLP profile name
Requires <cite>method=1</cite>
- <cite>HEF</cite> : Single family household
- <cite>HMF</cite> : Multi family household
- <cite>GBA</cite> : Bakeries
- <cite>GBD</cite> : Other services
- <cite>GBH</cite> : Accomodations
- <cite>GGA</cite> : Restaurants
- <cite>GGB</cite> : Gardening
- <cite>GHA</cite> : Retailers
- <cite>GHD</cite> : Summed load profile business, trade and services
- <cite>GKO</cite> : Banks, insurances, public institutions
- <cite>GMF</cite> : Household similar businesses
- <cite>GMK</cite> : Automotive
- <cite>GPD</cite> : Paper and printing
- <cite>GWA</cite> : Laundries</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The following constraint is added for removing the bounds from the TEC:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[p_{th\_cool} = load\_curve\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.space_cooling.SpaceCooling.new_schedule" title="pycity_scheduling.classes.space_cooling.SpaceCooling.new_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">new_schedule</span></code></a>(schedule)</p></td>
<td><p>Create a new schedule with default values.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.space_cooling.SpaceCooling.reset" title="pycity_scheduling.classes.space_cooling.SpaceCooling.reset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset</span></code></a>([schedule])</p></td>
<td><p>Reset all values of specified schedule.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.space_cooling.SpaceCooling.update_model" title="pycity_scheduling.classes.space_cooling.SpaceCooling.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.space_cooling.SpaceCooling.update_schedule" title="pycity_scheduling.classes.space_cooling.SpaceCooling.update_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_schedule</span></code></a>()</p></td>
<td><p>Update the schedule with the scheduling model solution.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.space_cooling.SpaceCooling.new_schedule">
<code class="sig-name descname">new_schedule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.space_cooling.SpaceCooling.new_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new schedule with default values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of new schedule.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.space_cooling.SpaceCooling.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.space_cooling.SpaceCooling.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all values of specified schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specify which schedule to reset.</p>
<ul class="simple">
<li><p><cite>None</cite> : Resets all schedules</p></li>
<li><p>’default’ : Resets normal schedule</p></li>
<li><p>’ref’ : Resets reference schedule</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.space_cooling.SpaceCooling.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.space_cooling.SpaceCooling.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel.</p>
<p>Set variable bounds to equal the given demand, as pure space cooling does
not provide any flexibility.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.space_cooling.SpaceCooling.update_schedule">
<code class="sig-name descname">update_schedule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.space_cooling.SpaceCooling.update_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the schedule with the scheduling model solution.</p>
<p>Retrieve the solution from the scheduling model and write it to the
schedule. The model must be optimal. The time / position of the
solution in the schedule is determined by <cite>self.timer.current_timestep</cite>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.space_heating">
<span id="pycity-scheduling-classes-space-heating-module"></span><h2>pycity_scheduling.classes.space_heating module<a class="headerlink" href="#module-pycity_scheduling.classes.space_heating" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.space_heating.SpaceHeating">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.space_heating.</code><code class="sig-name descname">SpaceHeating</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">loadcurve</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">living_area</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">specific_demand</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">profile_type</span><span class="o">=</span><span class="default_value">'HEF'</span></em>, <em class="sig-param"><span class="n">zone_parameters</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t_m_init</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ventilation</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">t_cooling_set</span><span class="o">=</span><span class="default_value">200</span></em>, <em class="sig-param"><span class="n">t_heating_set</span><span class="o">=</span><span class="default_value">- 50</span></em>, <em class="sig-param"><span class="n">occupancy</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">appliances</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">lighting</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.space_heating.SpaceHeating" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating" title="pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.demand.space_heating.SpaceHeating</span></code></p>
<p>Extension of pyCity_base class SpaceHeating for scheduling purposes.</p>
<p>As for all uncontrollable loads, the <cite>p_th_heat_schedule</cite> contains the forecast
of the load.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – common to all other objects, includes time and weather instances</p></li>
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – <ul>
<li><p>0 : Provide load curve directly</p></li>
<li><p>1 : Use thermal standard load profile</p></li>
<li><p>2 : Use ISO 13790 standard to compute thermal load</p></li>
</ul>
</p></li>
<li><p><strong>loadcurve</strong> (<em>numpy.ndarray of float</em><em>, </em><em>optional</em>) – load curve for all investigated time steps in [kW]
requires <cite>method=0</cite>.</p></li>
<li><p><strong>living_area</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – living area of the apartment in m2
requires <cite>method=1</cite></p></li>
<li><p><strong>specific_demand</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – specific thermal demand of the building in [kWh /(m2*a)]
requires <cite>method=1</cite></p></li>
<li><p><strong>profile_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – thermal SLP profile name
requires <cite>method=1</cite>
- “HEF” : Single family household
- “HMF” : Multi family household
- “GBA” : Bakeries
- “GBD” : Other services
- “GBH” : Accomodations
- “GGA” : Restaurants
- “GGB” : Gardening
- “GHA” : Retailers
- “GHD” : Summed load profile business, trade and services
- “GKO” : Banks, insurances, public institutions
- “GMF” : Household similar businesses
- “GMK” : Automotive
- “GPD” : Paper and printing
- “GWA” : Laundries</p></li>
<li><p><strong>zone_parameters</strong> (<em>ZoneParameters object</em><em>, </em><em>optional</em>) – parameters of the building (floor area, building class, etc.) for <cite>method=2</cite>.</p></li>
<li><p><strong>t_m_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Initial temperature of the internal heat capacity in [°C] for <cite>method=2</cite>.</p></li>
<li><p><strong>ventilation</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Ventilation rate in [1/h] for <cite>method=2</cite>.</p></li>
<li><p><strong>t_cooling_set</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Cooling starts if the room temperature exceeds this value for <cite>method=2</cite>.</p></li>
<li><p><strong>t_heating_set</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Heating starts if the room temperature drops below this value for <cite>method=2</cite>.</p></li>
<li><p><strong>occupancy</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Full year occupancy profile for <cite>method=2</cite>.</p></li>
<li><p><strong>appliances</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Internal gains from electrical appliances in [W] for <cite>method=2</cite>.</p></li>
<li><p><strong>lighting</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Internal gains from lighting in Watt for <cite>method=2</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The thermal standard load profile is based on the dissertation of Mark Hellwig
“Entwicklung und Anwendung parametrisierter Standard-Lastprofile”,
TU München, Germany, 2003: <a class="reference external" href="http://mediatum.ub.tum.de/doc/601557/601557.pdf">http://mediatum.ub.tum.de/doc/601557/601557.pdf</a> (accessed on 2020/09/28)</p></li>
<li><p>The following constraint is added for removing the bounds from TEH:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[p_{th\_heat} = load\_curve\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.space_heating.SpaceHeating.new_schedule" title="pycity_scheduling.classes.space_heating.SpaceHeating.new_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">new_schedule</span></code></a>(schedule)</p></td>
<td><p>Create a new schedule with default values.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.space_heating.SpaceHeating.reset" title="pycity_scheduling.classes.space_heating.SpaceHeating.reset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset</span></code></a>([schedule])</p></td>
<td><p>Reset all values of specified schedule.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.space_heating.SpaceHeating.update_model" title="pycity_scheduling.classes.space_heating.SpaceHeating.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.space_heating.SpaceHeating.update_schedule" title="pycity_scheduling.classes.space_heating.SpaceHeating.update_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_schedule</span></code></a>()</p></td>
<td><p>Update the schedule with the scheduling model solution.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.space_heating.SpaceHeating.new_schedule">
<code class="sig-name descname">new_schedule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.space_heating.SpaceHeating.new_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new schedule with default values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of new schedule.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.space_heating.SpaceHeating.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.space_heating.SpaceHeating.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all values of specified schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specify which schedule to reset.</p>
<ul class="simple">
<li><p><cite>None</cite> : Resets all schedules</p></li>
<li><p>’default’ : Resets normal schedule</p></li>
<li><p>’ref’ : Resets reference schedule</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.space_heating.SpaceHeating.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.space_heating.SpaceHeating.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel.</p>
<p>Set variable bounds to equal the given demand, as pure space heating does
not provide any flexibility.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.space_heating.SpaceHeating.update_schedule">
<code class="sig-name descname">update_schedule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.space_heating.SpaceHeating.update_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the schedule with the scheduling model solution.</p>
<p>Retrieve the solution from the scheduling model and write it to the
schedule. The model must be optimal. The time / position of the
solution in the schedule is determined by <cite>self.timer.current_timestep</cite>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.thermal_cooling_storage">
<span id="pycity-scheduling-classes-thermal-cooling-storage-module"></span><h2>pycity_scheduling.classes.thermal_cooling_storage module<a class="headerlink" href="#module-pycity_scheduling.classes.thermal_cooling_storage" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.thermal_cooling_storage.ThermalCoolingStorage">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.thermal_cooling_storage.</code><code class="sig-name descname">ThermalCoolingStorage</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">e_th_max</span></em>, <em class="sig-param"><span class="n">soc_init</span><span class="o">=</span><span class="default_value">0.5</span></em>, <em class="sig-param"><span class="n">loss_factor</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">storage_end_equality</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.thermal_cooling_storage.ThermalCoolingStorage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling" title="pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.thermal_energy_storage.ThermalEnergyStorage</span></code></p>
<p>Extension of pyCity_base class ThermalEnergyStorage for scheduling purposes.
A thermal cooling storage device can be used as a ‘buffer’ within a cooling system setup.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>e_th_max</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Amount of energy the TCS is able to store in [kWh].</p></li>
<li><p><strong>soc_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Initial state of charge.</p></li>
<li><p><strong>loss_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Storage’s loss factor (area*U_value) in [W/K].</p></li>
<li><p><strong>storage_end_equality</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Defaults to <cite>False</cite>.
<cite>True</cite> if the soc at the end of the scheduling has to be equal to
the initial soc.
<cite>False</cite> if it has to be greater or equal than the initial soc.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>TCSs offer sets of constraints for operation. The following constraints
and bounds are generated by the TCS:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}e_{th\_cool} &amp;=&amp; e_{th\_cool\_previous} * (1-th\_loss) + p_{th\_cool} * \Delta t \\
\text{with} \quad e_{th\_cool\_previous}
&amp;=&amp; \begin{bmatrix} e_{th\_ini} &amp; e_{th\_cool\_0} &amp; \cdots &amp; e_{th\_cool\_n-1}\end{bmatrix}\end{split}\]</div>
<ul class="simple">
<li><p>Additional constraints generated by the parameters are:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}e_{th\_cool\_t\_last} &amp;=&amp; soc\_init * e_{th\_max}, &amp; \quad \text{if storage_end_equality} \\
e_{th\_cool\_t\_last} &amp;\geq&amp; soc\_init * e_{th\_max}, &amp; \quad \text{else}\end{split}\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.thermal_cooling_storage.ThermalCoolingStorage.populate_model" title="pycity_scheduling.classes.thermal_cooling_storage.ThermalCoolingStorage.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.thermal_cooling_storage.ThermalCoolingStorage.update_model" title="pycity_scheduling.classes.thermal_cooling_storage.ThermalCoolingStorage.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.thermal_cooling_storage.ThermalCoolingStorage.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.thermal_cooling_storage.ThermalCoolingStorage.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel</p>
<p>Call parent’s <cite>populate_model</cite> method and set variables lower bounds
to <cite>None</cite>. Then add variables for the state of charge with an upper
bound of <cite>self.e_th_max</cite>. Also add continuity constraints to the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite> : Use same constraints as convex mode</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.thermal_cooling_storage.ThermalCoolingStorage.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.thermal_cooling_storage.ThermalCoolingStorage.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.thermal_entity_cooling">
<span id="pycity-scheduling-classes-thermal-entity-cooling-module"></span><h2>pycity_scheduling.classes.thermal_entity_cooling module<a class="headerlink" href="#module-pycity_scheduling.classes.thermal_entity_cooling" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.thermal_entity_cooling.</code><code class="sig-name descname">ThermalEntityCooling</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.optimization_entity.OptimizationEntity</span></code></a></p>
<p>Base class for all thermal cooling entities derived from OptimizationEntity.</p>
<p>This class provides functionality common to all thermal cooling entities.</p>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>Cooling TEs add the <span class="math notranslate nohighlight">\(p_{th\_cool}\)</span> variable to the model. When not modified
by other classes, the following constraint is added:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[p_{th\_cool} \geq 0\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling.populate_model" title="pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel.</p>
<p>Add variables for the thermal cooling demand of the entity to the optimization
model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use same constraints as convex mode</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.thermal_entity_heating">
<span id="pycity-scheduling-classes-thermal-entity-heating-module"></span><h2>pycity_scheduling.classes.thermal_entity_heating module<a class="headerlink" href="#module-pycity_scheduling.classes.thermal_entity_heating" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.thermal_entity_heating.</code><code class="sig-name descname">ThermalEntityHeating</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.optimization_entity.OptimizationEntity</span></code></a></p>
<p>Base class for all thermal heating entities derived from OptimizationEntity.</p>
<p>This class provides functionality common to all thermal heating entities.</p>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>Heating TEs add the <span class="math notranslate nohighlight">\(p_{th\_heat}\)</span> variable to the model. When not modified
by other classes, the following constraint is added:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[p_{th\_heat} \geq 0\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating.populate_model" title="pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel.</p>
<p>Add variables for the thermal heating demand of the entity to the optimization
model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use same constraints as convex mode</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.thermal_heating_storage">
<span id="pycity-scheduling-classes-thermal-heating-storage-module"></span><h2>pycity_scheduling.classes.thermal_heating_storage module<a class="headerlink" href="#module-pycity_scheduling.classes.thermal_heating_storage" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.thermal_heating_storage.ThermalHeatingStorage">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.thermal_heating_storage.</code><code class="sig-name descname">ThermalHeatingStorage</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">e_th_max</span></em>, <em class="sig-param"><span class="n">soc_init</span><span class="o">=</span><span class="default_value">0.5</span></em>, <em class="sig-param"><span class="n">loss_factor</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">storage_end_equality</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.thermal_heating_storage.ThermalHeatingStorage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating" title="pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.thermal_energy_storage.ThermalEnergyStorage</span></code></p>
<p>Extension of pyCity_base class ThermalEnergyStorage for scheduling purposes.
A thermal heating storage device can be used as a ‘buffer’ within a heating system setup.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>e_th_max</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Amount of energy the THS is able to store in [kWh].</p></li>
<li><p><strong>soc_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Initial state of charge.</p></li>
<li><p><strong>loss_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Storage’s loss factor (area*U_value) in [W/K].</p></li>
<li><p><strong>storage_end_equality</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Defaults to <cite>False</cite>.
<cite>True</cite> if the soc at the end of the scheduling has to be equal to
the initial soc.
<cite>False</cite> if it has to be greater or equal than the initial soc.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>THSs offer sets of constraints for operation. The following constraints
and bounds are generated by the THS:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}e_{th\_heat} &amp;=&amp; e_{th\_heat\_previous} * (1-th\_loss) + p_{th\_heat} * \Delta t \\
\text{with} \quad e_{th\_heat\_previous}
&amp;=&amp; \begin{bmatrix} e_{th\_ini} &amp; e_{th\_heat\_0} &amp; \cdots &amp; e_{th\_heat\_n-1}\end{bmatrix}\end{split}\]</div>
<ul class="simple">
<li><p>Additional constraints generated by the parameters are:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}e_{th\_heat\_t\_last} &amp;=&amp; soc\_init * e_{th\_max}, &amp; \quad \text{if storage_end_equality} \\
e_{th\_heat\_t\_last} &amp;\geq&amp; soc\_init * e_{th\_max}, &amp; \quad \text{else}\end{split}\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.thermal_heating_storage.ThermalHeatingStorage.populate_model" title="pycity_scheduling.classes.thermal_heating_storage.ThermalHeatingStorage.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.thermal_heating_storage.ThermalHeatingStorage.update_model" title="pycity_scheduling.classes.thermal_heating_storage.ThermalHeatingStorage.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.thermal_heating_storage.ThermalHeatingStorage.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.thermal_heating_storage.ThermalHeatingStorage.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel</p>
<p>Call parent’s <cite>populate_model</cite> method and set variables lower bounds
to <cite>None</cite>. Then add variables for the state of charge with an upper
bound of <cite>self.e_th_max</cite>. Also add continuity constraints to the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite> : Use same constraints as convex mode</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.thermal_heating_storage.ThermalHeatingStorage.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.thermal_heating_storage.ThermalHeatingStorage.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.timer">
<span id="pycity-scheduling-classes-timer-module"></span><h2>pycity_scheduling.classes.timer module<a class="headerlink" href="#module-pycity_scheduling.classes.timer" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.timer.Timer">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.timer.</code><code class="sig-name descname">Timer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">step_size</span><span class="o">=</span><span class="default_value">900</span></em>, <em class="sig-param"><span class="n">op_horizon</span><span class="o">=</span><span class="default_value">96</span></em>, <em class="sig-param"><span class="n">mpc_horizon</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mpc_step_width</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">initial_date</span><span class="o">=</span><span class="default_value">(2015, 1, 1)</span></em>, <em class="sig-param"><span class="n">initial_time</span><span class="o">=</span><span class="default_value">(0, 0, 0)</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.timer.Timer</span></code></p>
<p>Extension of pyCity_base class Timer for scheduling purposes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>step_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Number of seconds in one time step.</p></li>
<li><p><strong>op_horizon</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Number of time steps used in one scheduling optimization.</p></li>
<li><p><strong>mpc_horizon</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Number of time steps in whole simulation. All data must be
available for this time. If <cite>None</cite> set value to <cite>op_horizon</cite>.</p></li>
<li><p><strong>mpc_step_width</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Number of timesteps between two optimizations in MPC. If None set
value to <cite>op_horizon</cite>.</p></li>
<li><p><strong>initial_date</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em>, </em><em>optional</em>) – Initial date in the format (year, month, day).</p></li>
<li><p><strong>initial_time</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em>, </em><em>optional</em>) – Initial time in the format (hour, minute, second).</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>This class’ behaviour may differ from the one of the baseclass, as it
keeps an actual date rather than a relative counter only</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.date" title="pycity_scheduling.classes.timer.Timer.date"><code class="xref py py-obj docutils literal notranslate"><span class="pre">date</span></code></a></dt><dd><p>The date of the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.datetime" title="pycity_scheduling.classes.timer.Timer.datetime"><code class="xref py py-obj docutils literal notranslate"><span class="pre">datetime</span></code></a></dt><dd><p>The datetime of the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.day" title="pycity_scheduling.classes.timer.Timer.day"><code class="xref py py-obj docutils literal notranslate"><span class="pre">day</span></code></a></dt><dd><p>The day of the month for the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.hour" title="pycity_scheduling.classes.timer.Timer.hour"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hour</span></code></a></dt><dd><p>The hour of the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.is_leap" title="pycity_scheduling.classes.timer.Timer.is_leap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_leap</span></code></a></dt><dd><p>If the year of the current timestep is a leap year.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.minute" title="pycity_scheduling.classes.timer.Timer.minute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">minute</span></code></a></dt><dd><p>The minute of the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.month" title="pycity_scheduling.classes.timer.Timer.month"><code class="xref py py-obj docutils literal notranslate"><span class="pre">month</span></code></a></dt><dd><p>The month of the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.second" title="pycity_scheduling.classes.timer.Timer.second"><code class="xref py py-obj docutils literal notranslate"><span class="pre">second</span></code></a></dt><dd><p>The second of the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.time" title="pycity_scheduling.classes.timer.Timer.time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">time</span></code></a></dt><dd><p>The time for the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.weekday" title="pycity_scheduling.classes.timer.Timer.weekday"><code class="xref py py-obj docutils literal notranslate"><span class="pre">weekday</span></code></a></dt><dd><p>The weekday of the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.year" title="pycity_scheduling.classes.timer.Timer.year"><code class="xref py py-obj docutils literal notranslate"><span class="pre">year</span></code></a></dt><dd><p>The year of the current timestep.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.mpc_update" title="pycity_scheduling.classes.timer.Timer.mpc_update"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mpc_update</span></code></a>()</p></td>
<td><p>Update Timer for MPC.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.op_update" title="pycity_scheduling.classes.timer.Timer.op_update"><code class="xref py py-obj docutils literal notranslate"><span class="pre">op_update</span></code></a>()</p></td>
<td><p>Update Timer for a normal scheduling optimization.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.print_datetime" title="pycity_scheduling.classes.timer.Timer.print_datetime"><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_datetime</span></code></a>()</p></td>
<td><p>Print the datetime for the current timestep.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.reset" title="pycity_scheduling.classes.timer.Timer.reset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset</span></code></a>()</p></td>
<td><p>Reset the Timer to the initial state.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.time_in_day" title="pycity_scheduling.classes.timer.Timer.time_in_day"><code class="xref py py-obj docutils literal notranslate"><span class="pre">time_in_day</span></code></a>([unit, from_init])</p></td>
<td><p>Time passed since beginning of the day.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.time_in_week" title="pycity_scheduling.classes.timer.Timer.time_in_week"><code class="xref py py-obj docutils literal notranslate"><span class="pre">time_in_week</span></code></a>([unit, from_init])</p></td>
<td><p>Time passed since beginning of the day.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.timer.Timer.time_in_year" title="pycity_scheduling.classes.timer.Timer.time_in_year"><code class="xref py py-obj docutils literal notranslate"><span class="pre">time_in_year</span></code></a>([unit, from_init])</p></td>
<td><p>Time passed since the beginning of the year.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.date">
<em class="property">property </em><code class="sig-name descname">date</code><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.date" title="Permalink to this definition">¶</a></dt>
<dd><p>The date of the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.datetime">
<em class="property">property </em><code class="sig-name descname">datetime</code><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>The datetime of the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.day">
<em class="property">property </em><code class="sig-name descname">day</code><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.day" title="Permalink to this definition">¶</a></dt>
<dd><p>The day of the month for the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.hour">
<em class="property">property </em><code class="sig-name descname">hour</code><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.hour" title="Permalink to this definition">¶</a></dt>
<dd><p>The hour of the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.is_leap">
<em class="property">property </em><code class="sig-name descname">is_leap</code><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.is_leap" title="Permalink to this definition">¶</a></dt>
<dd><p>If the year of the current timestep is a leap year.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.minute">
<em class="property">property </em><code class="sig-name descname">minute</code><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.minute" title="Permalink to this definition">¶</a></dt>
<dd><p>The minute of the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.month">
<em class="property">property </em><code class="sig-name descname">month</code><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.month" title="Permalink to this definition">¶</a></dt>
<dd><p>The month of the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.mpc_update">
<code class="sig-name descname">mpc_update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.mpc_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update Timer for MPC.</p>
<p>Move <cite>self.mpc_step_width</cite> timesteps forward.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.op_update">
<code class="sig-name descname">op_update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.op_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update Timer for a normal scheduling optimization.</p>
<p>Go <cite>self.timesteps_used_horizon</cite> timesteps forward.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.print_datetime">
<code class="sig-name descname">print_datetime</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.print_datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the datetime for the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the Timer to the initial state.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.second">
<em class="property">property </em><code class="sig-name descname">second</code><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.second" title="Permalink to this definition">¶</a></dt>
<dd><p>The second of the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.time">
<em class="property">property </em><code class="sig-name descname">time</code><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.time" title="Permalink to this definition">¶</a></dt>
<dd><p>The time for the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.time_in_day">
<code class="sig-name descname">time_in_day</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'timesteps'</span></em>, <em class="sig-param"><span class="n">from_init</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.time_in_day" title="Permalink to this definition">¶</a></dt>
<dd><p>Time passed since beginning of the day.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>unit</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies the unit for the result.</p>
<ul>
<li><p>’timesteps’ Return the time as timesteps.</p></li>
<li><p>’seconds’ Return the time as seconds.</p></li>
<li><p>’days’ Return the time as days.</p></li>
</ul>
</p></li>
<li><p><strong>from_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Time for init datetime or current datetime.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Time in specified unit.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.time_in_week">
<code class="sig-name descname">time_in_week</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'timesteps'</span></em>, <em class="sig-param"><span class="n">from_init</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.time_in_week" title="Permalink to this definition">¶</a></dt>
<dd><p>Time passed since beginning of the day.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>unit</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies the unit for the result.</p>
<ul>
<li><p>’timesteps’ Return the time as timesteps.</p></li>
<li><p>’seconds’ Return the time as seconds.</p></li>
<li><p>’days’ Return the time as days.</p></li>
</ul>
</p></li>
<li><p><strong>from_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Time for init datetime or current datetime.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Time in specified unit.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.time_in_year">
<code class="sig-name descname">time_in_year</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'timesteps'</span></em>, <em class="sig-param"><span class="n">from_init</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.time_in_year" title="Permalink to this definition">¶</a></dt>
<dd><p>Time passed since the beginning of the year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>unit</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies the unit for the result.</p>
<ul>
<li><p>’timesteps’ Return the time as timesteps.</p></li>
<li><p>’seconds’ Return the time as seconds.</p></li>
<li><p>’days’ Return the time as days.</p></li>
</ul>
</p></li>
<li><p><strong>from_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Time for init date or current date.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Time in specified unit.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.weekday">
<em class="property">property </em><code class="sig-name descname">weekday</code><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.weekday" title="Permalink to this definition">¶</a></dt>
<dd><p>The weekday of the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.timer.Timer.year">
<em class="property">property </em><code class="sig-name descname">year</code><a class="headerlink" href="#pycity_scheduling.classes.timer.Timer.year" title="Permalink to this definition">¶</a></dt>
<dd><p>The year of the current timestep.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.weather">
<span id="pycity-scheduling-classes-weather-module"></span><h2>pycity_scheduling.classes.weather module<a class="headerlink" href="#module-pycity_scheduling.classes.weather" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.weather.Weather">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.weather.</code><code class="sig-name descname">Weather</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timer</span></em>, <em class="sig-param"><span class="n">path_TRY</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">path_TMY3</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">new_try</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">path_temperature</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">path_direct_radiation</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">path_diffuse_radiation</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">path_wind_speed</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">path_humidity</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">path_pressure</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">path_cloudiness</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">time_discretization</span><span class="o">=</span><span class="default_value">3600</span></em>, <em class="sig-param"><span class="n">delimiter</span><span class="o">=</span><span class="default_value">'\t'</span></em>, <em class="sig-param"><span class="n">use_TRY</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">use_TMY3</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">location</span><span class="o">=</span><span class="default_value">(50.76, 6.07)</span></em>, <em class="sig-param"><span class="n">height_velocity_measurement</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">altitude</span><span class="o">=</span><span class="default_value">152.0</span></em>, <em class="sig-param"><span class="n">time_zone</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.weather.Weather" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.weather.Weather</span></code></p>
<p>Extension of pyCity_base class Weather for scheduling purposes.</p>
</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes.wind_energy_converter">
<span id="pycity-scheduling-classes-wind-energy-converter-module"></span><h2>pycity_scheduling.classes.wind_energy_converter module<a class="headerlink" href="#module-pycity_scheduling.classes.wind_energy_converter" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.wind_energy_converter.WindEnergyConverter">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.wind_energy_converter.</code><code class="sig-name descname">WindEnergyConverter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">velocity</span></em>, <em class="sig-param"><span class="n">power</span></em>, <em class="sig-param"><span class="n">hub_height</span><span class="o">=</span><span class="default_value">70</span></em>, <em class="sig-param"><span class="n">roughness</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">force_renewables</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.wind_energy_converter.WindEnergyConverter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.wind_energy_converter.WindEnergyConverter</span></code></p>
<p>Extension of pyCity_base class WindEnergyConverter for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>velocity</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.19)"><em>numpy.ndarray</em></a>) – Wind speeds in [m/s].</p></li>
<li><p><strong>power</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.19)"><em>numpy.ndarray</em></a>) – Power for given velocities in [kW].</p></li>
<li><p><strong>hub_height</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Height of the wind energy converter in [m].</p></li>
<li><p><strong>roughness</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Roughness of landscape in [m].</p></li>
<li><p><strong>force_renewables</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – <cite>True</cite> if generation may not be reduced for optimization purposes.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The following constraint is added for removing the bounds from EE:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{el} &amp;=&amp; -p_{el\_supply}, &amp; \quad \text{if force_renewables} \\
0 \geq p_{el} &amp;\geq&amp; -p_{el\_supply} , &amp; \quad \text{else}\end{split}\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.wind_energy_converter.WindEnergyConverter.get_objective" title="pycity_scheduling.classes.wind_energy_converter.WindEnergyConverter.get_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_objective</span></code></a>([coeff])</p></td>
<td><p>Objective function of the WindEnergyConverter.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.wind_energy_converter.WindEnergyConverter.populate_model" title="pycity_scheduling.classes.wind_energy_converter.WindEnergyConverter.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add entity block to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.wind_energy_converter.WindEnergyConverter.update_model" title="pycity_scheduling.classes.wind_energy_converter.WindEnergyConverter.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.wind_energy_converter.WindEnergyConverter.get_objective">
<code class="sig-name descname">get_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coeff</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.wind_energy_converter.WindEnergyConverter.get_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function of the WindEnergyConverter.</p>
<p>Return the objective function of the wind energy converter weighted
with <cite>coeff</cite>. Depending on <cite>self.force_renewables</cite> leave objective
function empty or build quadratic objective function to minimize
discrepancy between available power and produced power.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coeff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Coefficient for the objective function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Objective function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ExpressionBase</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.wind_energy_converter.WindEnergyConverter.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.wind_energy_converter.WindEnergyConverter.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add entity block to pyomo ConcreteModel.</p>
<p>Places the block with the name of the entity in the ConcreteModel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : May use integer variables</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.wind_energy_converter.WindEnergyConverter.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.wind_energy_converter.WindEnergyConverter.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pycity_scheduling.classes">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pycity_scheduling.classes" title="Permalink to this headline">¶</a></h2>
<p>The pycity_scheduling framework</p>
<p>Copyright (C) 2020,
Institute for Automation of Complex Power Systems (ACS),
E.ON Energy Research Center (E.ON ERC),
RWTH Aachen University</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
documentation files (the “Software”), to deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit
persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<dl class="py class">
<dt id="pycity_scheduling.classes.Apartment">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">Apartment</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">net_floor_area</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">occupancy</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Apartment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.entity_container.EntityContainer" title="pycity_scheduling.classes.entity_container.EntityContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.entity_container.EntityContainer</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.demand.apartment.Apartment</span></code></p>
<p>Extension of pyCity_base class Apartment for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common to all other objects. Includes time and weather instances</p></li>
<li><p><strong>net_floor_area</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – netto floor area in [m^2]</p></li>
<li><p><strong>occupancy</strong> (<em>Occupancy</em><em>, </em><em>optional</em>) – Occupancy profile from pycity_base for the apartment.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>Apartments inherit their set of constraints from EntityContainer.</p></li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Apartment.addEntity" title="pycity_scheduling.classes.Apartment.addEntity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">addEntity</span></code></a>(entity)</p></td>
<td><p>Add entity to apartment.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Apartment.get_lower_entities" title="pycity_scheduling.classes.Apartment.get_lower_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_lower_entities</span></code></a>()</p></td>
<td><p>Yield all lower-level entities.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.Apartment.addEntity">
<code class="sig-name descname">addEntity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">entity</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Apartment.addEntity" title="Permalink to this definition">¶</a></dt>
<dd><p>Add entity to apartment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>entity</strong> (<a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity"><em>OptimizationEntity</em></a>) – Entity to be added to the apartment; must be of type FixedLoad,
DeferrableLoad, CurtailableLoad, SpaceHeating, SpaceCooling or DomesticHotWater.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Apartment.get_lower_entities">
<code class="sig-name descname">get_lower_entities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Apartment.get_lower_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all lower-level entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>All contained entities.</em></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.Battery">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">Battery</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">e_el_max</span></em>, <em class="sig-param"><span class="n">p_el_max_charge</span></em>, <em class="sig-param"><span class="n">p_el_max_discharge</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">soc_init</span><span class="o">=</span><span class="default_value">0.5</span></em>, <em class="sig-param"><span class="n">eta</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">storage_end_equality</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Battery" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.battery.Battery</span></code></p>
<p>Extension of pyCity_base class Battery for scheduling purposes.</p>
<p>Initialize Battery.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>e_el_max</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Electric capacity of the battery [kWh].</p></li>
<li><p><strong>p_el_max_charge</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Maximum charging power [kW].</p></li>
<li><p><strong>p_el_max_discharge</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Maximum discharging power [kW]. Defaults to zero.</p></li>
<li><p><strong>soc_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Initial state of charge. Defaults to 50%.</p></li>
<li><p><strong>eta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Charging and discharging efficiency. Must be in (0,1]. Defaults
to one.</p></li>
<li><p><strong>storage_end_equality</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – <cite>True</cite> if the soc at the end of the scheduling has to be equal to
the initial soc.
<cite>False</cite> if it has to be greater or equal than the initial soc.
Defaults to <cite>False</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>Batteries offer sets of constraints for operation. In the <cite>convex</cite> mode
the following constraints and bounds are generated by the battery:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{el} &amp;=&amp; p_{el\_demand} - p_{el\_supply} \\
p_{el\_max\_discharge} &amp;\geq&amp; p_{el\_supply} \geq 0 \\
p_{el\_max\_charge} &amp;\geq&amp; p_{el\_demand} \geq 0 \\
e_{el\_max} &amp;\geq&amp; e_{el} \geq 0 \\
e_{el} &amp;=&amp; e_{el\_previous} + (\eta * p_{el\_demand}
- (1 / \eta) * p_{el\_supply}) * \Delta t \\
\text{with} \quad e_{el\_previous} &amp;=&amp; \
\begin{bmatrix} e_{el\_ini} &amp; e_{el\_0} &amp; \cdots &amp; e_{el\_n-1}\end{bmatrix}\end{split}\]</div>
<ul class="simple">
<li><p>Additional constraints generated by the parameters are:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}e_{el\_t\_last} &amp;=&amp; soc\_init * e_{el\_max}, &amp; \quad \text{if storage_end_equality} \\
e_{el\_t\_last} &amp;\geq&amp; soc\_init * e_{el\_max}, &amp; \quad \text{else}\end{split}\]</div>
<ul class="simple">
<li><p>In <cite>integer</cite> mode the following constraints are added additionally:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{el\_demand} &amp;\leq&amp; p_{state} * p_{el\_max\_discharge} \\
p_{el\_supply} &amp;\leq&amp; (1-p_{state}) * p_{el\_max\_charge}\end{split}\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Battery.populate_model" title="pycity_scheduling.classes.Battery.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block of variables and constraints to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Battery.update_model" title="pycity_scheduling.classes.Battery.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.Battery.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Battery.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block of variables and constraints to pyomo ConcreteModel.</p>
<p>Call parent’s <cite>populate_model</cite> method and set variables lower bounds to
<cite>None</cite>. Then add variables for demand, supply and the state of charge,
with their corresponding upper bounds (<cite>self.p_el_max_charge</cite>,
<cite>self.p_el_max_discharge</cite>, <cite>self.e_el_max</cite>). Finally add continuity
constraints to the block.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Battery.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Battery.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.Boiler">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">Boiler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">p_th_nom</span></em>, <em class="sig-param"><span class="n">eta</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">lower_activation_limit</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Boiler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating" title="pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.boiler.Boiler</span></code></p>
<p>Extension of pyCity_base class Boiler for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.Environment" title="pycity_scheduling.classes.Environment"><em>pycity_scheduling.classes.Environment</em></a>) – Common to all other objects. Includes time and weather instances.</p></li>
<li><p><strong>p_th_nom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Nominal heat output in [kW].</p></li>
<li><p><strong>eta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Efficiency of the gas boiler (without unit).</p></li>
<li><p><strong>lower_activation_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em><em> (</em><em>only adhered to in integer mode</em><em>)</em>) – <p>Must be in [0, 1]. Lower activation limit of the gas boiler as a
percentage of the rated power. When the gas boiler is in operation, its
power must be zero or between the lower activation limit and its
rated power.</p>
<ul>
<li><p><cite>lower_activation_limit = 0</cite>: Linear behavior</p></li>
<li><p><cite>lower_activation_limit = 1</cite>: Two-point controlled</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>Gas boilers offer sets of constraints for operation. In the <cite>convex</cite> mode the
following constraints and bounds are generated by the boiler:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[0 \geq p_{th\_heat} \geq -p_{th\_nom}\]</div>
<ul class="simple">
<li><dl class="simple">
<dt>See also:</dt><dd><ul>
<li><p>pycity_scheduling.util.generic_constraints.LowerActivationLimit:
Generates additional constraints for the <cite>lower_activation_limit</cite> in <cite>integer</cite> mode.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Boiler.get_objective" title="pycity_scheduling.classes.Boiler.get_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_objective</span></code></a>([coeff])</p></td>
<td><p>Objective function for entity level scheduling.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Boiler.populate_model" title="pycity_scheduling.classes.Boiler.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.Boiler.get_objective">
<code class="sig-name descname">get_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coeff</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Boiler.get_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function for entity level scheduling.</p>
<p>Return the objective function of the boiler weighted with coeff.
Sum of <cite>p_th_heat</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coeff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Coefficient for the objective function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Objective function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ExpressionBase</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Boiler.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Boiler.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel</p>
<p>Call parent’s <cite>populate_model</cite> method and set variables upper bounds
to <cite>self.p_th_nom</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.Building">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">Building</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">objective</span><span class="o">=</span><span class="default_value">'price'</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">profile_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">building_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">storage_end_equality</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Building" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.entity_container.EntityContainer" title="pycity_scheduling.classes.entity_container.EntityContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.entity_container.EntityContainer</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.building.Building</span></code></p>
<p>Extension of pyCity_base class Building for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common to all other objects. Includes time and weather instances.</p></li>
<li><p><strong>objective</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Objective for the scheduling. The default is ‘price’.</p>
<ul>
<li><p>’price’ : Optimize for the prices given by <cite>prices.tou_prices</cite>.</p></li>
<li><p>’co2’ : Optimize for the CO2 emissions given by <cite>prices.co2_prices</cite>.</p></li>
<li><p>’peak-shaving’ : Try to flatten the schedule as much as possible.</p></li>
<li><p>’max-consumption’ : Try to reduce the maximum of the absolute values of the schedule as much as possible.</p></li>
<li><p>’none’ : No objective (leave all flexibility to other participants).</p></li>
</ul>
</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – Name for the building.
If name is None, set it to self._long_id.</p></li>
<li><p><strong>profile_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Thermal SLP profile name
Requires <cite>method=1</cite></p>
<ul>
<li><p>’HEF’ : Single family household</p></li>
<li><p>’HMF’ : Multi family household</p></li>
<li><p>’GBA’ : Bakeries</p></li>
<li><p>’GBD’ : Other services</p></li>
<li><p>’GBH’ : Accommodations</p></li>
<li><p>’GGA’ : Restaurants</p></li>
<li><p>’GGB’ : Gardening</p></li>
<li><p>’GHA’ : Retailers</p></li>
<li><p>’GHD’ : Summed load profile business, trade and services</p></li>
<li><p>’GKO’ : Banks, insurances, public institutions</p></li>
<li><p>’GMF’ : Household similar businesses</p></li>
<li><p>’GMK’ : Automotive</p></li>
<li><p>’GPD’ : Paper and printing</p></li>
<li><p>’GWA’ : Laundries</p></li>
</ul>
</p></li>
<li><p><strong>building_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – Build year profile name, the detailed list is implemented in
<cite>tabula_data.py</cite>.</p></li>
<li><p><strong>storage_end_equality</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – <cite>True</cite> if the soc at the end of the scheduling has to be equal to
the initial soc.
<cite>False</cite> if it has to be greater or equal than the initial soc.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The exchange of thermal energy between different buildings is currently not supported.
As a result, the building adds the following set of constrains additionally to the
ones of the EntityContainer:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{th\_heat} &amp;=&amp; 0 \\
p_{th\_cool} &amp;=&amp; 0\end{split}\]</div>
<ul class="simple">
<li><p>The building can also add robustness constrains for thermal heating storage:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}e_{u\_bound} \geq \sum_i e_{th\_heat\_i} \geq e_{l\_bound} \\\end{split}\]</div>
<ul class="simple">
<li><p>The <span class="math notranslate nohighlight">\(E_{u\_bound}\)</span> and <span class="math notranslate nohighlight">\(E_{l\_bound}\)</span> are determined by the
robustness parameter, the available capacity of thermal heating storage, the magnitude of heating
required by SpaceHeating and the magnitude of heating that can be produced by the building’s heating units.</p></li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Building.get_lower_entities" title="pycity_scheduling.classes.Building.get_lower_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_lower_entities</span></code></a>()</p></td>
<td><p>Yield all lower-level entities.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Building.populate_model" title="pycity_scheduling.classes.Building.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode, robustness])</p></td>
<td><p>Add building block to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Building.update_model" title="pycity_scheduling.classes.Building.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode, robustness])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.Building.get_lower_entities">
<code class="sig-name descname">get_lower_entities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Building.get_lower_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all lower-level entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>All contained entities.</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Building.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em>, <em class="sig-param"><span class="n">robustness</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Building.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add building block to pyomo ConcreteModel.</p>
<p>Call parent’s <cite>populate_model</cite> method and set variables lower
bounds to <cite>None</cite>. Then call <cite>populate_model</cite> method of the BES
and all contained apartments and add constraints that the sum
of their variables for each period equals the corresponding
own variable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use same constraints as convex mode</p></li>
</ul>
</p></li>
<li><p><strong>robustness</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em>, </em><em>optional</em>) – Tuple of two floats. First entry defines how many time steps are
protected from deviations. Second entry defines the magnitude of
deviations which are considered.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Building.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">robustness</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Building.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the device
according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use same constraints as convex mode</p></li>
</ul>
</p></li>
<li><p><strong>robustness</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em>, </em><em>optional</em>) – Tuple of two floats. First entry defines how many time steps are
protected from deviations. Second entry defines the magnitude of
deviations which are considered.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.BuildingEnergySystem">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">BuildingEnergySystem</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.BuildingEnergySystem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.entity_container.EntityContainer" title="pycity_scheduling.classes.entity_container.EntityContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.entity_container.EntityContainer</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.building_energy_system.BES</span></code></p>
<p>Extension of pyCity_base class BES for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – </p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The constraints generated by a BES are the same as the ones created by an EntityContainer.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference internal" href="#pycity_scheduling.classes.BuildingEnergySystem.tcs_units" title="pycity_scheduling.classes.BuildingEnergySystem.tcs_units"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tcs_units</span></code></a></dt><dd><p>Provides all TCS units.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.BuildingEnergySystem.ths_units" title="pycity_scheduling.classes.BuildingEnergySystem.ths_units"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ths_units</span></code></a></dt><dd><p>Provides all THS units.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.BuildingEnergySystem.getHasDevices" title="pycity_scheduling.classes.BuildingEnergySystem.getHasDevices"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getHasDevices</span></code></a>([all_devices, battery, …])</p></td>
<td><p>Get information if certain devices are installed devices.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.BuildingEnergySystem.get_lower_entities" title="pycity_scheduling.classes.BuildingEnergySystem.get_lower_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_lower_entities</span></code></a>()</p></td>
<td><p>Yield all lower-level entities.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.BuildingEnergySystem.getHasDevices">
<code class="sig-name descname">getHasDevices</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">all_devices</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">battery</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">boiler</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">chp</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">chiller</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">electrical_heater</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">heatpump</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">inverter_acdc</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">inverter_dcac</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">pv</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ths</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">tcs</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.BuildingEnergySystem.getHasDevices" title="Permalink to this definition">¶</a></dt>
<dd><p>Get information if certain devices are installed devices.
The result is in alphabetical order, starting with “battery”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>all_devices</strong> (<em>boolean</em><em>, </em><em>optional</em>) – If true: Return all installed devices
If false: Only return the specified devices</p></li>
<li><p><strong>battery</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the battery</p></li>
<li><p><strong>boiler</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the boiler</p></li>
<li><p><strong>chp</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the chp unit</p></li>
<li><p><strong>chiller</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the chiller unit</p></li>
<li><p><strong>electrical_heater</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the electrical heater</p></li>
<li><p><strong>heatpump</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the heat pump</p></li>
<li><p><strong>inverter_acdc</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the AC-DC inverter</p></li>
<li><p><strong>inverter_dcac</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the DC-AC inverter</p></li>
<li><p><strong>pv</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the PV modules</p></li>
<li><p><strong>ths</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the thermal heating storage</p></li>
<li><p><strong>tcs</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Return information on the thermal cooling storage</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.BuildingEnergySystem.get_lower_entities">
<code class="sig-name descname">get_lower_entities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.BuildingEnergySystem.get_lower_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all lower-level entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>All contained entities.</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.BuildingEnergySystem.tcs_units">
<em class="property">property </em><code class="sig-name descname">tcs_units</code><a class="headerlink" href="#pycity_scheduling.classes.BuildingEnergySystem.tcs_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides all TCS units.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.BuildingEnergySystem.ths_units">
<em class="property">property </em><code class="sig-name descname">ths_units</code><a class="headerlink" href="#pycity_scheduling.classes.BuildingEnergySystem.ths_units" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides all THS units.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.Chiller">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">Chiller</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">p_th_nom</span></em>, <em class="sig-param"><span class="n">cop</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">eta</span><span class="o">=</span><span class="default_value">0.36</span></em>, <em class="sig-param"><span class="n">t_min</span><span class="o">=</span><span class="default_value">4.0</span></em>, <em class="sig-param"><span class="n">lower_activation_limit</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">t_flow</span><span class="o">=</span><span class="default_value">16.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Chiller" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling" title="pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling</span></code></a>, <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.compression_chiller.CompressionChiller</span></code></p>
<p>Extension of pyCity_base class CompressionChiller for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common to all other objects. Includes time and weather instances.</p></li>
<li><p><strong>p_th_nom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Nominal thermal power of the chiller in [kW].</p></li>
<li><p><strong>cop</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.19)"><em>numpy.ndarray</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The chiller’s coefficient of performance (without unit)
If array, it must provide the coefficient of performance (cop) for
each time step in the simulation horizon.
If int or float, a constant cop over the whole horizon is assumed.
If omitted, an air-water chiller is assumed and the cop is
calculated based on the ambient air temperature, eta and t_flow.</p></li>
<li><p><strong>eta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The Carnot efficiency of the chiller.
If cop is omitted, eta is used to calculate the cop based on T_sink and T_source
according to: cop = eta * T_sink * (T_sink - T_source) with T_sink and T_source in Kelvin</p></li>
<li><p><strong>t_min</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The chiller’s minimum provided temperature in °C</p></li>
<li><p><strong>lower_activation_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em><em> (</em><em>only adhered to in integer mode</em><em>)</em>) – <p>Must be in [0, 1]. Lower activation limit of the chiller as a
percentage of the rated power. When the chiller is in operation, its
power must be zero or between the lower activation limit and its
rated power.</p>
<ul>
<li><p><cite>lower_activation_limit = 0</cite>: Linear behavior</p></li>
<li><p><cite>lower_activation_limit = 1</cite>: Two-point controlled</p></li>
</ul>
</p></li>
<li><p><strong>t_flow</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – T_sink temperature delivered by CC in °C.
Is used for cop calculation if cop is omitted.
Note that t_flow &gt;= t_min must hold.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>CHs offer sets of constraints for operation. In the <cite>convex</cite> mode the
following constraints and bounds are generated by the CH:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}0 \geq p_{th\_cool} &amp;\geq&amp; -p_{th\_nom} \\
cop * p_{el} &amp;=&amp; - p_{th\_cool}\end{split}\]</div>
<ul class="simple">
<li><dl class="simple">
<dt>See also:</dt><dd><ul>
<li><p>pycity_scheduling.util.generic_constraints.LowerActivationLimit:
Generates additional constraints for the <cite>lower_activation_limit</cite> in <cite>integer</cite> mode.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Chiller.populate_model" title="pycity_scheduling.classes.Chiller.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Chiller.update_model" title="pycity_scheduling.classes.Chiller.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.Chiller.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Chiller.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel.</p>
<p>Call parent’s <cite>populate_model</cite> method and set thermal variables lower
bounds to <cite>-self.p_th_nom</cite> and the upper bounds to zero. Also add
constraint to bind electrical demand to thermal output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Chiller.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Chiller.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.CityDistrict">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">CityDistrict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">objective</span><span class="o">=</span><span class="default_value">'price'</span></em>, <em class="sig-param"><span class="n">valley_profile</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.CityDistrict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.city_district.CityDistrict</span></code></p>
<p>Extension of pyCity_base class CityDistrict for scheduling purposes. Also represents the district operator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – </p></li>
<li><p><strong>objective</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Objective for the district operator. Default is ‘price’.</p>
<ul>
<li><p>’price’ : Optimize for the minimum total cost given by <cite>prices.da_prices</cite>.</p></li>
<li><p>’peak-shaving’ : Try to ‘flatten’ the schedule as much as possible.</p></li>
<li><p>’max-consumption’ : Try to minimize the maximum power subscription.</p></li>
<li><p>’co2’ : Optimize for the minimum total co2 emissions given by <cite>prices.co2_prices</cite>.</p></li>
<li><p>valley-filling : Try to fill the ‘valleys’ given by a reference power profile.</p></li>
<li><p>flexibility-quantification: To be used to quantify the flexibility potential of the city district only.</p></li>
<li><p>’none’ : No objective.</p></li>
</ul>
</p></li>
<li><p><strong>valley_profile</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.19)"><em>numpy.ndarray</em></a><em>, </em><em>optional</em>) – Profile to be filled by applying valley filling.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The constraints generated by a CD are the same as the ones created by an EntityContainer.</p></li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.CityDistrict.account_imbalance" title="pycity_scheduling.classes.CityDistrict.account_imbalance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">account_imbalance</span></code></a>()</p></td>
<td><p>Changes the current schedule to account imbalances.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.CityDistrict.get_lower_entities" title="pycity_scheduling.classes.CityDistrict.get_lower_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_lower_entities</span></code></a>()</p></td>
<td><p>Yield all lower-level entities.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.CityDistrict.get_objective" title="pycity_scheduling.classes.CityDistrict.get_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_objective</span></code></a>([coeff])</p></td>
<td><p>Objective function for entity level scheduling.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.CityDistrict.populate_model" title="pycity_scheduling.classes.CityDistrict.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add city district block to pyomo ConcreteModel.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.CityDistrict.account_imbalance">
<code class="sig-name descname">account_imbalance</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.CityDistrict.account_imbalance" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the current schedule to account imbalances.</p>
<p>The imbalances are determined from the current schedules of the contained
entities.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.CityDistrict.get_lower_entities">
<code class="sig-name descname">get_lower_entities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.CityDistrict.get_lower_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all lower-level entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>All contained entities.</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.CityDistrict.get_objective">
<code class="sig-name descname">get_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coeff</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.CityDistrict.get_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function for entity level scheduling.</p>
<p>Return the objective function of the entity weighted with
coeff.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coeff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Coefficient for the objective function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Objective function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ExpressionBase</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.CityDistrict.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.CityDistrict.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add city district block to pyomo ConcreteModel.</p>
<p>Call parent’s <cite>populate_model</cite> methods and set variables lower
bounds to <cite>None</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use same constraints as convex mode</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.CombinedHeatPower">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">CombinedHeatPower</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">p_th_nom</span></em>, <em class="sig-param"><span class="n">p_el_nom</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">eta</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">lower_activation_limit</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.CombinedHeatPower" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating" title="pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating</span></code></a>, <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.combined_heat_power.CHP</span></code></p>
<p>Extension of pyCity_base class CHP for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common to all other objects. Includes time and weather instances.</p></li>
<li><p><strong>p_th_nom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Nominal thermal power output in [kW].</p></li>
<li><p><strong>p_el_nom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Nominal electrical power output in [kW]. Defaults to <cite>p_th_nom</cite>.</p></li>
<li><p><strong>eta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Total efficiency of the CHP (without unit).</p></li>
<li><p><strong>lower_activation_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em><em> (</em><em>only adhered to in integer mode</em><em>)</em>) – <p>Must be in [0, 1]. Lower activation limit of the CHP as a
percentage of the rated power. When the CHP is in operation, its power
must be zero or between the lower activation limit and its rated
power.</p>
<ul>
<li><p><cite>lower_activation_limit = 0</cite>: Linear behavior</p></li>
<li><p><cite>lower_activation_limit = 1</cite>: Two-point controlled</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>CHPs offer sets of constraints for operation. In the <cite>convex</cite> mode the
following constraints and bounds are generated by the CHP:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}0 &amp;\geq&amp; p_{th\_heat} \geq -p_{th\_nom} \\
0 &amp;\geq&amp; p_{el} \geq -p_{el\_nom} \\
\frac{p_{el}}{p_{el\_nom}} &amp;=&amp; \frac{p_{th\_heat}}{p_{th\_nom}}\end{split}\]</div>
<ul class="simple">
<li><dl class="simple">
<dt>See also:</dt><dd><ul>
<li><p>pycity_scheduling.util.generic_constraints.LowerActivationLimit:
Generates additional constraints for the <cite>lower_activation_limit</cite> in <cite>integer</cite> mode.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.CombinedHeatPower.populate_model" title="pycity_scheduling.classes.CombinedHeatPower.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.CombinedHeatPower.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.CombinedHeatPower.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel.</p>
<p>Call both parents’ <cite>populate_model</cite> methods and set the upper bounds
of the thermal variables to <cite>self.p_th_nom</cite>, the lower bounds of the
electrical variables to <cite>-self.p_el_nom</cite> and the upper bounds to zero.
Also add constraints to bind electrical demand to thermal output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.CurtailableLoad">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">CurtailableLoad</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">p_el_nom</span></em>, <em class="sig-param"><span class="n">max_curtailment</span></em>, <em class="sig-param"><span class="n">max_low</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">min_full</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.CurtailableLoad" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.demand.electrical_demand.ElectricalDemand</span></code></p>
<p>Extension of pyCity_base class ElectricalDemand for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>p_el_nom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Nominal electric power in [kW].</p></li>
<li><p><strong>max_curtailment</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Maximal Curtailment of the load</p></li>
<li><p><strong>max_low</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Maximum number of timesteps the curtailable load can stay under
nominal load</p></li>
<li><p><strong>min_full</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Minimum number of timesteps the curtailable load has to stay at
nominal operation level when switching to the nominal operation
level</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>CLs offer sets of constraints for operation. In the <cite>convex</cite> mode the following
constraints and bounds are generated by the CL:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{el\_nom} * max\_curtailment \geq p_{el} \geq 0 \\
\sum_{j=i}^{i+max\_low+min\_full} p_{el\_j} \geq p_{el\_nom} *
(min\_full + max\_low * max\_curtailment)\end{split}\]</div>
<ul class="simple">
<li><p>The last constraint is replaced in integer mode with the following constraints:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{el} \geq p_{state} * p_{el\_nom} \\
\sum_{j=i}^{i+max\_low} p_{state\_j} \geq 1 \\
\sum_{j=i}^{i+min\_full-1} p_{state\_j} \geq
(p_{state\_i} - p_{state\_i-1}) * min\_full\end{split}\]</div>
<ul class="simple">
<li><p>These constraints take also the previous values before the current optimization
horizon into account using the current schedule. Values before <span class="math notranslate nohighlight">\(t=0\)</span> are
assumed to be perfect.</p></li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.CurtailableLoad.populate_model" title="pycity_scheduling.classes.CurtailableLoad.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.CurtailableLoad.update_model" title="pycity_scheduling.classes.CurtailableLoad.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.CurtailableLoad.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.CurtailableLoad.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel</p>
<p>Call parent’s <cite>populate_model</cite> method and set variables upper bounds to
the loadcurve and lower bounds to <cite>self.p_el_Min</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Uses integer variables for max_low and min_full constraints if necessary</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.CurtailableLoad.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.CurtailableLoad.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.DeferrableLoad">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">DeferrableLoad</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">p_el_nom</span></em>, <em class="sig-param"><span class="n">e_consumption</span></em>, <em class="sig-param"><span class="n">load_time</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">lt_pattern</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.DeferrableLoad" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.demand.electrical_demand.ElectricalDemand</span></code></p>
<p>Extension of pyCity_base class ElectricalDemand for scheduling purposes.</p>
<p>The Load will always run once in the op_horizon</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>p_el_nom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Nominal electric power in [kW].</p></li>
<li><p><strong>e_consumption</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Power to be consumed over the op_horizon in [kWh].</p></li>
<li><p><strong>load_time</strong> (<em>array of binaries</em><em>, </em><em>optional</em>) – Indicator when deferrable load can be turned on. Defaults to always.
<cite>load_time[t] == 0</cite>: device is off in t
<cite>load_time[t] == 1</cite>: device can be turned on in t
It must contain at least one <cite>0</cite> otherwise the model will become
infeasible. Its length has to be consistent with <cite>lt_pattern</cite>.</p></li>
<li><p><strong>lt_pattern</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Define how the <cite>load_time</cite> profile is to be used</p>
<ul>
<li><p><cite>None</cite> : Profile matches simulation horizon.</p></li>
<li><p>’daily’ : Profile matches one day.</p></li>
<li><p>’weekly’ : Profile matches one week.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError :</strong> – If <cite>lt_pattern</cite> does not match <cite>load_time</cite>.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>DLs offer sets of constraints for operation. In the <cite>convex</cite> mode the following
constraints and bounds are generated by the DL:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{el\_nom} \geq p_{el\_i} \geq 0, &amp; \quad \text{if} \quad lt\_pattern_i = 1  \\
p_{el\_i} = 0, &amp; \quad \text{else}\end{split}\]</div>
<div class="math notranslate nohighlight">
\[\sum_i p_{el\_i} * \Delta t = e_{consumption}\]</div>
<ul class="simple">
<li><p>The constraints are replaced in integer mode with the following constraints:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}\sum_i p_{state\_i} &amp;=&amp; 1 \\
runtime &amp;=&amp; \lfloor \frac{p_{el\_nom} * \Delta t}{e_{consumption}} \rceil \\
p_{el\_i} &amp;=&amp; p_{el\_nom} * \sum_{j=i-runtime+1}^{i} p_{state\_j} \\
p_{state\_i} &amp;=&amp; 0, \quad \text{if} \quad \sum_{j=i}^{i+runtime-1}
lt\_pattern_j = runtime \\\end{split}\]</div>
<ul class="simple">
<li><p>These constraints do not take the previous values before the current optimization
horizon into account. In the optimization horizon <span class="math notranslate nohighlight">\(e_{consumption}\)</span> always
has to be consumed.</p></li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.DeferrableLoad.get_objective" title="pycity_scheduling.classes.DeferrableLoad.get_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_objective</span></code></a>([coeff])</p></td>
<td><p>Objective function for entity level scheduling.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.DeferrableLoad.populate_model" title="pycity_scheduling.classes.DeferrableLoad.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.DeferrableLoad.update_model" title="pycity_scheduling.classes.DeferrableLoad.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.DeferrableLoad.get_objective">
<code class="sig-name descname">get_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coeff</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.DeferrableLoad.get_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function for entity level scheduling.</p>
<p>Return the objective function of the deferrable load weighted with
coeff. Quadratic term minimizing the deviation from the optimal
loadcurve.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coeff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Coefficient for the objective function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Objective function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ExpressionBase</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.DeferrableLoad.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.DeferrableLoad.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel</p>
<p>Call parent’s <cite>populate_model</cite> method and set the upper bounds to the
nominal power or zero depending on <cite>self.load_time</cite>. Also set a constraint
for the minimum load. If mode == <cite>integer</cite> add binary variables to model
load as one block that can be shifted in time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><dl class="simple">
<dt><cite>integer</cite><span class="classifier">Uses integer variables to restrict the DL to operate</span></dt><dd><p>at nominal load or no load and restricts the DL to consume
E_Min_Consumption when DL is started without returning to a no
load state</p>
</dd>
</dl>
</li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.DeferrableLoad.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.DeferrableLoad.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.ElectricalEntity">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">ElectricalEntity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ElectricalEntity" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.optimization_entity.OptimizationEntity</span></code></a></p>
<p>Base class for all electrical entities derived from OptimizationEntity.</p>
<p>This class provides functionality common to all electrical entities.
It adds variables for the electrical demand / supply of the entity to the
block.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use same constraints as convex mode</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>EEs add the <span class="math notranslate nohighlight">\(p_{el}\)</span> variable to the model. When not modified
by other classes, the following constraint is added:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[p_{el} \geq 0\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.ElectricalEntity.get_objective" title="pycity_scheduling.classes.ElectricalEntity.get_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_objective</span></code></a>([coeff])</p></td>
<td><p>Objective function for entity level scheduling.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.ElectricalEntity.populate_model" title="pycity_scheduling.classes.ElectricalEntity.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add entity block to pyomo ConcreteModel.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.ElectricalEntity.get_objective">
<code class="sig-name descname">get_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coeff</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ElectricalEntity.get_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function for entity level scheduling.</p>
<p>Return the objective function of the entity weighted with
coeff.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coeff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Coefficient for the objective function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Objective function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ExpressionBase</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.ElectricalEntity.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ElectricalEntity.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add entity block to pyomo ConcreteModel.</p>
<p>Places the block with the name of the entity in the ConcreteModel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : May use integer variables</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.ElectricalHeater">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">ElectricalHeater</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">p_th_nom</span></em>, <em class="sig-param"><span class="n">eta</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">lower_activation_limit</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ElectricalHeater" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating" title="pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating</span></code></a>, <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.electrical_heater.ElectricalHeater</span></code></p>
<p>Extension of pyCity_base class ElectricalHeater for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.Environment" title="pycity_scheduling.classes.Environment"><em>pycity_scheduling.classes.Environment</em></a>) – Common to all other objects. Includes time and weather instances.</p></li>
<li><p><strong>p_th_nom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Nominal thermal power output in [kW].</p></li>
<li><p><strong>eta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Efficiency of the electrical heater. Defaults to one.</p></li>
<li><p><strong>lower_activation_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em><em> (</em><em>only adhered to in integer mode</em><em>)</em>) – <p>Must be in [0, 1]. Lower activation limit of the electrical heater
as a percentage of the rated power. When the electrical heater is
in operation, its power must be zero or between the lower activation
limit and its rated power.</p>
<ul>
<li><p><cite>lower_activation_limit = 0</cite>: Linear behavior</p></li>
<li><p><cite>lower_activation_limit = 1</cite>: Two-point controlled</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>EHs offer sets of constraints for operation. In the <cite>convex</cite> mode the
following constraints and bounds are generated by the EH:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}0 \geq p_{th\_heat} &amp;\geq&amp; -p_{th\_nom} \\
\eta * p_{el} &amp;=&amp; - p_{th\_heat}\end{split}\]</div>
<ul class="simple">
<li><dl class="simple">
<dt>See also:</dt><dd><ul>
<li><p>pycity_scheduling.util.generic_constraints.LowerActivationLimit: Generates additional constraints for the
<cite>lower_activation_limit</cite> in <cite>integer</cite> mode.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.ElectricalHeater.populate_model" title="pycity_scheduling.classes.ElectricalHeater.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.ElectricalHeater.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ElectricalHeater.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel.</p>
<p>Call parent’s <cite>populate_model</cite> method and set thermal variables upper
bounds to <cite>self.p_th_nom</cite>. Also add constraint to bind electrical
demand to thermal output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.ElectricalVehicle">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">ElectricalVehicle</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">e_el_max</span></em>, <em class="sig-param"><span class="n">p_el_max_charge</span></em>, <em class="sig-param"><span class="n">p_el_max_discharge</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">soc_init</span><span class="o">=</span><span class="default_value">0.5</span></em>, <em class="sig-param"><span class="n">charging_time</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ct_pattern</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ElectricalVehicle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.battery.Battery" title="pycity_scheduling.classes.battery.Battery"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.battery.Battery</span></code></a></p>
<p>Class representing an electrical vehicle for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>e_el_max</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Electric capacity of the battery in [kWh].</p></li>
<li><p><strong>p_el_max_charge</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Maximum charging power in [kW].</p></li>
<li><p><strong>p_el_max_discharge</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Maximum discharging power in [kW]. Defaults to zero.</p></li>
<li><p><strong>soc_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Initial state of charge. Defaults to 50%.</p></li>
<li><p><strong>charging_time</strong> (<em>array of binaries</em><em>, </em><em>optional</em>) – <p>Indicator when electrical vehicle can be charged.</p>
<ul>
<li><p><cite>charging_time[t] == 0</cite>: EV cannot be charged in t</p></li>
<li><p><cite>charging_time[t] == 1</cite>: EV can be charged in t</p></li>
</ul>
<p>It must contain at least one <cite>0</cite> otherwise the model will become
infeasible. Its length has to be consistent with <cite>ct_pattern</cite>.
Defaults to only charge during night.</p>
</p></li>
<li><p><strong>ct_pattern</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Define how the <cite>charging_time</cite> profile is to be used.</p>
<ul>
<li><p><cite>None</cite> : Profile matches simulation horizon (default).</p></li>
<li><p>’daily’ : Profile matches one day.</p></li>
<li><p>’weekly’ : Profile matches one week.</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>EVs offer sets of constraints for operation. The <span class="math notranslate nohighlight">\(e_{el}\)</span> equivalence
constraint is replaced by the following constraint:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}e_{el} &amp;=&amp; e_{el\_previous} + (\eta * p_{el\_demand}
- (1 / \eta) * p_{el\_supply} - p_{el\_drive}) * \Delta t \\\end{split}\]</div>
<ul class="simple">
<li><p>The following constraints are added:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{el\_drive} \geq 0 \\
p_{el\_demand\_i} = p_{el\_supply} = 0,
&amp; \quad \text{if} \quad ct\_pattern_i = 0 \\
p_{el\_drive\_i} = 0, &amp; \quad \text{if} \quad ct\_pattern_i = 1 \\
e_{el\_i} = soc\_init * e_{el\_max}, &amp; \quad \text{if} \quad \sum_{j=0}^i ct\_pattern_j = 0 \\
e_{el\_i} = 0.2 * e_{el\_max}, &amp; \quad \text{else if} \quad ct\_pattern_i = 0 \\
e_{el\_i} = e_{el\_max}, &amp; \quad \text{else if} \quad ct\_pattern_i+1 = 0\end{split}\]</div>
<ul class="simple">
<li><p>The constraint for the parameter <cite>storage_end_equality</cite> is removed. Instead,
the EV needs to be fully charged at the end of the <cite>simu_horizon</cite> if parameter <cite>ct_pattern</cite>
is one at the end of the simulation horizon.</p></li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.ElectricalVehicle.get_objective" title="pycity_scheduling.classes.ElectricalVehicle.get_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_objective</span></code></a>([coeff])</p></td>
<td><p>Objective function for entity level scheduling.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.ElectricalVehicle.populate_model" title="pycity_scheduling.classes.ElectricalVehicle.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.ElectricalVehicle.update_model" title="pycity_scheduling.classes.ElectricalVehicle.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.ElectricalVehicle.get_objective">
<code class="sig-name descname">get_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coeff</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ElectricalVehicle.get_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function for entity level scheduling.</p>
<p>Return the objective function of the electric vehicle weighted with
coeff. Quadratic term with additional weights to reward charging the
vehicle earlier.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coeff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Coefficient for the objective function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Objective function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ExpressionBase</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.ElectricalVehicle.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ElectricalVehicle.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel</p>
<p>Call parent’s <cite>populate_model</cite> method. Replace coupling
constraints from Battery class with coupling constraints
of EV. Simulate power consumption while driving.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.ElectricalVehicle.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ElectricalVehicle.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.Environment">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">Environment</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timer</span></em>, <em class="sig-param"><span class="n">weather</span></em>, <em class="sig-param"><span class="n">prices</span></em>, <em class="sig-param"><span class="n">location</span><span class="o">=</span><span class="default_value">(50.76, 6.07)</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Environment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.environment.Environment</span></code></p>
<p>Extension of pyCity_base class Environment for scheduling purposes.</p>
</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.FixedLoad">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">FixedLoad</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">demand</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">annual_demand</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">profile_type</span><span class="o">=</span><span class="default_value">'H0'</span></em>, <em class="sig-param"><span class="n">single_family_house</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">total_nb_occupants</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">randomize_appliances</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">light_configuration</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">occupancy</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">do_normalization</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">method_3_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">method_4_type</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">prev_heat_dev</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">app_filename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">light_filename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">season_light_mod</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">light_mod_fac</span><span class="o">=</span><span class="default_value">0.25</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.FixedLoad" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.demand.electrical_demand.ElectricalDemand</span></code></p>
<p>Extension of pyCity_base class ElectricalDemand for scheduling purposes.</p>
<p>As for all uncontrollable loads, the <cite>p_el_schedule</cite> contains the forecast
of the load.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – <p>Defaults to method zero.</p>
<ul>
<li><p>0 : provide load curve directly</p></li>
<li><p>1 : standard load profile (for households)</p></li>
<li><p>2 : stochastic electrical load model</p></li>
<li><p>3 : annual profile based on measured weekly profiles (non-residential)</p></li>
<li><p>4 : annual profile based on measured annual profiles (non-residential)</p></li>
</ul>
</p></li>
<li><p><strong>demand</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.19)"><em>numpy.ndarray</em></a><em>, </em><em>optional</em>) – Demand for all investigated time steps in [kW] when using <cite>method=0</cite>.</p></li>
<li><p><strong>annual_demand</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Required for SLP and recommended for method 2.
Defines the annual electrical demand in [kWh].
If method 2 is chosen but no value is given, a standard value for
Germany (<a class="reference external" href="https://lena.sachsen-anhalt.de/fileadmin/Bibliothek/Sonstige_Webprojekte/Lena/Pressemitteilungen/">https://lena.sachsen-anhalt.de/fileadmin/Bibliothek/Sonstige_Webprojekte/Lena/Pressemitteilungen/</a>
Stromspiegel/Stromspiegel2014_Medienblatt.pdf, accessed on 2020/09/28) is used.</p></li>
<li><p><strong>profile_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <ul>
<li><p>H0 : Household</p></li>
<li><p>L0 : Farms</p></li>
<li><p>L1 : Farms with breeding / cattle</p></li>
<li><p>L2 : Farms without cattle</p></li>
<li><p>G0 : Business (general)</p></li>
<li><p>G1 : Business (workingdays 8:00 AM - 6:00 PM)</p></li>
<li><p>G2 : Business with high loads in the evening</p></li>
<li><p>G3 : Business (24 hours)</p></li>
<li><p>G4 : Shops / Barbers</p></li>
<li><p>G5 : Bakery</p></li>
<li><p>G6 : Weekend operation</p></li>
</ul>
</p></li>
<li><p><strong>total_nb_occupants</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Number of people living in the household for <cite>method=2</cite>.</p></li>
<li><p><strong>randomize_appliances</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – <p>Randomization of appliances for <cite>method=2</cite>. Defaults to <cite>True</cite>.</p>
<ul>
<li><p>True : distribute installed appliances randomly</p></li>
<li><p>False : use the standard distribution</p></li>
</ul>
</p></li>
<li><p><strong>light_configuration</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – There are 100 light bulb configurations predefined for the
stochastic model when using <cite>method=2</cite>. Defaults to zero.
A value between 0 and 100 should be provided.</p></li>
<li><p><strong>occupancy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Occupancy given at 10-minute intervals for a full year for <cite>method=2</cite>.</p></li>
<li><p><strong>do_normalization</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Defines, if stochastic profile (<cite>method=2</cite>) should be
normalized to given annual_demand value. Defaults to <cite>False</cite>.
If set to <cite>False</cite>, annual el. demand depends on stochastic el. load
profile generation. If set to <cite>True</cite>, does normalization with
annual_demand.</p></li>
<li><p><strong>method_3_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Defines type of profile for method=3. Defaults to <cite>None</cite>.
Options:</p>
<ul>
<li><p>’food_pro’: Food production</p></li>
<li><p>’metal’: Metal company</p></li>
<li><p>’rest’: Restaurant (with large cooling load)</p></li>
<li><p>’sports’: Sports hall</p></li>
<li><p>’repair’: Repair / metal shop</p></li>
</ul>
</p></li>
<li><p><strong>method_4_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Defines type of profile for method=4. Defaults to <cite>None</cite>.</p>
<ul>
<li><p>’metal_1’ : Metal company with smooth profile</p></li>
<li><p>’metal_2’ : Metal company with fluctuation in profile</p></li>
<li><p>’warehouse’ : Warehouse</p></li>
</ul>
</p></li>
<li><p><strong>prev_heat_dev</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Defines, if heating devices should be prevented within chosen
appliances for <cite>method=2</cite>. Defaults to <cite>False</cite>.
If set to True, DESWH, E-INST, Electric shower, Storage heaters
and Other electric space heating are set to zero.</p></li>
<li><p><strong>app_filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – Path to Appliances file for <cite>method=2</cite>. Defaults to <cite>None</cite>.
If set to None, uses default file Appliances.csv in
/inputs/stochastic_electrical_load/.</p></li>
<li><p><strong>light_filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – Path to Lighting configuration file for <cite>method=2</cite>. Defaults to <cite>None</cite>.
If set to None, uses default file Appliances.csv in
/inputs/stochastic_electrical_load/.</p></li>
<li><p><strong>season_light_mod</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Defines, if cosine-wave should be used to strengthen seasonal
influence on lighting. Defaults to <cite>False</cite>.
If True, enlarges lighting power demand in winter month and reduces
lighting power demand in summer month.</p></li>
<li><p><strong>light_mod_fac</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Define factor, related to maximal lighting power, which is used
to implement seasonal influence. Defaults to 25%.
Only relevant, if <cite>season_light_mod</cite> == True</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>Standard load profiles, for instance for Germany, can be found here:
<a class="reference external" href="https://www.bdew.de/energie/standardlastprofile-strom/">https://www.bdew.de/energie/standardlastprofile-strom/</a> (accessed on 2020/09/28)</p></li>
<li><p>Average German electricity consumption data per household can be found here:
<a class="reference external" href="https://lena.sachsen-anhalt.de/fileadmin/Bibliothek/Sonstige_Webprojekte/Lena/Pressemitteilungen/">https://lena.sachsen-anhalt.de/fileadmin/Bibliothek/Sonstige_Webprojekte/Lena/Pressemitteilungen/</a>
Stromspiegel/Stromspiegel2014_Medienblatt.pdf (accessed on 2020/09/28)</p></li>
<li><p>The following constraint is added for removing the bounds from EE:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[p_{el} = load\_curve\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.FixedLoad.new_schedule" title="pycity_scheduling.classes.FixedLoad.new_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">new_schedule</span></code></a>(schedule)</p></td>
<td><p>Create a new schedule with default values.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.FixedLoad.reset" title="pycity_scheduling.classes.FixedLoad.reset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset</span></code></a>([schedule])</p></td>
<td><p>Reset all values of specified schedule.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.FixedLoad.update_model" title="pycity_scheduling.classes.FixedLoad.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.FixedLoad.update_schedule" title="pycity_scheduling.classes.FixedLoad.update_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_schedule</span></code></a>()</p></td>
<td><p>Update the schedule with the scheduling model solution.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.FixedLoad.new_schedule">
<code class="sig-name descname">new_schedule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.FixedLoad.new_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new schedule with default values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of new schedule.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.FixedLoad.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.FixedLoad.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all values of specified schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specify which schedule to reset.</p>
<ul class="simple">
<li><p><cite>None</cite> : Resets all schedules</p></li>
<li><p>’default’ : Resets normal schedule</p></li>
<li><p>’ref’ : Resets reference schedule</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.FixedLoad.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.FixedLoad.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.FixedLoad.update_schedule">
<code class="sig-name descname">update_schedule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.FixedLoad.update_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the schedule with the scheduling model solution.</p>
<p>Retrieve the solution from the scheduling model and write it to the
schedule. The model must be optimal. The time / position of the
solution in the schedule is determined by <cite>self.timer.current_timestep</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.HeatPump">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">HeatPump</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">p_th_nom</span></em>, <em class="sig-param"><span class="n">cop</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">eta</span><span class="o">=</span><span class="default_value">0.36</span></em>, <em class="sig-param"><span class="n">t_max</span><span class="o">=</span><span class="default_value">55.0</span></em>, <em class="sig-param"><span class="n">lower_activation_limit</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">t_flow</span><span class="o">=</span><span class="default_value">55.0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.HeatPump" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating" title="pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating</span></code></a>, <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.heat_pump.Heatpump</span></code></p>
<p>Extension of pyCity_base class Heatpump for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common to all other objects. Includes time and weather instances.</p></li>
<li><p><strong>p_th_nom</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Nominal thermal power of the heat pump in [kW].</p></li>
<li><p><strong>cop</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.19)"><em>numpy.ndarray</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The heat pump’s coefficient of performance (without unit)
If array, it must provide the coefficient of performance (cop) for
each time step in the simulation horizon.
If int or float, a constant cop over the whole horizon is assumed.
If omitted, an air-water heat pump is assumed and the cop is
calculated with the ambient air temperature.</p></li>
<li><p><strong>eta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The Carnot efficiency of the heat pump.
If cop is omitted, eta is used to calculate the cop based on T_sink and T_source
according to: cop = eta * T_sink * (T_sink - T_source) with T_sink and T_source in Kelvin</p></li>
<li><p><strong>t_max</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – The heat pump’s maximum provided temperature in °C</p></li>
<li><p><strong>lower_activation_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em><em> (</em><em>only adhered to in integer mode</em><em>)</em>) – <p>Must be in [0, 1]. Lower activation limit of the heat pump as a
percentage of the rated power. When the heat pump is in operation, its
power must be zero or between the lower activation limit and its
rated power.</p>
<ul>
<li><p><cite>lower_activation_limit = 0</cite>: Linear behavior</p></li>
<li><p><cite>lower_activation_limit = 1</cite>: Two-point controlled</p></li>
</ul>
</p></li>
<li><p><strong>t_flow</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – T_sink temperature delivered by HP in °C.
Is used for cop calculation if cop is omitted.
Note that t_flow &lt;= t_max must hold.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>HPs offer sets of constraints for operation. In the <cite>convex</cite> mode the
following constraints and bounds are generated by the HP:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}0 \geq p_{th\_heat} &amp;\geq&amp; -p_{th\_nom} \\
cop * p_{el} &amp;=&amp; - p_{th\_heat}\end{split}\]</div>
<ul class="simple">
<li><dl class="simple">
<dt>See also:</dt><dd><ul>
<li><p>pycity_scheduling.util.generic_constraints.LowerActivationLimit:
Generates additional constraints for the <cite>lower_activation_limit</cite> in <cite>integer</cite> mode.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.HeatPump.populate_model" title="pycity_scheduling.classes.HeatPump.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.HeatPump.update_model" title="pycity_scheduling.classes.HeatPump.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.HeatPump.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.HeatPump.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel.</p>
<p>Call parent’s <cite>populate_model</cite> method and set thermal variables lower
bounds to <cite>-self.p_th_nom</cite> and the upper bounds to zero. Also add
constraint to bind electrical demand to thermal output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.HeatPump.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.HeatPump.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.OptimizationEntity">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">OptimizationEntity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class for all optimization entities.</p>
<p>This class provides functionality common to all entities which take part
in the scheduling optimization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p>
</dd>
<dt class="field-even">Attributes</dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.op_horizon" title="pycity_scheduling.classes.OptimizationEntity.op_horizon"><code class="xref py py-obj docutils literal notranslate"><span class="pre">op_horizon</span></code></a></dt><dd><p>Number of time steps in a scheduling period.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.op_slice" title="pycity_scheduling.classes.OptimizationEntity.op_slice"><code class="xref py py-obj docutils literal notranslate"><span class="pre">op_slice</span></code></a></dt><dd><p>Slice to select values of current scheduling from whole horizon.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.op_time_vec" title="pycity_scheduling.classes.OptimizationEntity.op_time_vec"><code class="xref py py-obj docutils literal notranslate"><span class="pre">op_time_vec</span></code></a></dt><dd><p>Iterator over scheduling period.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.schedule" title="pycity_scheduling.classes.OptimizationEntity.schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">schedule</span></code></a></dt><dd><p>The current loaded schedule.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.simu_horizon" title="pycity_scheduling.classes.OptimizationEntity.simu_horizon"><code class="xref py py-obj docutils literal notranslate"><span class="pre">simu_horizon</span></code></a></dt><dd><p>Number of time steps in the whole simulation horizon.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.time_slot" title="pycity_scheduling.classes.OptimizationEntity.time_slot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">time_slot</span></code></a></dt><dd><p>Length of a time step as a portion of an hour.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.timestep" title="pycity_scheduling.classes.OptimizationEntity.timestep"><code class="xref py py-obj docutils literal notranslate"><span class="pre">timestep</span></code></a></dt><dd><p>Time step indicating the current scheduling.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.copy_schedule" title="pycity_scheduling.classes.OptimizationEntity.copy_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy_schedule</span></code></a>([dst, src, name])</p></td>
<td><p>Copy values of one schedule in another schedule.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.get_all_entities" title="pycity_scheduling.classes.OptimizationEntity.get_all_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_all_entities</span></code></a>()</p></td>
<td><p>Yield all entities.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.get_entities" title="pycity_scheduling.classes.OptimizationEntity.get_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_entities</span></code></a>()</p></td>
<td><p>Yield all lowest contained entities.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.get_lower_entities" title="pycity_scheduling.classes.OptimizationEntity.get_lower_entities"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_lower_entities</span></code></a>()</p></td>
<td><p>Yield all lower-level entities.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.get_objective" title="pycity_scheduling.classes.OptimizationEntity.get_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_objective</span></code></a>([coeff])</p></td>
<td><p>Objective function for entity level scheduling.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.load_schedule" title="pycity_scheduling.classes.OptimizationEntity.load_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_schedule</span></code></a>(schedule)</p></td>
<td><p>Copy values of one schedule in another schedule.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.load_schedule_into_model" title="pycity_scheduling.classes.OptimizationEntity.load_schedule_into_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_schedule_into_model</span></code></a>([schedule])</p></td>
<td><p>Overwrites the values in the entity model with the values in the schedule.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.new_schedule" title="pycity_scheduling.classes.OptimizationEntity.new_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">new_schedule</span></code></a>(schedule)</p></td>
<td><p>Create a new schedule with default values.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.new_var" title="pycity_scheduling.classes.OptimizationEntity.new_var"><code class="xref py py-obj docutils literal notranslate"><span class="pre">new_var</span></code></a>(name[, dtype, func])</p></td>
<td><p>Create a new entry and empty schedule for variable with specified name.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.populate_model" title="pycity_scheduling.classes.OptimizationEntity.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add entity block to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.reset" title="pycity_scheduling.classes.OptimizationEntity.reset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset</span></code></a>([schedule])</p></td>
<td><p>Reset all values of specified schedule.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.set_objective" title="pycity_scheduling.classes.OptimizationEntity.set_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_objective</span></code></a>(objective)</p></td>
<td><p>Set a new objective to be returned by get_objective.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.update_model" title="pycity_scheduling.classes.OptimizationEntity.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.OptimizationEntity.update_schedule" title="pycity_scheduling.classes.OptimizationEntity.update_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_schedule</span></code></a>()</p></td>
<td><p>Update the schedule with the scheduling model solution.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.copy_schedule">
<code class="sig-name descname">copy_schedule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dst</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">src</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.copy_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy values of one schedule in another schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dst</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of schedule to insert values into.
If <cite>None</cite>, use current schedule.</p></li>
<li><p><strong>src</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of schedule to copy values from.
If <cite>None</cite>, use current schedule.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of variable to copy sub schedule of.
If <cite>None</cite>, copy all variables between schedules.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.get_all_entities">
<code class="sig-name descname">get_all_entities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.get_all_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>All contained entities and sub-entities.</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.get_entities">
<code class="sig-name descname">get_entities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.get_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all lowest contained entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p>Lowest contained entities or <cite>self</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.get_lower_entities">
<code class="sig-name descname">get_lower_entities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.get_lower_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield all lower-level entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>All contained entities.</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.get_objective">
<code class="sig-name descname">get_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coeff</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.get_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function for entity level scheduling.</p>
<p>Return the objective function of the entity weighted with
coeff.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coeff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Coefficient for the objective function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Objective function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ExpressionBase</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.load_schedule">
<code class="sig-name descname">load_schedule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.load_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy values of one schedule in another schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – </p></li>
<li><p><strong>of schedule to set as current schedule.</strong> (<em>Name</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.load_schedule_into_model">
<code class="sig-name descname">load_schedule_into_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.load_schedule_into_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Overwrites the values in the entity model with the values in the schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of schedule to load values from.
If <cite>None</cite>, use current schedule.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.new_schedule">
<code class="sig-name descname">new_schedule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.new_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new schedule with default values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of new schedule.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.new_var">
<code class="sig-name descname">new_var</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">dtype=&lt;class 'numpy.float64'&gt;</em>, <em class="sig-param">func=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.new_var" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new entry and empty schedule for variable with specified name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name to access new variable with.</p></li>
<li><p><strong>dtype</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.dtype.html#numpy.dtype" title="(in NumPy v1.19)"><em>numpy.dtype</em></a><em>, </em><em>optional</em>) – Data type which should be used for new schedule.</p></li>
<li><p><strong>func</strong> (<em>Callable</em><em>[</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>]</em><em>, </em><em>Any</em><em>]</em><em>, </em><em>optional</em>) – Function to generate schedule with.
If <cite>None</cite>, schedule is generated with values of variables.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.op_horizon">
<em class="property">property </em><code class="sig-name descname">op_horizon</code><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.op_horizon" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of time steps in a scheduling period.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.op_slice">
<em class="property">property </em><code class="sig-name descname">op_slice</code><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.op_slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Slice to select values of current scheduling from whole horizon.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.op_time_vec">
<em class="property">property </em><code class="sig-name descname">op_time_vec</code><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.op_time_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterator over scheduling period.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add entity block to pyomo ConcreteModel.</p>
<p>Places the block with the name of the entity in the ConcreteModel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : May use integer variables</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all values of specified schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specify which schedule to reset.</p>
<ul class="simple">
<li><p><cite>None</cite> : Resets all schedules</p></li>
<li><p>’default’ : Resets normal schedule</p></li>
<li><p>’ref’ : Resets reference schedule</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.schedule">
<em class="property">property </em><code class="sig-name descname">schedule</code><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>The current loaded schedule.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.set_objective">
<code class="sig-name descname">set_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">objective</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.set_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a new objective to be returned by get_objective.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>objective</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – <p>Objective for the scheduling.</p>
<ul class="simple">
<li><p>’none’ : No objective (leave all flexibility to other participants).</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.simu_horizon">
<em class="property">property </em><code class="sig-name descname">simu_horizon</code><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.simu_horizon" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of time steps in the whole simulation horizon.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pycity_scheduling.classes.OptimizationEntity.static_entity_id">
<code class="sig-name descname">static_entity_id</code><em class="property"> = 0</em><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.static_entity_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.time_slot">
<em class="property">property </em><code class="sig-name descname">time_slot</code><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.time_slot" title="Permalink to this definition">¶</a></dt>
<dd><p>Length of a time step as a portion of an hour.</p>
<p class="rubric">Examples</p>
<p>time step length = 60 mins =&gt; time_slot = 1
time step length = 15 mins =&gt; time_slot = 0.25</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.timestep">
<em class="property">property </em><code class="sig-name descname">timestep</code><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.timestep" title="Permalink to this definition">¶</a></dt>
<dd><p>Time step indicating the current scheduling.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.OptimizationEntity.update_schedule">
<code class="sig-name descname">update_schedule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.OptimizationEntity.update_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the schedule with the scheduling model solution.</p>
<p>Retrieve the solution from the scheduling model and write it to the
schedule. The model must be optimal. The time / position of the
solution in the schedule is determined by <cite>self.timer.current_timestep</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.Photovoltaic">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">Photovoltaic</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">method</span></em>, <em class="sig-param"><span class="n">area</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">peak_power</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">eta_noct</span><span class="o">=</span><span class="default_value">0.18</span></em>, <em class="sig-param"><span class="n">radiation_noct</span><span class="o">=</span><span class="default_value">1000.0</span></em>, <em class="sig-param"><span class="n">t_cell_noct</span><span class="o">=</span><span class="default_value">45.0</span></em>, <em class="sig-param"><span class="n">t_ambient_noct</span><span class="o">=</span><span class="default_value">20.0</span></em>, <em class="sig-param"><span class="n">alpha_noct</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">beta</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">gamma</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">tau_alpha</span><span class="o">=</span><span class="default_value">0.9</span></em>, <em class="sig-param"><span class="n">force_renewables</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Photovoltaic" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.photovoltaic.PV</span></code></p>
<p>Extension of pyCity_base class PV for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a>) – <ul>
<li><p>0 : Calculate PV power based on an area in m^2 equipped with PV panels</p></li>
<li><p>1 : Calculate PV power based on the installed PV peak power in kWp</p></li>
</ul>
</p></li>
<li><p><strong>area</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – PV unit installation area in m^2 for <cite>method=0</cite>.</p></li>
<li><p><strong>peak_power</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – PV peak power installation in kWp for <cite>method=1</cite>.</p></li>
<li><p><strong>eta_noct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Electrical efficiency at NOCT conditions (without unit) for <cite>method=0</cite>.
NOCT conditions: See manufacturer’s data sheets or
Duffie, Beckman - Solar Engineering of Thermal Processes (4th ed.), page 759</p></li>
<li><p><strong>radiation_noct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Nominal solar radiation at NOCT conditions (in W/m^2)
NOCT conditions: See manufacturer’s data sheets or
Duffie, Beckman - Solar Engineering of Thermal Processes (4th ed.), page 759</p></li>
<li><p><strong>t_cell_noct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Nominal cell temperature at NOCT conditions (in degree Celsius)
NOCT conditions: See manufacturer’s data sheets or
Duffie, Beckman - Solar Engineering of Thermal Processes (4th ed.), page 759</p></li>
<li><p><strong>t_ambient_noct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Nominal ambient air temperature at NOCT conditions (in degree Celsius)
NOCT conditions: See manufacturer’s data sheets or
Duffie, Beckman - Solar Engineering of Thermal Processes (4th ed.), page 759</p></li>
<li><p><strong>alpha_noct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Temperature coefficient at NOCT conditions (without unit)
NOCT conditions: See manufacturer’s data sheets or
Duffie, Beckman - Solar Engineering of Thermal Processes (4th ed.), page 759</p></li>
<li><p><strong>beta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Slope, the angle (in degree) between the plane of the surface in
question and the horizontal. 0 &lt;= beta &lt;= 180. If beta &gt; 90, the
surface faces downwards.</p></li>
<li><p><strong>gamma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Surface azimuth angle. The deviation of the projection on a
horizontal plane of the normal to the surface from the local
meridian, with zero due south, east negative, and west positive.
-180 &lt;= gamma &lt;= 180</p></li>
<li><p><strong>tau_alpha</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Optical properties of the PV unit. Product of absorption and
transmission coeffients.
According to Duffie, Beckman - Solar Engineering of Thermal
Processes (4th ed.), page 758, this value is typically close to 0.9</p></li>
<li><p><strong>force_renewables</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – <cite>True</cite> if generation may not be reduced for optimization purposes.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The following constraint is added for removing the bounds from EE:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{el} &amp;=&amp; -p_{el\_supply}, &amp; \quad \text{if force_renewables} \\
0 \geq p_{el} &amp;\geq&amp; -p_{el\_supply} , &amp; \quad \text{else}\end{split}\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Photovoltaic.get_objective" title="pycity_scheduling.classes.Photovoltaic.get_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_objective</span></code></a>([coeff])</p></td>
<td><p>Objective function of the Photovoltaic.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Photovoltaic.populate_model" title="pycity_scheduling.classes.Photovoltaic.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add entity block to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Photovoltaic.update_model" title="pycity_scheduling.classes.Photovoltaic.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.Photovoltaic.get_objective">
<code class="sig-name descname">get_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coeff</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Photovoltaic.get_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function of the Photovoltaic.</p>
<p>Return the objective function of the photovoltaic weighted
with <cite>coeff</cite>. Depending on <cite>self.force_renewables</cite> leave objective
function empty or build quadratic objective function to minimize
discrepancy between available power and produced power.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coeff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Coefficient for the objective function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Objective function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ExpressionBase</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Photovoltaic.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Photovoltaic.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add entity block to pyomo ConcreteModel.</p>
<p>Places the block with the name of the entity in the ConcreteModel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : May use integer variables</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Photovoltaic.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Photovoltaic.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.Prices">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">Prices</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timer</span></em>, <em class="sig-param"><span class="n">da_prices</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tou_prices</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">co2_prices</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">feedin_factor</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Prices" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.prices.Prices</span></code></p>
<p>Extension of pyCity_base class Prices for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timer</strong> (<a class="reference internal" href="#pycity_scheduling.classes.timer.Timer" title="pycity_scheduling.classes.timer.Timer"><em>Timer</em></a>) – Timer instance for generating needed prices.</p></li>
<li><p><strong>da_prices</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Day-ahead prices for each timestep in the <cite>simu_horizon</cite>
in [ct/kWh].</p></li>
<li><p><strong>tou_prices</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Time-of-use prices for each timestep in the <cite>simu_horizon</cite>
in [ct/kWh].</p></li>
<li><p><strong>co2_prices</strong> (<em>array_like</em><em>, </em><em>optional</em>) – CO2 emissions for each timestep in the <cite>simu_horizon</cite> in [g/kWh].</p></li>
<li><p><strong>feedin_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Factor which is multiplied to the prices for feed-in revenue.
Should be in [0,1], as prices for feed-in are usually lower than
for consumption.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>If prices are loaded automatically, the simulation period must lie within a single year.</p></li>
<li><p>CO2 emissions and day-ahead prices are currently available for the year 2015 only.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>co2_price_cache</strong></dt><dd></dd>
<dt><strong>da_price_cache</strong></dt><dd></dd>
<dt><strong>tou_price_cache</strong></dt><dd></dd>
<dt><strong>tou_price_cache_year</strong></dt><dd></dd>
</dl>
</dd>
</dl>
<dl class="py attribute">
<dt id="pycity_scheduling.classes.Prices.co2_price_cache">
<code class="sig-name descname">co2_price_cache</code><em class="property"> = None</em><a class="headerlink" href="#pycity_scheduling.classes.Prices.co2_price_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pycity_scheduling.classes.Prices.da_price_cache">
<code class="sig-name descname">da_price_cache</code><em class="property"> = None</em><a class="headerlink" href="#pycity_scheduling.classes.Prices.da_price_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pycity_scheduling.classes.Prices.tou_price_cache">
<code class="sig-name descname">tou_price_cache</code><em class="property"> = None</em><a class="headerlink" href="#pycity_scheduling.classes.Prices.tou_price_cache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="pycity_scheduling.classes.Prices.tou_price_cache_year">
<code class="sig-name descname">tou_price_cache_year</code><em class="property"> = None</em><a class="headerlink" href="#pycity_scheduling.classes.Prices.tou_price_cache_year" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.SpaceCooling">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">SpaceCooling</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">loadcurve</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">living_area</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">specific_demand</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">profile_type</span><span class="o">=</span><span class="default_value">'HEF'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.SpaceCooling" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling" title="pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.demand.space_cooling.SpaceCooling</span></code></p>
<p>Extension of pyCity_base class SpaceCooling for scheduling purposes.</p>
<p>As for all uncontrollable loads, the <cite>p_th_schedule</cite> contains the forecast
of the load.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<em>Environment object</em>) – Common to all other objects. Includes time and weather instances</p></li>
<li><p><strong>method</strong> (<em>integer</em><em>, </em><em>optional</em>) – <ul>
<li><p><cite>0</cite> : Provide load curve directly</p></li>
<li><p><cite>1</cite> : Use thermal standard load profile (not implemented yet!)</p></li>
</ul>
</p></li>
<li><p><strong>loadcurve</strong> (<em>Array-like</em><em>, </em><em>optional</em>) – Load curve for all investigated time steps
Requires <cite>method=0</cite></p></li>
<li><p><strong>living_area</strong> (<em>Float</em><em>, </em><em>optional</em>) – Living area of the apartment in m^2
Requires <cite>method=1</cite></p></li>
<li><p><strong>specific_demand</strong> (<em>Float</em><em>, </em><em>optional</em>) – Specific thermal demand of the building in kWh/(m^2 a)
Requires <cite>method=1</cite></p></li>
<li><p><strong>profile_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – Thermal SLP profile name
Requires <cite>method=1</cite>
- <cite>HEF</cite> : Single family household
- <cite>HMF</cite> : Multi family household
- <cite>GBA</cite> : Bakeries
- <cite>GBD</cite> : Other services
- <cite>GBH</cite> : Accomodations
- <cite>GGA</cite> : Restaurants
- <cite>GGB</cite> : Gardening
- <cite>GHA</cite> : Retailers
- <cite>GHD</cite> : Summed load profile business, trade and services
- <cite>GKO</cite> : Banks, insurances, public institutions
- <cite>GMF</cite> : Household similar businesses
- <cite>GMK</cite> : Automotive
- <cite>GPD</cite> : Paper and printing
- <cite>GWA</cite> : Laundries</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The following constraint is added for removing the bounds from the TEC:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[p_{th\_cool} = load\_curve\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.SpaceCooling.new_schedule" title="pycity_scheduling.classes.SpaceCooling.new_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">new_schedule</span></code></a>(schedule)</p></td>
<td><p>Create a new schedule with default values.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.SpaceCooling.reset" title="pycity_scheduling.classes.SpaceCooling.reset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset</span></code></a>([schedule])</p></td>
<td><p>Reset all values of specified schedule.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.SpaceCooling.update_model" title="pycity_scheduling.classes.SpaceCooling.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.SpaceCooling.update_schedule" title="pycity_scheduling.classes.SpaceCooling.update_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_schedule</span></code></a>()</p></td>
<td><p>Update the schedule with the scheduling model solution.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.SpaceCooling.new_schedule">
<code class="sig-name descname">new_schedule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.SpaceCooling.new_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new schedule with default values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of new schedule.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.SpaceCooling.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.SpaceCooling.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all values of specified schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specify which schedule to reset.</p>
<ul class="simple">
<li><p><cite>None</cite> : Resets all schedules</p></li>
<li><p>’default’ : Resets normal schedule</p></li>
<li><p>’ref’ : Resets reference schedule</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.SpaceCooling.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.SpaceCooling.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel.</p>
<p>Set variable bounds to equal the given demand, as pure space cooling does
not provide any flexibility.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.SpaceCooling.update_schedule">
<code class="sig-name descname">update_schedule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.SpaceCooling.update_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the schedule with the scheduling model solution.</p>
<p>Retrieve the solution from the scheduling model and write it to the
schedule. The model must be optimal. The time / position of the
solution in the schedule is determined by <cite>self.timer.current_timestep</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.SpaceHeating">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">SpaceHeating</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">loadcurve</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">living_area</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">specific_demand</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">profile_type</span><span class="o">=</span><span class="default_value">'HEF'</span></em>, <em class="sig-param"><span class="n">zone_parameters</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t_m_init</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ventilation</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">t_cooling_set</span><span class="o">=</span><span class="default_value">200</span></em>, <em class="sig-param"><span class="n">t_heating_set</span><span class="o">=</span><span class="default_value">- 50</span></em>, <em class="sig-param"><span class="n">occupancy</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">appliances</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">lighting</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.SpaceHeating" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating" title="pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.demand.space_heating.SpaceHeating</span></code></p>
<p>Extension of pyCity_base class SpaceHeating for scheduling purposes.</p>
<p>As for all uncontrollable loads, the <cite>p_th_heat_schedule</cite> contains the forecast
of the load.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – common to all other objects, includes time and weather instances</p></li>
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – <ul>
<li><p>0 : Provide load curve directly</p></li>
<li><p>1 : Use thermal standard load profile</p></li>
<li><p>2 : Use ISO 13790 standard to compute thermal load</p></li>
</ul>
</p></li>
<li><p><strong>loadcurve</strong> (<em>numpy.ndarray of float</em><em>, </em><em>optional</em>) – load curve for all investigated time steps in [kW]
requires <cite>method=0</cite>.</p></li>
<li><p><strong>living_area</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – living area of the apartment in m2
requires <cite>method=1</cite></p></li>
<li><p><strong>specific_demand</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – specific thermal demand of the building in [kWh /(m2*a)]
requires <cite>method=1</cite></p></li>
<li><p><strong>profile_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – thermal SLP profile name
requires <cite>method=1</cite>
- “HEF” : Single family household
- “HMF” : Multi family household
- “GBA” : Bakeries
- “GBD” : Other services
- “GBH” : Accomodations
- “GGA” : Restaurants
- “GGB” : Gardening
- “GHA” : Retailers
- “GHD” : Summed load profile business, trade and services
- “GKO” : Banks, insurances, public institutions
- “GMF” : Household similar businesses
- “GMK” : Automotive
- “GPD” : Paper and printing
- “GWA” : Laundries</p></li>
<li><p><strong>zone_parameters</strong> (<em>ZoneParameters object</em><em>, </em><em>optional</em>) – parameters of the building (floor area, building class, etc.) for <cite>method=2</cite>.</p></li>
<li><p><strong>t_m_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Initial temperature of the internal heat capacity in [°C] for <cite>method=2</cite>.</p></li>
<li><p><strong>ventilation</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Ventilation rate in [1/h] for <cite>method=2</cite>.</p></li>
<li><p><strong>t_cooling_set</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Cooling starts if the room temperature exceeds this value for <cite>method=2</cite>.</p></li>
<li><p><strong>t_heating_set</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Heating starts if the room temperature drops below this value for <cite>method=2</cite>.</p></li>
<li><p><strong>occupancy</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Full year occupancy profile for <cite>method=2</cite>.</p></li>
<li><p><strong>appliances</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Internal gains from electrical appliances in [W] for <cite>method=2</cite>.</p></li>
<li><p><strong>lighting</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Internal gains from lighting in Watt for <cite>method=2</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The thermal standard load profile is based on the dissertation of Mark Hellwig
“Entwicklung und Anwendung parametrisierter Standard-Lastprofile”,
TU München, Germany, 2003: <a class="reference external" href="http://mediatum.ub.tum.de/doc/601557/601557.pdf">http://mediatum.ub.tum.de/doc/601557/601557.pdf</a> (accessed on 2020/09/28)</p></li>
<li><p>The following constraint is added for removing the bounds from TEH:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[p_{th\_heat} = load\_curve\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.SpaceHeating.new_schedule" title="pycity_scheduling.classes.SpaceHeating.new_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">new_schedule</span></code></a>(schedule)</p></td>
<td><p>Create a new schedule with default values.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.SpaceHeating.reset" title="pycity_scheduling.classes.SpaceHeating.reset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset</span></code></a>([schedule])</p></td>
<td><p>Reset all values of specified schedule.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.SpaceHeating.update_model" title="pycity_scheduling.classes.SpaceHeating.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.SpaceHeating.update_schedule" title="pycity_scheduling.classes.SpaceHeating.update_schedule"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_schedule</span></code></a>()</p></td>
<td><p>Update the schedule with the scheduling model solution.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.SpaceHeating.new_schedule">
<code class="sig-name descname">new_schedule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.SpaceHeating.new_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new schedule with default values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Name of new schedule.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.SpaceHeating.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schedule</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.SpaceHeating.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset all values of specified schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schedule</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specify which schedule to reset.</p>
<ul class="simple">
<li><p><cite>None</cite> : Resets all schedules</p></li>
<li><p>’default’ : Resets normal schedule</p></li>
<li><p>’ref’ : Resets reference schedule</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.SpaceHeating.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.SpaceHeating.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel.</p>
<p>Set variable bounds to equal the given demand, as pure space heating does
not provide any flexibility.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.SpaceHeating.update_schedule">
<code class="sig-name descname">update_schedule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.SpaceHeating.update_schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the schedule with the scheduling model solution.</p>
<p>Retrieve the solution from the scheduling model and write it to the
schedule. The model must be optimal. The time / position of the
solution in the schedule is determined by <cite>self.timer.current_timestep</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.ThermalCoolingStorage">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">ThermalCoolingStorage</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">e_th_max</span></em>, <em class="sig-param"><span class="n">soc_init</span><span class="o">=</span><span class="default_value">0.5</span></em>, <em class="sig-param"><span class="n">loss_factor</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">storage_end_equality</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ThermalCoolingStorage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling" title="pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_cooling.ThermalEntityCooling</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.thermal_energy_storage.ThermalEnergyStorage</span></code></p>
<p>Extension of pyCity_base class ThermalEnergyStorage for scheduling purposes.
A thermal cooling storage device can be used as a ‘buffer’ within a cooling system setup.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>e_th_max</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Amount of energy the TCS is able to store in [kWh].</p></li>
<li><p><strong>soc_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Initial state of charge.</p></li>
<li><p><strong>loss_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Storage’s loss factor (area*U_value) in [W/K].</p></li>
<li><p><strong>storage_end_equality</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Defaults to <cite>False</cite>.
<cite>True</cite> if the soc at the end of the scheduling has to be equal to
the initial soc.
<cite>False</cite> if it has to be greater or equal than the initial soc.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>TCSs offer sets of constraints for operation. The following constraints
and bounds are generated by the TCS:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}e_{th\_cool} &amp;=&amp; e_{th\_cool\_previous} * (1-th\_loss) + p_{th\_cool} * \Delta t \\
\text{with} \quad e_{th\_cool\_previous}
&amp;=&amp; \begin{bmatrix} e_{th\_ini} &amp; e_{th\_cool\_0} &amp; \cdots &amp; e_{th\_cool\_n-1}\end{bmatrix}\end{split}\]</div>
<ul class="simple">
<li><p>Additional constraints generated by the parameters are:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}e_{th\_cool\_t\_last} &amp;=&amp; soc\_init * e_{th\_max}, &amp; \quad \text{if storage_end_equality} \\
e_{th\_cool\_t\_last} &amp;\geq&amp; soc\_init * e_{th\_max}, &amp; \quad \text{else}\end{split}\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.ThermalCoolingStorage.populate_model" title="pycity_scheduling.classes.ThermalCoolingStorage.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.ThermalCoolingStorage.update_model" title="pycity_scheduling.classes.ThermalCoolingStorage.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.ThermalCoolingStorage.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ThermalCoolingStorage.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel</p>
<p>Call parent’s <cite>populate_model</cite> method and set variables lower bounds
to <cite>None</cite>. Then add variables for the state of charge with an upper
bound of <cite>self.e_th_max</cite>. Also add continuity constraints to the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite> : Use same constraints as convex mode</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.ThermalCoolingStorage.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ThermalCoolingStorage.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.ThermalEntityCooling">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">ThermalEntityCooling</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ThermalEntityCooling" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.optimization_entity.OptimizationEntity</span></code></a></p>
<p>Base class for all thermal cooling entities derived from OptimizationEntity.</p>
<p>This class provides functionality common to all thermal cooling entities.</p>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>Cooling TEs add the <span class="math notranslate nohighlight">\(p_{th\_cool}\)</span> variable to the model. When not modified
by other classes, the following constraint is added:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[p_{th\_cool} \geq 0\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.ThermalEntityCooling.populate_model" title="pycity_scheduling.classes.ThermalEntityCooling.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.ThermalEntityCooling.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ThermalEntityCooling.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel.</p>
<p>Add variables for the thermal cooling demand of the entity to the optimization
model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use same constraints as convex mode</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.ThermalEntityHeating">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">ThermalEntityHeating</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ThermalEntityHeating" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.optimization_entity.OptimizationEntity" title="pycity_scheduling.classes.optimization_entity.OptimizationEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.optimization_entity.OptimizationEntity</span></code></a></p>
<p>Base class for all thermal heating entities derived from OptimizationEntity.</p>
<p>This class provides functionality common to all thermal heating entities.</p>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>Heating TEs add the <span class="math notranslate nohighlight">\(p_{th\_heat}\)</span> variable to the model. When not modified
by other classes, the following constraint is added:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[p_{th\_heat} \geq 0\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.ThermalEntityHeating.populate_model" title="pycity_scheduling.classes.ThermalEntityHeating.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.ThermalEntityHeating.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ThermalEntityHeating.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel.</p>
<p>Add variables for the thermal heating demand of the entity to the optimization
model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use same constraints as convex mode</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.ThermalHeatingStorage">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">ThermalHeatingStorage</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">e_th_max</span></em>, <em class="sig-param"><span class="n">soc_init</span><span class="o">=</span><span class="default_value">0.5</span></em>, <em class="sig-param"><span class="n">loss_factor</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">storage_end_equality</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ThermalHeatingStorage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating" title="pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.thermal_entity_heating.ThermalEntityHeating</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.thermal_energy_storage.ThermalEnergyStorage</span></code></p>
<p>Extension of pyCity_base class ThermalEnergyStorage for scheduling purposes.
A thermal heating storage device can be used as a ‘buffer’ within a heating system setup.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>e_th_max</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Amount of energy the THS is able to store in [kWh].</p></li>
<li><p><strong>soc_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – Initial state of charge.</p></li>
<li><p><strong>loss_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Storage’s loss factor (area*U_value) in [W/K].</p></li>
<li><p><strong>storage_end_equality</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Defaults to <cite>False</cite>.
<cite>True</cite> if the soc at the end of the scheduling has to be equal to
the initial soc.
<cite>False</cite> if it has to be greater or equal than the initial soc.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>THSs offer sets of constraints for operation. The following constraints
and bounds are generated by the THS:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}e_{th\_heat} &amp;=&amp; e_{th\_heat\_previous} * (1-th\_loss) + p_{th\_heat} * \Delta t \\
\text{with} \quad e_{th\_heat\_previous}
&amp;=&amp; \begin{bmatrix} e_{th\_ini} &amp; e_{th\_heat\_0} &amp; \cdots &amp; e_{th\_heat\_n-1}\end{bmatrix}\end{split}\]</div>
<ul class="simple">
<li><p>Additional constraints generated by the parameters are:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}e_{th\_heat\_t\_last} &amp;=&amp; soc\_init * e_{th\_max}, &amp; \quad \text{if storage_end_equality} \\
e_{th\_heat\_t\_last} &amp;\geq&amp; soc\_init * e_{th\_max}, &amp; \quad \text{else}\end{split}\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.ThermalHeatingStorage.populate_model" title="pycity_scheduling.classes.ThermalHeatingStorage.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add device block to pyomo ConcreteModel</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.ThermalHeatingStorage.update_model" title="pycity_scheduling.classes.ThermalHeatingStorage.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.ThermalHeatingStorage.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ThermalHeatingStorage.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add device block to pyomo ConcreteModel</p>
<p>Call parent’s <cite>populate_model</cite> method and set variables lower bounds
to <cite>None</cite>. Then add variables for the state of charge with an upper
bound of <cite>self.e_th_max</cite>. Also add continuity constraints to the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite> : Use same constraints as convex mode</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.ThermalHeatingStorage.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.ThermalHeatingStorage.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.Timer">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">Timer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">step_size</span><span class="o">=</span><span class="default_value">900</span></em>, <em class="sig-param"><span class="n">op_horizon</span><span class="o">=</span><span class="default_value">96</span></em>, <em class="sig-param"><span class="n">mpc_horizon</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mpc_step_width</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">initial_date</span><span class="o">=</span><span class="default_value">(2015, 1, 1)</span></em>, <em class="sig-param"><span class="n">initial_time</span><span class="o">=</span><span class="default_value">(0, 0, 0)</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Timer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.timer.Timer</span></code></p>
<p>Extension of pyCity_base class Timer for scheduling purposes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>step_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Number of seconds in one time step.</p></li>
<li><p><strong>op_horizon</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Number of time steps used in one scheduling optimization.</p></li>
<li><p><strong>mpc_horizon</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Number of time steps in whole simulation. All data must be
available for this time. If <cite>None</cite> set value to <cite>op_horizon</cite>.</p></li>
<li><p><strong>mpc_step_width</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><em>int</em></a><em>, </em><em>optional</em>) – Number of timesteps between two optimizations in MPC. If None set
value to <cite>op_horizon</cite>.</p></li>
<li><p><strong>initial_date</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em>, </em><em>optional</em>) – Initial date in the format (year, month, day).</p></li>
<li><p><strong>initial_time</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><em>tuple</em></a><em>, </em><em>optional</em>) – Initial time in the format (hour, minute, second).</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>This class’ behaviour may differ from the one of the baseclass, as it
keeps an actual date rather than a relative counter only</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><a class="reference internal" href="#pycity_scheduling.classes.Timer.date" title="pycity_scheduling.classes.Timer.date"><code class="xref py py-obj docutils literal notranslate"><span class="pre">date</span></code></a></dt><dd><p>The date of the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.Timer.datetime" title="pycity_scheduling.classes.Timer.datetime"><code class="xref py py-obj docutils literal notranslate"><span class="pre">datetime</span></code></a></dt><dd><p>The datetime of the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.Timer.day" title="pycity_scheduling.classes.Timer.day"><code class="xref py py-obj docutils literal notranslate"><span class="pre">day</span></code></a></dt><dd><p>The day of the month for the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.Timer.hour" title="pycity_scheduling.classes.Timer.hour"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hour</span></code></a></dt><dd><p>The hour of the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.Timer.is_leap" title="pycity_scheduling.classes.Timer.is_leap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_leap</span></code></a></dt><dd><p>If the year of the current timestep is a leap year.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.Timer.minute" title="pycity_scheduling.classes.Timer.minute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">minute</span></code></a></dt><dd><p>The minute of the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.Timer.month" title="pycity_scheduling.classes.Timer.month"><code class="xref py py-obj docutils literal notranslate"><span class="pre">month</span></code></a></dt><dd><p>The month of the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.Timer.second" title="pycity_scheduling.classes.Timer.second"><code class="xref py py-obj docutils literal notranslate"><span class="pre">second</span></code></a></dt><dd><p>The second of the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.Timer.time" title="pycity_scheduling.classes.Timer.time"><code class="xref py py-obj docutils literal notranslate"><span class="pre">time</span></code></a></dt><dd><p>The time for the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.Timer.weekday" title="pycity_scheduling.classes.Timer.weekday"><code class="xref py py-obj docutils literal notranslate"><span class="pre">weekday</span></code></a></dt><dd><p>The weekday of the current timestep.</p>
</dd>
<dt><a class="reference internal" href="#pycity_scheduling.classes.Timer.year" title="pycity_scheduling.classes.Timer.year"><code class="xref py py-obj docutils literal notranslate"><span class="pre">year</span></code></a></dt><dd><p>The year of the current timestep.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Timer.mpc_update" title="pycity_scheduling.classes.Timer.mpc_update"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mpc_update</span></code></a>()</p></td>
<td><p>Update Timer for MPC.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Timer.op_update" title="pycity_scheduling.classes.Timer.op_update"><code class="xref py py-obj docutils literal notranslate"><span class="pre">op_update</span></code></a>()</p></td>
<td><p>Update Timer for a normal scheduling optimization.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Timer.print_datetime" title="pycity_scheduling.classes.Timer.print_datetime"><code class="xref py py-obj docutils literal notranslate"><span class="pre">print_datetime</span></code></a>()</p></td>
<td><p>Print the datetime for the current timestep.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Timer.reset" title="pycity_scheduling.classes.Timer.reset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset</span></code></a>()</p></td>
<td><p>Reset the Timer to the initial state.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Timer.time_in_day" title="pycity_scheduling.classes.Timer.time_in_day"><code class="xref py py-obj docutils literal notranslate"><span class="pre">time_in_day</span></code></a>([unit, from_init])</p></td>
<td><p>Time passed since beginning of the day.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Timer.time_in_week" title="pycity_scheduling.classes.Timer.time_in_week"><code class="xref py py-obj docutils literal notranslate"><span class="pre">time_in_week</span></code></a>([unit, from_init])</p></td>
<td><p>Time passed since beginning of the day.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.Timer.time_in_year" title="pycity_scheduling.classes.Timer.time_in_year"><code class="xref py py-obj docutils literal notranslate"><span class="pre">time_in_year</span></code></a>([unit, from_init])</p></td>
<td><p>Time passed since the beginning of the year.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.date">
<em class="property">property </em><code class="sig-name descname">date</code><a class="headerlink" href="#pycity_scheduling.classes.Timer.date" title="Permalink to this definition">¶</a></dt>
<dd><p>The date of the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.datetime">
<em class="property">property </em><code class="sig-name descname">datetime</code><a class="headerlink" href="#pycity_scheduling.classes.Timer.datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>The datetime of the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.day">
<em class="property">property </em><code class="sig-name descname">day</code><a class="headerlink" href="#pycity_scheduling.classes.Timer.day" title="Permalink to this definition">¶</a></dt>
<dd><p>The day of the month for the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.hour">
<em class="property">property </em><code class="sig-name descname">hour</code><a class="headerlink" href="#pycity_scheduling.classes.Timer.hour" title="Permalink to this definition">¶</a></dt>
<dd><p>The hour of the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.is_leap">
<em class="property">property </em><code class="sig-name descname">is_leap</code><a class="headerlink" href="#pycity_scheduling.classes.Timer.is_leap" title="Permalink to this definition">¶</a></dt>
<dd><p>If the year of the current timestep is a leap year.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.minute">
<em class="property">property </em><code class="sig-name descname">minute</code><a class="headerlink" href="#pycity_scheduling.classes.Timer.minute" title="Permalink to this definition">¶</a></dt>
<dd><p>The minute of the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.month">
<em class="property">property </em><code class="sig-name descname">month</code><a class="headerlink" href="#pycity_scheduling.classes.Timer.month" title="Permalink to this definition">¶</a></dt>
<dd><p>The month of the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.mpc_update">
<code class="sig-name descname">mpc_update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Timer.mpc_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update Timer for MPC.</p>
<p>Move <cite>self.mpc_step_width</cite> timesteps forward.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.op_update">
<code class="sig-name descname">op_update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Timer.op_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update Timer for a normal scheduling optimization.</p>
<p>Go <cite>self.timesteps_used_horizon</cite> timesteps forward.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.print_datetime">
<code class="sig-name descname">print_datetime</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Timer.print_datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the datetime for the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Timer.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the Timer to the initial state.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.second">
<em class="property">property </em><code class="sig-name descname">second</code><a class="headerlink" href="#pycity_scheduling.classes.Timer.second" title="Permalink to this definition">¶</a></dt>
<dd><p>The second of the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.time">
<em class="property">property </em><code class="sig-name descname">time</code><a class="headerlink" href="#pycity_scheduling.classes.Timer.time" title="Permalink to this definition">¶</a></dt>
<dd><p>The time for the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.time_in_day">
<code class="sig-name descname">time_in_day</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'timesteps'</span></em>, <em class="sig-param"><span class="n">from_init</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Timer.time_in_day" title="Permalink to this definition">¶</a></dt>
<dd><p>Time passed since beginning of the day.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>unit</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies the unit for the result.</p>
<ul>
<li><p>’timesteps’ Return the time as timesteps.</p></li>
<li><p>’seconds’ Return the time as seconds.</p></li>
<li><p>’days’ Return the time as days.</p></li>
</ul>
</p></li>
<li><p><strong>from_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Time for init datetime or current datetime.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Time in specified unit.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.time_in_week">
<code class="sig-name descname">time_in_week</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'timesteps'</span></em>, <em class="sig-param"><span class="n">from_init</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Timer.time_in_week" title="Permalink to this definition">¶</a></dt>
<dd><p>Time passed since beginning of the day.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>unit</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies the unit for the result.</p>
<ul>
<li><p>’timesteps’ Return the time as timesteps.</p></li>
<li><p>’seconds’ Return the time as seconds.</p></li>
<li><p>’days’ Return the time as days.</p></li>
</ul>
</p></li>
<li><p><strong>from_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Time for init datetime or current datetime.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Time in specified unit.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.time_in_year">
<code class="sig-name descname">time_in_year</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'timesteps'</span></em>, <em class="sig-param"><span class="n">from_init</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Timer.time_in_year" title="Permalink to this definition">¶</a></dt>
<dd><p>Time passed since the beginning of the year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>unit</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies the unit for the result.</p>
<ul>
<li><p>’timesteps’ Return the time as timesteps.</p></li>
<li><p>’seconds’ Return the time as seconds.</p></li>
<li><p>’days’ Return the time as days.</p></li>
</ul>
</p></li>
<li><p><strong>from_init</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – Time for init date or current date.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Time in specified unit.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.weekday">
<em class="property">property </em><code class="sig-name descname">weekday</code><a class="headerlink" href="#pycity_scheduling.classes.Timer.weekday" title="Permalink to this definition">¶</a></dt>
<dd><p>The weekday of the current timestep.</p>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.Timer.year">
<em class="property">property </em><code class="sig-name descname">year</code><a class="headerlink" href="#pycity_scheduling.classes.Timer.year" title="Permalink to this definition">¶</a></dt>
<dd><p>The year of the current timestep.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.Weather">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">Weather</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">timer</span></em>, <em class="sig-param"><span class="n">path_TRY</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">path_TMY3</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">new_try</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">path_temperature</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">path_direct_radiation</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">path_diffuse_radiation</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">path_wind_speed</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">path_humidity</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">path_pressure</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">path_cloudiness</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">time_discretization</span><span class="o">=</span><span class="default_value">3600</span></em>, <em class="sig-param"><span class="n">delimiter</span><span class="o">=</span><span class="default_value">'\t'</span></em>, <em class="sig-param"><span class="n">use_TRY</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">use_TMY3</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">location</span><span class="o">=</span><span class="default_value">(50.76, 6.07)</span></em>, <em class="sig-param"><span class="n">height_velocity_measurement</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">altitude</span><span class="o">=</span><span class="default_value">152.0</span></em>, <em class="sig-param"><span class="n">time_zone</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.Weather" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.weather.Weather</span></code></p>
<p>Extension of pyCity_base class Weather for scheduling purposes.</p>
</dd></dl>

<dl class="py class">
<dt id="pycity_scheduling.classes.WindEnergyConverter">
<em class="property">class </em><code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">WindEnergyConverter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">environment</span></em>, <em class="sig-param"><span class="n">velocity</span></em>, <em class="sig-param"><span class="n">power</span></em>, <em class="sig-param"><span class="n">hub_height</span><span class="o">=</span><span class="default_value">70</span></em>, <em class="sig-param"><span class="n">roughness</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">force_renewables</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.WindEnergyConverter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pycity_scheduling.classes.electrical_entity.ElectricalEntity" title="pycity_scheduling.classes.electrical_entity.ElectricalEntity"><code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_scheduling.classes.electrical_entity.ElectricalEntity</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">pycity_base.classes.supply.wind_energy_converter.WindEnergyConverter</span></code></p>
<p>Extension of pyCity_base class WindEnergyConverter for scheduling purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>environment</strong> (<a class="reference internal" href="#pycity_scheduling.classes.environment.Environment" title="pycity_scheduling.classes.environment.Environment"><em>Environment</em></a>) – Common Environment instance.</p></li>
<li><p><strong>velocity</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.19)"><em>numpy.ndarray</em></a>) – Wind speeds in [m/s].</p></li>
<li><p><strong>power</strong> (<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.19)"><em>numpy.ndarray</em></a>) – Power for given velocities in [kW].</p></li>
<li><p><strong>hub_height</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Height of the wind energy converter in [m].</p></li>
<li><p><strong>roughness</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Roughness of landscape in [m].</p></li>
<li><p><strong>force_renewables</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a><em>, </em><em>optional</em>) – <cite>True</cite> if generation may not be reduced for optimization purposes.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The following constraint is added for removing the bounds from EE:</p></li>
</ul>
<div class="math notranslate nohighlight">
\[\begin{split}p_{el} &amp;=&amp; -p_{el\_supply}, &amp; \quad \text{if force_renewables} \\
0 \geq p_{el} &amp;\geq&amp; -p_{el\_supply} , &amp; \quad \text{else}\end{split}\]</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.WindEnergyConverter.get_objective" title="pycity_scheduling.classes.WindEnergyConverter.get_objective"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_objective</span></code></a>([coeff])</p></td>
<td><p>Objective function of the WindEnergyConverter.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pycity_scheduling.classes.WindEnergyConverter.populate_model" title="pycity_scheduling.classes.WindEnergyConverter.populate_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populate_model</span></code></a>(model[, mode])</p></td>
<td><p>Add entity block to pyomo ConcreteModel.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pycity_scheduling.classes.WindEnergyConverter.update_model" title="pycity_scheduling.classes.WindEnergyConverter.update_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_model</span></code></a>([mode])</p></td>
<td><p>Update block parameters and bounds.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="pycity_scheduling.classes.WindEnergyConverter.get_objective">
<code class="sig-name descname">get_objective</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coeff</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.WindEnergyConverter.get_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function of the WindEnergyConverter.</p>
<p>Return the objective function of the wind energy converter weighted
with <cite>coeff</cite>. Depending on <cite>self.force_renewables</cite> leave objective
function empty or build quadratic objective function to minimize
discrepancy between available power and produced power.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>coeff</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em>, </em><em>optional</em>) – Coefficient for the objective function.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Objective function.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ExpressionBase</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.WindEnergyConverter.populate_model">
<code class="sig-name descname">populate_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'convex'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.WindEnergyConverter.populate_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add entity block to pyomo ConcreteModel.</p>
<p>Places the block with the name of the entity in the ConcreteModel.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>pyomo.ConcreteModel</em>) – </p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul>
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : May use integer variables</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pycity_scheduling.classes.WindEnergyConverter.update_model">
<code class="sig-name descname">update_model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.WindEnergyConverter.update_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Update block parameters and bounds.</p>
<p>Set parameters and bounds according to the current situation of the
device according to the previous schedule and the current forecasts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em>, </em><em>optional</em>) – <p>Specifies which set of constraints to use.</p>
<ul class="simple">
<li><p><cite>convex</cite>  : Use linear constraints</p></li>
<li><p><cite>integer</cite>  : Use integer variables representing discrete control decisions</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="pycity_scheduling.classes.filter_entities">
<code class="sig-prename descclassname">pycity_scheduling.classes.</code><code class="sig-name descname">filter_entities</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">entities</span></em>, <em class="sig-param"><span class="n">entity_type</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pycity_scheduling.classes.filter_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter a list of entities for given entity types.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entities</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><em>list</em></a><em> or </em><em>generator or</em>) – pycity_scheduling.classes.OptimizationEntity
Entities to be filtered. When an Optimization Entity is given its
<cite>get_entities</cite> method is called.</p></li>
<li><p><strong>entity_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><em>list</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) – <dl class="simple">
<dt>In case of <cite>str</cite>: must be the name of a dictionary from this module</dt><dd><p>(e.g. ‘generation_devices’) or the short name of an entity
(e.g. ‘PV’)</p>
</dd>
<dt>In case of <cite>list</cite>: must be a list of classes to be filtered for or a</dt><dd><p>list of short names (e.g. <cite>[‘PV’, ‘WEC’]</cite>)</p>
</dd>
</dl>
<p>In case of <cite>dict</cite>: its values must be the classes to be filtered for</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><em>OptimizationEntity</em> – All entities matching the given filter</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pycity_scheduling.classes package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.apartment">pycity_scheduling.classes.apartment module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.battery">pycity_scheduling.classes.battery module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.boiler">pycity_scheduling.classes.boiler module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.building">pycity_scheduling.classes.building module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.building_energy_system">pycity_scheduling.classes.building_energy_system module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.chiller">pycity_scheduling.classes.chiller module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.city_district">pycity_scheduling.classes.city_district module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.combined_heat_power">pycity_scheduling.classes.combined_heat_power module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.curtailable_load">pycity_scheduling.classes.curtailable_load module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.deferrable_load">pycity_scheduling.classes.deferrable_load module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.electrical_entity">pycity_scheduling.classes.electrical_entity module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.electrical_heater">pycity_scheduling.classes.electrical_heater module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.electrical_vehicle">pycity_scheduling.classes.electrical_vehicle module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.entity_container">pycity_scheduling.classes.entity_container module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.environment">pycity_scheduling.classes.environment module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.fixed_load">pycity_scheduling.classes.fixed_load module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.heat_pump">pycity_scheduling.classes.heat_pump module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.optimization_entity">pycity_scheduling.classes.optimization_entity module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.photovoltaic">pycity_scheduling.classes.photovoltaic module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.prices">pycity_scheduling.classes.prices module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.space_cooling">pycity_scheduling.classes.space_cooling module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.space_heating">pycity_scheduling.classes.space_heating module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.thermal_cooling_storage">pycity_scheduling.classes.thermal_cooling_storage module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.thermal_entity_cooling">pycity_scheduling.classes.thermal_entity_cooling module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.thermal_entity_heating">pycity_scheduling.classes.thermal_entity_heating module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.thermal_heating_storage">pycity_scheduling.classes.thermal_heating_storage module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.timer">pycity_scheduling.classes.timer module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.weather">pycity_scheduling.classes.weather module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes.wind_energy_converter">pycity_scheduling.classes.wind_energy_converter module</a></li>
<li><a class="reference internal" href="#module-pycity_scheduling.classes">Module contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pycity_scheduling.algorithms.html"
                        title="previous chapter">pycity_scheduling.algorithms package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pycity_scheduling.util.html"
                        title="next chapter">pycity_scheduling.util package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/pycity_scheduling.classes.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pycity_scheduling.util.html" title="pycity_scheduling.util package"
             >next</a> |</li>
        <li class="right" >
          <a href="pycity_scheduling.algorithms.html" title="pycity_scheduling.algorithms package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pycity_scheduling v1.0.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">pycity_scheduling.classes package</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Institute for Automation of Complex Power Systems (ACS), E.ON Energy Research Center (E.ON ERC), RWTH Aachen University.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.3.1.
    </div>
  </body>
</html>